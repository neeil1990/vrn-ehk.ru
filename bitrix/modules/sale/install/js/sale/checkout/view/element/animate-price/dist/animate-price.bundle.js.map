{"version":3,"file":"animate-price.bundle.js","sources":["../src/animate-price.js"],"sourcesContent":["import { BitrixVue } from 'ui.vue';\nimport { Type } from 'main.core';\nimport { CurrencyCore } from 'currency.currency-core';\nimport 'sale.checkout.view.element.animate-price'\n\nBitrixVue.component('sale-checkout-view-element-animate_price', {\n\tprops: ['sum', 'currency', 'prefix'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tdisplaySum: this.sum,\n\t\t\tinterval: false,\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tgetPrefix()\n\t\t{\n\t\t\treturn Type.isString(this.prefix) ? this.prefix:''\n\t\t},\n\t\tsumFormatted()\n\t\t{\n\t\t\treturn CurrencyCore.currencyFormat(this.displaySum, this.currency, true);\n\t\t},\n\t\tgetSum()\n\t\t{\n\t\t\treturn this.sum\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tanimated()\n\t\t{\n\t\t\tclearInterval(this.interval);\n\n\t\t\tif(this.sum !== this.displaySum)\n\t\t\t{\n\t\t\t\tthis.interval = window.setInterval(()=>\n\t\t\t\t{\n\t\t\t\t\tif(this.displaySum !== this.sum)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet diff = (this.sum - this.displaySum) / 5;\n\n\t\t\t\t\t\tdiff = diff >= 0 ? Math.ceil(diff) : Math.floor(diff);\n\n\t\t\t\t\t\tif(diff > 0 && this.displaySum + diff > this.sum)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.displaySum = this.sum\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.displaySum = this.displaySum + diff\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tclearInterval(this.interval);\n\t\t\t\t\t}\n\t\t\t\t}, 10);\n\t\t\t}\n\t\t}\n\t},\n\twatch:\n\t{\n\t\tgetSum()\n\t\t{\n\t\t\tthis.animated()\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div v-html=\"getPrefix + sumFormatted\"/>\n\t`\n});"],"names":["BitrixVue","component","props","data","displaySum","sum","interval","computed","getPrefix","Type","isString","prefix","sumFormatted","CurrencyCore","currencyFormat","currency","getSum","methods","animated","clearInterval","window","setInterval","diff","Math","ceil","floor","watch","template"],"mappings":";;;;;;;AAKAA,iBAAS,CAACC,SAAS,CAAC,0CAA0C,EAAE;GAC/DC,KAAK,EAAE,CAAC,KAAK,EAAE,UAAU,EAAE,QAAQ,CAAC;GACpCC,IAAI,kBACJ;KACC,OAAO;OACNC,UAAU,EAAE,IAAI,CAACC,GAAG;OACpBC,QAAQ,EAAE;MACV;IACD;GACDC,QAAQ,EACR;KACCC,SAAS,uBACT;OACC,OAAOC,cAAI,CAACC,QAAQ,CAAC,IAAI,CAACC,MAAM,CAAC,GAAG,IAAI,CAACA,MAAM,GAAC,EAAE;MAClD;KACDC,YAAY,0BACZ;OACC,OAAOC,kCAAY,CAACC,cAAc,CAAC,IAAI,CAACV,UAAU,EAAE,IAAI,CAACW,QAAQ,EAAE,IAAI,CAAC;MACxE;KACDC,MAAM,oBACN;OACC,OAAO,IAAI,CAACX,GAAG;;IAEhB;GACDY,OAAO,EACP;KACCC,QAAQ,sBACR;OAAA;OACCC,aAAa,CAAC,IAAI,CAACb,QAAQ,CAAC;OAE5B,IAAG,IAAI,CAACD,GAAG,KAAK,IAAI,CAACD,UAAU,EAC/B;SACC,IAAI,CAACE,QAAQ,GAAGc,MAAM,CAACC,WAAW,CAAC,YACnC;WACC,IAAG,KAAI,CAACjB,UAAU,KAAK,KAAI,CAACC,GAAG,EAC/B;aACC,IAAIiB,IAAI,GAAG,CAAC,KAAI,CAACjB,GAAG,GAAG,KAAI,CAACD,UAAU,IAAI,CAAC;aAE3CkB,IAAI,GAAGA,IAAI,IAAI,CAAC,GAAGC,IAAI,CAACC,IAAI,CAACF,IAAI,CAAC,GAAGC,IAAI,CAACE,KAAK,CAACH,IAAI,CAAC;aAErD,IAAGA,IAAI,GAAG,CAAC,IAAI,KAAI,CAAClB,UAAU,GAAGkB,IAAI,GAAG,KAAI,CAACjB,GAAG,EAChD;eACC,KAAI,CAACD,UAAU,GAAG,KAAI,CAACC,GAAG;cAC1B,MAED;eACC,KAAI,CAACD,UAAU,GAAG,KAAI,CAACA,UAAU,GAAGkB,IAAI;;YAEzC,MAED;aACCH,aAAa,CAAC,KAAI,CAACb,QAAQ,CAAC;;UAE7B,EAAE,EAAE,CAAC;;;IAGR;GACDoB,KAAK,EACL;KACCV,MAAM,oBACN;OACC,IAAI,CAACE,QAAQ,EAAE;;IAEhB;;GAEDS,QAAQ;CAGT,CAAC,CAAC;;;;"}