{"version":3,"file":"syncinterface.bundle.js","sources":["../src/controls/statusblock.js","../src/auxiliarysyncpanel.js","../src/syncpanelunit.js","../src/syncpanel.js","../src/gridunit.js","../src/controls/connectioncontrols.js","../src/controls/mobilesyncbanner.js","../src/itemstemplate/interfacetemplate.js","../src/itemstemplate/caldavinterfacetemplate.js","../src/itemstemplate/caldavtemplate.js","../src/itemstemplate/exchangetemplate.js","../src/syncwizard/syncwizard.js","../src/syncwizard/syncstageunit.js","../src/syncwizard/googlesyncwizard.js","../src/itemstemplate/googletemplate.js","../src/controls/icloudauthdialog.js","../src/syncwizard/icloudsyncwizard.js","../src/controls/warnsynciclouddialog.js","../src/itemstemplate/icloudtemplate.js","../src/syncwizard/office365syncwizard.js","../src/itemstemplate/office365template.js","../src/itemstemplate/mactemplate.js","../src/itemstemplate/outlooktemplate.js","../src/itemstemplate/yandextemplate.js","../src/itemstemplate/mobileinterfacetemplate.js","../src/itemstemplate/androidtemplate.js","../src/itemstemplate/iphonetemplate.js","../src/controls/icalsyncpopup.js","../src/controls/aftersynctour.js"],"sourcesContent":["// @flow\n'use strict';\n\nimport {Loc, Tag} from \"main.core\";\nimport {SyncStatusPopup} from \"calendar.sync.manager\";\n\nexport default class StatusBlock\n{\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connections = options.connections;\n\t\tthis.withStatusLabel = options.withStatusLabel;\n\t\tthis.popupWithUpdateButton = options.popupWithUpdateButton;\n\t\tthis.popupId = options.popupId;\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tsetStatus(status)\n\t{\n\t\tthis.status = status;\n\n\t\treturn this;\n\t}\n\n\tsetConnections(connections)\n\t{\n\t\tthis.connections = connections;\n\n\t\treturn this;\n\t}\n\n\tgetContent()\n\t{\n\t\tlet statusInfoBlock;\n\t\tif (this.status === 'success')\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-success calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_SUCCESS')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse if (this.status === 'failed')\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-danger calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_ALERT')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-primary calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_NOT_CONNECTED')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tstatusInfoBlock.addEventListener('mouseenter', () => {\n\t\t\tthis.handlerMouseEnter(statusInfoBlock);\n\t\t});\n\n\t\tstatusInfoBlock.addEventListener('mouseleave', () => {\n\t\t\tthis.handlerMouseLeave();\n\t\t});\n\n\t\tthis.statusBlock = Tag.render `\n\t\t\t<div class=\"calendar-sync-status-block\" id=\"calendar-sync-status-block\">\n\t\t\t\t${this.getStatusTextLabel()}\n\t\t\t\t${statusInfoBlock}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.statusBlock;\n\t}\n\n\tgetStatusTextLabel()\n\t{\n\t\treturn this.withStatusLabel\n\t\t\t? Tag.render`\n\t\t\t\t<div class=\"calendar-sync-status-subtitle\">\n\t\t\t\t\t<span data-hint=\"\"></span>\n\t\t\t\t\t<span class=\"calendar-sync-status-text\">${Loc.getMessage('LABEL_STATUS_INFO')}:</span>\n\t\t\t\t</div>`\n\t\t\t: ''\n\t\t;\n\t}\n\n\thandlerMouseEnter(statusBlock)\n\t{\n\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\tthis.buttonEnterTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.statusBlockEnterTimeout = null;\n\t\t\t\tthis.showPopup(statusBlock);\n\t\t\t}, 500\n\t\t);\n\t}\n\n\thandlerMouseLeave()\n\t{\n\t\tif (this.statusBlockEnterTimeout !== null)\n\t\t{\n\t\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\t\tthis.statusBlockEnterTimeout = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.statusBlockLeaveTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.hidePopup();\n\t\t\t}, 500\n\t\t);\n\t}\n\n\tshowPopup(node)\n\t{\n\t\tif(this.status !== 'not_connected')\n\t\t{\n\t\t\tthis.popup = this.getPopup(node);\n\t\t\tthis.popup.show();\n\n\t\t\tthis.addPopupHandlers();\n\t\t}\n\t}\n\n\thidePopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.hide();\n\t\t}\n\t}\n\n\taddPopupHandlers()\n\t{\n\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseenter', () =>\n\t\t{\n\t\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\t\tclearTimeout(this.statusBlockLeaveTimeout);\n\t\t});\n\n\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseleave', () =>\n\t\t{\n\t\t\tthis.hidePopup();\n\t\t});\n\t}\n\n\tgetPopup(node)\n\t{\n\t\treturn SyncStatusPopup.createInstance({\n\t\t\tconnections: this.connections,\n\t\t\twithUpdateButton: this.popupWithUpdateButton,\n\t\t\tnode: node,\n\t\t\tid: this.popupId,\n\t\t});\n\t}\n\n\trefresh(status, connections)\n\t{\n\t\tthis.status = status;\n\t\tthis.connections = connections;\n\n\t\treturn this;\n\t}\n}","// @flow\n'use strict';\n\nimport {Dom, Loc, Tag, Cache} from \"main.core\";\nimport StatusBlock from \"./controls/statusblock\";\nimport {ConnectionItem} from \"calendar.sync.manager\";\n\nexport default class AuxiliarySyncPanel\n{\n\tMAIN_SYNC_SLIDER_NAME = 'calendar:auxiliary-sync-slider';\n\tSLIDER_WIDTH = 684;\n\tLOADER_NAME = \"calendar:loader\";\n\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connectionsProviders = options.connectionsProviders;\n\t\tthis.userId = options.userId;\n\n\t\tthis.statusBlockEnterTimeout = null;\n\t\tthis.statusBlockLeaveTimeout = null;\n\t}\n\n\topenSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(this.MAIN_SYNC_SLIDER_NAME, {\n\t\t\tcontentCallback: (slider) => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(this.getContent());\n\t\t\t\t});\n\t\t\t},\n\t\t\tallowChangeHistory:false,\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tthis.setGridContent();\n\t\t\t\t},\n\t\t\t\t// onMessage: (event) => {\n\t\t\t\t// \tif (event.getEventId() === 'refreshSliderGrid')\n\t\t\t\t// \t{\n\t\t\t\t// \t\tthis.refreshData();\n\t\t\t\t// \t}\n\t\t\t\t// },\n\t\t\t\t// onClose: (event) => {\n\t\t\t\t// \tBX.SidePanel.Instance.postMessageTop(window.top.BX.SidePanel.Instance.getTopSlider(), \"refreshCalendarGrid\", {});\n\t\t\t\t// },\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tloader: this.LOADER_NAME,\n\t\t});\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap\">\n\t\t\t\t${this.getHeader()}\n\t\t\t\t${this.getMobileHeader()}\n\t\t\t\t${this.getMobileContentWrapper()}\n\t\t\t\t${this.getWebHeader()}\n\t\t\t\t${this.getWebContentWrapper()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHeader()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t${this.getMainHeader()}\n\t\t\t\t${this.getStatusBlockContent(this.getConnections())}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetMainHeader()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-mainHeader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"calendar-sync-header-text\">${Loc.getMessage('SYNC_CALENDAR_HEADER_NEW')}</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetMobileContentWrapper()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-mobileContentWrapper', () => {\n\t\t\treturn Tag.render`\n\t\t\t<div id=\"calendar-sync-mobile\" class=\"calendar-sync-mobile\"></div>\n\t\t`;\n\t\t});\n\n\t}\n\n\tgetWebContentWrapper()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-webContentWrapper', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div id=\"calendar-sync-web\" class=\"calendar-sync-web\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetMobileHeader()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-mobileHeader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-sync-title\">${Loc.getMessage('SYNC_MOBILE_HEADER')}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetWebHeader()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-webHeader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-sync-title\">${Loc.getMessage('SYNC_WEB_HEADER')}</div>\n\t\t`;\n\t\t});\n\t}\n\n\tgetStatusBlockContent(connections)\n\t{\n\t\tthis.statusBlock = StatusBlock.createInstance({\n\t\t\tstatus: this.status,\n\t\t\tconnections: connections,\n\t\t\twithStatusLabel: true,\n\t\t\tpopupWithUpdateButton: true,\n\t\t\tpopupId: 'calendar-syncPanel-status',\n\t\t});\n\n\t\tthis.statusBlockContent =  this.statusBlock.getContent()\n\t\treturn this.statusBlockContent;\n\t}\n\n\tgetConnections()\n\t{\n\t\tconst connections = [];\n\t\tconst items = Object.values(this.connectionsProviders);\n\t\titems.forEach(item =>\n\t\t{\n\t\t\tconst itemConnections = item.getConnections();\n\t\t\tif (itemConnections.length > 0)\n\t\t\t{\n\t\t\t\titemConnections.forEach(connection => {\n\n\t\t\t\t\tif (ConnectionItem.isConnectionItem(connection) && connection.getConnectStatus() === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tconnections.push(connection);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tsetGridContent()\n\t{\n\t\tconst items = Object.values(this.connectionsProviders);\n\n\t\tthis.showWebGridContent(items.filter(item => {\n\t\t\treturn item.mainPanel === false && item.getViewClassification() === 'web';\n\t\t}));\n\n\t\tthis.showMobileGridContent(items.filter(item => {\n\t\t\treturn item.mainPanel === false && item.getViewClassification() === 'mobile';\n\t\t}));\n\t}\n\n\tshowWebGridContent(items)\n\t{\n\t\tconst wrapper = this.getWebContentWrapper();\n\t\tDom.clean(wrapper);\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems: items,\n\t\t\tcontainer: wrapper,\n\t\t\tsizeRatio: \"55%\",\n\t\t\titemMinWidth: 180,\n\t\t\ttileMargin: 7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t\tuserId: this.userId,\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\tshowMobileGridContent(items)\n\t{\n\t\tconst wrapper = this.getMobileContentWrapper();\n\t\tDom.clean(wrapper);\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems:  items,\n\t\t\tcontainer: wrapper,\n\t\t\tsizeRatio:  \"55%\",\n\t\t\titemMinWidth:  180,\n\t\t\ttileMargin:  7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\trefresh(status, connectionsProviders)\n\t{\n\t\tthis.status = status;\n\t\tthis.connectionsProviders = connectionsProviders;\n\t\tthis.blockStatusContent = this.statusBlock.refresh(status, this.getConnections()).getContent();\n\t\tDom.replace(document.querySelector('#calendar-sync-status-block'), this.blockStatusContent);\n\t\tthis.setGridContent();\n\t}\n}","// @flow\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport { Dom, Event, Loc, Tag, Type, Text } from 'main.core';\n\nexport default class SyncPanelUnit\n{\n\tlogoClassName = '';\n\n\tconstructor(options)\n\t{\n\t\tthis.options = options;\n\t\tthis.connectionProvider = this.options.connectionProvider;\n\t}\n\n\tgetConnectionTemplate()\n\t{\n\t\tif (!this.connectionTemplate)\n\t\t{\n\t\t\tthis.connectionTemplate = this.connectionProvider.getClassTemplateItem().createInstance(this.connectionProvider);\n\t\t}\n\t\t\n\t\treturn this.connectionTemplate;\n\t}\n\n\trenderTo(outerWrapper)\n\t{\n\t\tif (Type.isElementNode(outerWrapper))\n\t\t{\n\t\t\touterWrapper.appendChild(this.getContent());\n\t\t}\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.unitNode = Tag.render`\n\t\t\t<div class=\"calendar-sync__calendar-item\">\n\t\t\t\t<div class=\"calendar-sync__calendar-item--logo\">\n\t\t\t\t\t${this.getLogoNode()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__calendar-item--container\">\n\t\t\t\t\t<div class=\"calendar-sync__calendar-item--title\">\n\t\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t\t${this.getSyncInfoWrap()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getButtonsWrap()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.unitNode;\n\t}\n\n\tgetLogoNode()\n\t{\n\t\treturn Tag.render`<div class=\"calendar-sync__calendar-item--logo-image ${this.connectionProvider.getSyncPanelLogo()}\"></div>`;\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.connectionProvider.getSyncPanelTitle();\n\t}\n\n\tgetSyncInfoWrap()\n\t{\n\t\tthis.syncInfoWrap = Tag.render`\n\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t<span data-role=\"sync_info_text\" />\n\t\t\t</div>\n\t\t`;\n\t\treturn this.syncInfoWrap;\n\t}\n\n\tsetSyncStatus(mode)\n\t{\n\t\tthis.unitNode.className = 'calendar-sync__calendar-item';\n\t\tswitch (mode)\n\t\t{\n\t\t\tcase this.connectionProvider.STATUS_SUCCESS:\n\t\t\t\tDom.addClass(this.unitNode, '--complete');\n\t\t\t\tthis.setSyncInfoStatusText(this.formatSyncTime(this.connectionProvider.getSyncDate()));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_FAILED:\n\t\t\t\tDom.addClass(this.unitNode, '--error');\n\t\t\t\tthis.setSyncInfoStatusText(Loc.getMessage('CAL_SYNC_INFO_STATUS_ERROR'));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_PENDING:\n\t\t\t\tDom.addClass(this.unitNode, '--pending');\n\t\t\t\tthis.setSyncInfoStatusText('');\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_SYNCHRONIZING:\n\t\t\t\tDom.addClass(this.unitNode, '--active');\n\t\t\t\tthis.setSyncInfoStatusText(Loc.getMessage('CAL_SYNC_INFO_STATUS_SYNCHRONIZING'));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_NOT_CONNECTED:\n\t\t\t\tthis.setSyncInfoStatusText('');\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetSyncInfoStatusText(text)\n\t{\n\t\tconst syncInfoStatusText = this.syncInfoWrap.querySelector('[data-role=\"sync_info_text\"]');\n\t\tif (Type.isElementNode(syncInfoStatusText))\n\t\t{\n\t\t\tsyncInfoStatusText.innerHTML = Text.encode(text).toUpperCase();\n\t\t}\n\t}\n\n\tgetButtonsWrap()\n\t{\n\t\tif (!Type.isElementNode(this.buttonsWrap))\n\t\t{\n\t\t\tthis.buttonsWrap = Tag.render`<div class=\"calendar-sync__calendar-item--buttons\">\n\t\t\t\t${this.getMoreButton()}\n\t\t\t\t${this.getButton()}\n\t\t\t</div>`;\n\n\t\t\tEvent.bind(this.moreButton, 'click', this.handleItemClick.bind(this));\n\t\t}\n\n\t\treturn this.buttonsWrap;\n\t}\n\n\trefreshButton()\n\t{\n\t\tDom.clean(this.buttonsWrap);\n\t\tthis.moreButton = this.buttonsWrap.appendChild(this.getMoreButton());\n\t\tthis.button = this.buttonsWrap.appendChild(this.getButton());\n\t}\n\n\tgetButton()\n\t{\n\t\tswitch (this.connectionProvider.getStatus())\n\t\t{\n\t\t\tcase this.connectionProvider.STATUS_SUCCESS:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-success\" class=\"ui-btn ui-btn-icon-success ui-btn-link\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_SUCCESS')}\n\t\t\t\t\t</a>`;\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_FAILED:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-failed\" class=\"ui-btn ui-btn-icon-fail ui-btn-link\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_FAILED')}\n\t\t\t\t\t</a>`;\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_PENDING:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-pending\" class=\"ui-btn ui-btn-disabled ui-btn-link\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_PENDING')}\n\t\t\t\t\t</a>`;\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_NOT_CONNECTED:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-not_connected\" class=\"ui-btn ui-btn-success ui-btn-round\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_NOT_CONNECTED')}\n\t\t\t\t\t</a>`;\n\t\t\t\tEvent.bind(this.button, 'click', this.handleItemClick.bind(this));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_SYNCHRONIZING:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-not_connected\" class=\"ui-btn ui-btn-success ui-btn-round ui-btn-clock ui-btn-disabled\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_SUCCESS')}\n\t\t\t\t\t</a>`;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn this.button;\n\t}\n\n\tgetMoreButton()\n\t{\n\t\tthis.moreButton = Tag.render`\n\t\t\t<div \n\t\t\t\tdata-role=\"more-button\" \n\t\t\t\tclass=\"ui-btn ui-btn-round ui-btn-light-border calendar-sync__calendar-item--more\"\n\t\t\t></div>`;\n\t\treturn this.moreButton;\n\t}\n\n\thandleItemClick(e)\n\t{\n\t\tconst status = this.connectionProvider.getStatus();\n\n\t\tif ([this.connectionProvider.STATUS_SUCCESS, this.connectionProvider.STATUS_FAILED].includes(status))\n\t\t{\n\t\t\tif (this.connectionProvider.hasMenu())\n\t\t\t{\n\t\t\t\tthis.connectionProvider.showMenu(this.button);\n\t\t\t}\n\t\t\telse if (this.connectionProvider.getConnectStatus())\n\t\t\t{\n\t\t\t\tthis.connectionProvider.openActiveConnectionSlider(this.connectionProvider.getConnection());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.connectionProvider.openInfoConnectionSlider();\n\t\t\t}\n\t\t}\n\t\telse if(status === this.connectionProvider.STATUS_NOT_CONNECTED)\n\t\t{\n\t\t\tthis.getConnectionTemplate().handleConnectButton();\n\t\t}\n\t}\n\n\tformatSyncTime(date)\n\t{\n\t\tconst now = new Date();\n\t\tlet timestamp = date;\n\t\tif (Type.isDate(date))\n\t\t{\n\t\t\ttimestamp = Math.round(date.getTime() / 1000);\n\t\t\tconst secondsAgo = parseInt((now - date) / 1000);\n\t\t\tif (secondsAgo < 60)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('CAL_JUST');\n\t\t\t}\n\t\t}\n\n\t\treturn BX.date.format(\n\t\t\t[\n\t\t\t\t[\"tommorow\", \"tommorow, H:i:s\"],\n\t\t\t\t[\"i\" , \"iago\"],\n\t\t\t\t[\"H\", \"Hago\"],\n\t\t\t\t[\"d\", \"dago\"],\n\t\t\t\t[\"m100\", \"mago\"],\n\t\t\t\t[\"m\", \"mago\"],\n\t\t\t\t[\"-\", \"\"]\n\t\t\t],\n\t\t\ttimestamp\n\t\t);\n\t}\n}\n","// @flow\n'use strict';\n\nimport {Dom, Loc, Tag, Cache, Event} from \"main.core\";\nimport {ConnectionItem} from \"calendar.sync.manager\";\nimport AuxiliarySyncPanel from \"./auxiliarysyncpanel\";\nimport SyncPanelUnit from './syncpanelunit';\n\nexport default class SyncPanel\n{\n\tMAIN_SYNC_SLIDER_NAME = 'calendar:sync-slider';\n\tHELPDESK_CODE = 11828176;\n\tSLIDER_WIDTH = 770;\n\tLOADER_NAME = \"calendar:loader\";\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connectionsProviders = options.connectionsProviders;\n\t\tthis.userId = options.userId;\n\t\tthis.BX = window.top.BX || window.BX;\n\t}\n\n\topenSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(this.MAIN_SYNC_SLIDER_NAME, {\n\t\t\tcontentCallback: (slider) => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(this.getContent());\n\t\t\t\t});\n\t\t\t},\n\t\t\tallowChangeHistory: false,\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tthis.displayConnectionUnits();\n\t\t\t\t}\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tloader: this.LOADER_NAME,\n\t\t});\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__wrapper calendar-sync__scope\">\n\t\t\t\t${this.getHeaderWrapper()}\n\t\t\t\t<div class=\"calendar-sync__content\">\n\t\t\t\t${this.getUnitsContentWrapper()}\n\t\t\t\t${this.getFooterWrapper()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHeaderWrapper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__header\">\n\t\t\t\t<div class=\"calendar-sync__header-logo\"></div>\n\t\t\t\t<div class=\"calendar-sync__header-container\">\n\t\t\t\t\t<div class=\"calendar-sync__header-title\">${Loc.getMessage('CAL_SYNC_TITLE_NEW')}</div>\n\t\t\t\t\t<div class=\"calendar-sync__header-sub-title\">${Loc.getMessage('CAL_SYNC_SUB_TITLE')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetUnitsContentWrapper()\n\t{\n\t\tthis.unitsContentWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__calendar-list\">\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.unitsContentWrapper;\n\t}\n\n\tgetFooterWrapper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom --space-left\">\n\t\t\t\t${this.getExtraInfoWithCheckIcon()}\n\t\t\t</div>\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom --space-left--double\">\n\t\t\t\t${this.getOpenAuxiliaryPanelLink()}\n\t\t\t</div>\n\t\t\t<div class=\"calendar-sync__content-block --space-left--double\">\n\t\t\t\t${this.getOpenHelpLink()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetExtraInfoWithCheckIcon()\n\t{\n\t\tconst alreadyConnected = Object.values(this.connectionsProviders).filter(item => {\n\t\t\treturn item.mainPanel && item.status;\n\t\t}).length > 0;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__content-text --icon-check${(alreadyConnected ? ' --disabled' : '')}\">\n\t\t\t\t${Loc.getMessage('CAL_SYNC_INFO_PROMO')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetOpenAuxiliaryPanelLink()\n\t{\n\t\tconst link = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-link\">\n\t\t\t\t${Loc.getMessage('CAL_OPEN_AUXILIARY_PANEL')}\n\t\t\t</div>\n\t\t`;\n\t\tEvent.bind(link, 'click', () => {\n\t\t\t\tthis.auxiliarySyncPanel = new AuxiliarySyncPanel({\n\t\t\t\t\tconnectionsProviders: this.connectionsProviders,\n\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\tstatus: this.status,\n\t\t\t\t});\n\t\t\t\tthis.auxiliarySyncPanel.openSlider();\n\t\t});\n\n\t\treturn link;\n\t}\n\n\tgetOpenHelpLink()\n\t{\n\t\tconst link = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-link\">${Loc.getMessage('CAL_SHOW_SYNC_HELP')}</divclass>\n\t\t`;\n\t\tEvent.bind(link, 'click', () => {\n\t\t\tif(this.BX.Helper)\n\t\t\t{\n\t\t\t\tthis.BX.Helper.show(\"redirect=detail&code=\" + this.HELPDESK_CODE);\n\t\t\t}\n\t\t});\n\n\t\treturn link;\n\t}\n\n\tgetConnections()\n\t{\n\t\tconst connections = [];\n\t\tconst items = Object.values(this.connectionsProviders);\n\t\titems.forEach(item =>\n\t\t{\n\t\t\tconst itemConnections = item.getConnections();\n\t\t\tif (itemConnections.length > 0)\n\t\t\t{\n\t\t\t\titemConnections.forEach(connection => {\n\n\t\t\t\t\tif (ConnectionItem.isConnectionItem(connection) && connection.getConnectStatus() === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tconnections.push(connection);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tdisplayConnectionUnits()\n\t{\n\t\tconst items = Object.values(this.connectionsProviders).filter(item => {\n\t\t\treturn item.mainPanel || item.connected;\n\t\t});\n\n\t\tthis.renderConnectionUnits(items);\n\t}\n\n\trenderConnectionUnits(providers)\n\t{\n\t\tDom.clean(this.unitsContentWrapper);\n\t\tproviders.forEach((provider) => {\n\t\t\tconst interfaceUnit = new SyncPanelUnit({connectionProvider: provider});\n\t\t\tprovider.setInterfaceUnit(interfaceUnit);\n\t\t\tinterfaceUnit.renderTo(this.unitsContentWrapper);\n\t\t\tinterfaceUnit.setSyncStatus(provider.getStatus());\n\t\t});\n\t}\n\n\tshowWebGridContent(items)\n\t{\n\t\tconst wrapper = this.getWebContentWrapper();\n\t\tDom.clean(wrapper);\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems: items,\n\t\t\tcontainer: wrapper,\n\t\t\tsizeRatio: \"55%\",\n\t\t\titemMinWidth: 180,\n\t\t\ttileMargin: 7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t\tuserId: this.userId,\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\trefresh(status, connectionsProviders)\n\t{\n\t\tthis.status = status;\n\t\tthis.connectionsProviders = connectionsProviders;\n\t\tDom.replace(document.querySelector('#calendar-sync-status-block'), this.blockStatusContent);\n\t\tthis.displayConnectionUnits();\n\t\tthis.auxiliarySyncPanel.refresh(status, connectionsProviders);\n\t}\n}\n","// @flow\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport { Tag } from \"main.core\";\n\nexport default class GridUnit extends BX.TileGrid.Item\n{\n\tconstructor(item)\n\t{\n\t\tsuper({\n\t\t\tid: item.type,\n\t\t});\n\t\tthis.item = item;\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.gridUnit = Tag.render`<div class=\"calendar-sync-item ${this.getAdditionalContentClass()}\" style=\"${this.getContentStyles()}\">\n\t\t\t<div class=\"calendar-item-content\">\n\t\t\t\t${this.getImage()}\n\t\t\t\t${this.getTitle()}\n\t\t\t\t${(this.isActive() ? this.getStatus() : '')}\n\t\t\t</div>\n\t\t</div>`;\n\n\t\tthis.gridUnit.addEventListener('click', this.onClick.bind(this));\n\n\t\treturn this.gridUnit;\n\t}\n\n\tgetTitle()\n\t{\n\t\tif (!this.layout.title)\n\t\t{\n\t\t\tthis.layout.title = Tag.render `\n\t\t\t\t<div class=\"calendar-sync-item-title\">${BX.util.htmlspecialchars(this.item.getGridTitle())}</div>`;\n\t\t}\n\n\t\treturn this.layout.title;\n\t}\n\n\tgetImage()\n\t{\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-item-image\">\n\t\t\t\t<div class=\"calendar-sync-item-image-item\" style=\"background-image: ${'url(' + this.item.getGridIcon() + ')'}\"></div>\n\t\t\t</div>`;\n\t}\n\n\tgetStatus()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\treturn Tag.render `\n\t\t\t\t<div class=\"calendar-sync-item-status\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tisActive()\n\t{\n\t\treturn this.item.getConnectStatus();\n\t}\n\n\tgetAdditionalContentClass()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\tif (this.item.getSyncStatus())\n\t\t\t{\n\t\t\t\treturn 'calendar-sync-item-selected';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn 'calendar-sync-item-failed';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetContentStyles()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\treturn 'background-color:' + this.item.getGridColor() + ';';\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tonClick()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\tanalyticsLabel: {\n\t\t\t\topen_connection_slider: 'Y',\n\t\t\t\tsync_connection_type: this.item.getType(),\n\t\t\t\tsync_connection_status: this.item.getSyncStatus() ? 'Y' : 'N',\n\t\t\t}\n\t\t});\n\n\t\tif (this.item.hasMenu())\n\t\t{\n\t\t\tthis.item.showMenu(this.gridUnit);\n\t\t}\n\t\telse if (this.item.getConnectStatus())\n\t\t{\n\t\t\tthis.item.openActiveConnectionSlider(this.item.getConnection());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.item.openInfoConnectionSlider();\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc, Tag} from \"main.core\";\n\nexport default class ConnectionControls\n{\n\tuserName = null;\n\tserver = null;\n\tconnectionName = null;\n\n\tconstructor(options = null)\n\t{\n\t\tthis.addButtonText = Loc.getMessage('CAL_UPPER_CONNECT');\n\t\tthis.removeButtonText = Loc.getMessage('CAL_UPPER_DISCONNECT');\n\t\tthis.saveButtonText = Loc.getMessage('CAL_UPPER_SAVE');\n\n\t\tif (options !== null)\n\t\t{\n\t\t\tthis.userName = BX.util.htmlspecialchars(options.userName);\n\t\t\tthis.server = BX.util.htmlspecialchars(options.server);\n\t\t\tthis.connectionName = BX.util.htmlspecialchars(options.connectionName);\n\t\t}\n\t}\n\n\tgetWrapper()\n\t{\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-form\"></div>\n\t\t`;\n\t}\n\n\tgetForm()\n\t{\n\t\treturn Tag.render`\n\t\t\t<form class=\"calendar-sync-slider-form\" action=\"\">\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_NAME')}\\\" name=\"name\" value=\"${this.connectionName || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_SERVER_ADDRESS')}\\\" name=\"server\" value=\"${this.server || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_USER_NAME')}\\\" name=\"user_name\" value=\"${this.userName || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"password\" class=\"ui-ctl-element\" name=\"password\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_PASSWORD')}\\\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t`;\n\t}\n\n\tgetAddButton()\n\t{\n\t\treturn Tag.render `\n\t\t\t<button id=\"connect-button\" class=\"ui-btn ui-btn-light-border\">${this.addButtonText}</button>\n\t\t`;\n\t}\n\n\tgetDisconnectButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"disconnect-button\" class=\"calendar-sync-slider-btn ui-btn ui-btn-light-border\">${this.removeButtonText}</button>\n\t\t`;\n\t}\n\n\tgetSaveButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"edit-connect-button\" class=\"calendar-sync-slider-btn ui-btn ui-btn-light-border\">${this.saveButtonText}</button>\n\t\t`;\n\t}\n\n\tgetButtonWrapper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-form-btn\"></div>\n\t\t`;\n\t}\n}","// @flow\n'use strict';\nimport {Type, Tag, Loc, Runtime, Dom} from 'main.core';\nimport {Util} from \"calendar.util\";\nimport {Popup} from 'main.popup';\n\nexport default class MobileSyncBanner\n{\n\tzIndex = 3100;\n\tDOM = {};\n\tQRCODE_SIZE = 186;\n\tQRCODE_COLOR_LIGHT = '#ffffff';\n\tQRCODE_COLOR_DARK = '#000000';\n\tQRCODE_WRAP_CLASS = 'calendar-sync-slider-qr-container';\n\tQRC = null;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.type = options.type;\n\t\tthis.helpDeskCode = options.helpDeskCode || '11828176';\n\t}\n\n\tshow()\n\t{\n\t}\n\n\tshowInPopup()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: 'calendar-sync-qr-popup',\n\t\t\tdraggable: true,\n\t\t\tcontent: this.getContainer(),\n\t\t\twidth: 580,\n\t\t\tzIndexAbsolute: this.zIndex,\n\t\t\tcacheable: false,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t});\n\t\tthis.popup.show();\n\n\t\tthis.initQrCode().then(this.drawQRCode.bind(this));\n\t}\n\n\tclose()\n\t{\n\t\tthis.popup.close();\n\t}\n\n\tgetContainer()\n\t{\n\t\tthis.DOM.container = Tag.render `\n\t\t\t<div class=\"calendar-sync-qr-popup-content\">\n\t\t\t\t<div class=\"calendar-sync-qr-popup-title\">\n\t\t\t\t\t${this.getTitle()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-content\">\n\t\t\t\t\t<img class=\"calendar-sync-slider-phone-img\" src=\"/bitrix/images/calendar/sync/qr-background.svg\" alt=\"\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-qr\">\n\t\t\t\t\t\t<div class=\"${this.QRCODE_WRAP_CLASS}\">${Util.getLoader(this.QRCODE_SIZE)}</div>\n\t\t\t\t\t\t<span class=\"calendar-sync-slider-logo\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync-slider-instruction\">\n\t\t\t\t\t\t<!--<div class=\"calendar-sync-slider-instruction-subtitle\"></div>-->\n\t\t\t\t\t\t<div class=\"calendar-sync-slider-instruction-title\">${Loc.getMessage('SYNC_MOBILE_NOTICE_HOW_TO')} ${this.type !== 'iphone' ? Tag.render `<span class=\"calendar-notice-mobile-banner\" data-hint=\"${Loc.getMessage('CAL_ANDROID_QR_CODE_HINT')}\" data-hint-no-icon=\"Y\"></span>` : ''}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync-slider-instruction-notice\">${Loc.getMessage('SYNC_MOBILE_NOTICE')}</div>\n\t\t\t\t\t\t<a href=\"javascript:void(0);\" \n\t\t\t\t\t\t\t\tonclick=\"BX.Helper.show('redirect=detail&code=' + ${this.getHelpdeskCode()},{zIndex:3100,}); event.preventDefault();\" \n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-round\">\n\t\t\t\t\t\t\t${Loc.getMessage('SYNC_MOBILE_ABOUT_BTN')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tUtil.initHintNode(this.DOM.container.querySelector('.calendar-notice-mobile-banner'));\n\n\t\treturn this.DOM.container;\n\t}\n\n\tgetInnerContainer()\n\t{\n\t\treturn this.DOM.container.querySelector('.' + this.QRCODE_WRAP_CLASS);\n\t}\n\n\tinitQrCode()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tRuntime.loadExtension(['main.qrcode']).then((exports) => {\n\t\t\t\tif (exports && exports.QRCode)\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tdrawQRCode(wrap)\n\t{\n\t\tif (!Type.isDomNode(wrap))\n\t\t{\n\t\t\twrap = this.getInnerContainer();\n\t\t}\n\n\t\tthis.getMobileSyncUrl().then((link) => {\n\t\t\tDom.clean(wrap);\n\t\t\tthis.QRC = new QRCode(wrap, {\n\t\t\t\ttext: link,\n\t\t\t\twidth: this.getSize(),\n\t\t\t\theight: this.getSize(),\n\t\t\t\tcolorDark : this.QRCODE_COLOR_DARK,\n\t\t\t\tcolorLight : this.QRCODE_COLOR_LIGHT,\n\t\t\t\tcorrectLevel : QRCode.CorrectLevel.H\n\t\t\t});\n\t\t});\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn Loc.getMessage('SYNC_BANNER_MOBILE_TITLE');\n\t}\n\n\tgetMobileSyncUrl()\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAuthLink', {\n\t\t\t\tdata: {\n\t\t\t\t\ttype: this.type ? 'slider' : 'banner',\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tresolve(response.data.link);\n\t\t\t\t},\n\t\t\t\treject\n\t\t\t);\n\t\t});\n\t}\n\n\tgetSize()\n\t{\n\t\treturn this.QRCODE_SIZE;\n\t}\n\n\tgetDetailHelpUrl()\n\t{\n\t\treturn 'https://helpdesk.bitrix24.ru/open/' + this.getHelpdeskCode();\n\t}\n\n\tgetHelpdeskCode()\n\t{\n\t\treturn this.helpDeskCode;\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Tag, Dom, Event, Type } from 'main.core';\nimport { EventEmitter } from \"main.core.events\";\nimport { Util } from 'calendar.util';\n\nexport class InterfaceTemplate extends EventEmitter\n{\n\tstatic SLIDER_WIDTH = 606;\n\tsliderWidth = 840;\n\tstatic SLIDER_PREFIX = 'calendar:connection-sync-';\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.InterfaceTemplate');\n\n\t\tthis.title = options.title;\n\t\tthis.helpdeskCode = options.helpDeskCode;\n\t\tthis.titleInfoHeader = options.titleInfoHeader;\n\t\tthis.descriptionInfoHeader = options.descriptionInfoHeader;\n\t\tthis.titleActiveHeader = options.titleActiveHeader;\n\t\tthis.descriptionActiveHeader = options.descriptionActiveHeader;\n\t\tthis.sliderIconClass = options.sliderIconClass;\n\t\tthis.iconPath = options.iconPath;\n\t\tthis.iconLogoClass = options.iconLogoClass || '';\n\t\tthis.color = options.color;\n\t\tthis.provider = options.provider;\n\t\tthis.connection = options.connection;\n\t\tthis.popupWithUpdateButton = options.popupWithUpdateButton;\n\t}\n\n\tstatic createInstance(provider, connection = null)\n\t{\n\t\treturn new this(provider, connection);\n\t}\n\n\tgetInfoConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t${this.getContentInfoBody()}\n\t\t\t</div>\n\t\t`\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\tthis.disconnectButton = this.getDisconnectButton();\n\t\tEvent.bind(this.disconnectButton, 'click', this.handleDisconnectButton.bind(this));\n\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account ${this.getSyncStatusClassName()}\">\n\t\t\t\t<div class=\"calendar-sync__account-logo\">\n\t\t\t\t\t<div class=\"calendar-sync__account-logo--image ${this.getLogoIconClass()}\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__account-content\">\n\t\t\t\t\t${BX.util.htmlspecialchars(this.connection.getConnectionName())}\n\t\t\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t\t\t${syncTime}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.disconnectButton}\n\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tgetActiveConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__scope\">\n\t\t\t\t\t<div class=\"calendar-sync__content --border-radius\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t\t\t${this.getContentActiveBody()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t${this.getContentActiveBodySectionsHeader()}\n\t\t\t${this.getContentActiveBodySectionsManager()}\n\t\t`;\n\t}\n\n\tshowHelp()\n\t{\n\t\tif (BX.Helper)\n\t\t{\n\t\t\tBX.Helper.show(\"redirect=detail&code=\" + this.helpdeskCode);\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tgetHelpdeskLink()\n\t{\n\t\treturn 'https://helpdesk.bitrix24.ru/open/' + this.helpdeskCode;\n\t}\n\n\tgetHeaderTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetLogoIconClass()\n\t{\n\t\treturn this.iconLogoClass;\n\t}\n\n\tgetContentInfoBodyHeader()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-section\">\n\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-title\">\n\t\t\t\t\t\t${this.titleInfoHeader}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t\t${this.descriptionInfoHeader}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentInfoWarning()\n\t{\n\t\tconst connectOtherButton = this.getWarningButton();\n\t\tEvent.bind(connectOtherButton, 'click', this.handleWarningButtonClick.bind(this));\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-section-warning ui-alert ui-alert-warning ui-alert-icon-warning\">\n\t\t\t\t<span class=\"ui-alert-message\">${this.warningText}\n\t\t\t\t<div class=\"calendar-sync-button\">${connectOtherButton}</div>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetWarningButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-success ui-btn-sm\">\n\t\t\t\t${this.warningButtonText}\n\t\t\t</button>\n\t\t`\n\t}\n\n\tsetProvider(provider)\n\t{\n\t\tthis.provider = provider;\n\t}\n\n\t// TODO: move logic to provider\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.removeConnection', {\n\t\t\tdata: {\n\t\t\t\tconnectionId: id,\n\t\t\t\tremoveCalendars: 'Y', //by default\n\t\t\t}\n\t\t})\n\t\t.then(() => {\n\t\t\tBX.reload();\n\t\t});\n\t}\n\n\trunUpdateInfo()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setSectionStatus', {\n\t\t\tdata: {\n\t\t\t\tsectionStatus: this.sectionStatusObject,\n\t\t\t},\n\t\t})\n\t\t.then((response) => {\n\t\t\tthis.emit('reDrawCalendarGrid', {});\n\t\t});\n\t}\n\n\trefresh(connection)\n\t{\n\t\tthis.connection = connection;\n\t\tif (this.connection)\n\t\t{\n\t\t\tthis.statusBlock\n\t\t\t\t.setStatus(this.connection.getStatus())\n\t\t\t\t.setConnections([this.connection]);\n\t\t}\n\t\t\n\t\tDom.replace(document.getElementById('status-info-block'), this.statusBlock.getContent());\n\t}\n\n\thandleConnectButton()\n\t{\n\t}\n\n\tgetDisconnectButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-light-border calendar-sync__account-btn\">${Loc.getMessage('CAL_SYNC_DISCONNECT_BUTTON')}</button>\n\t\t`;\n\t}\n\n\tgetSyncStatusClassName()\n\t{\n\t\treturn this.provider.getStatus() === \"success\" ? '--complete' : '--error';\n\t}\n\t\n\tgetContentActiveBodySectionsHeader()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account-desc\">${Loc.getMessage('CAL_SYNC_SELECTED_LIST_TITLE')}</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodySectionsManager()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account-check-list\">\n\t\t\t\t${this.getContentActiveBodySections()}\n\t\t\t</div>\n\t\t`;\n\t\t\n\t}\n\n\tgetContentActiveBodySections()\n\t{\n\t\tconst sectionList = [];\n\t\tthis.sectionList.forEach(section => {\n\t\t\tsectionList.push(Tag.render`\n\t\t\t\t<label class=\"calendar-sync__account-check-list-label\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"calendar-sync__account-check-list-input\"\n\t\t\t\t\t\tvalue=\"${BX.util.htmlspecialchars(section['ID'])}\" \n\t\t\t\t\t\tonclick=\"${this.onClickCheckSection.bind(this)}\" ${section['ACTIVE'] === 'Y' ? 'checked' : ''}/>\n\t\t\t\t\t<span class=\"calendar-sync__account-check-list-text\">${BX.util.htmlspecialchars(section['NAME'])}</span>\n\t\t\t\t</label>\n\t\t\t`);\n\t\t});\n\n\t\treturn sectionList;\n\t}\n\n\tshowUpdateSectionListNotification()\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CAL_SYNC_CALENDAR_LIST_UPDATED')\n\t\t)\n\t}\n\n\thandleDisconnectButton(event)\n\t{\n\t\tif (Type.isElementNode(this.disconnectButton))\n\t\t{\n\t\t\tDom.addClass(this.disconnectButton, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t}\n\t\tevent.preventDefault();\n\t\t// this.provider.removeConnection();\n\t\tthis.sendRequestRemoveConnection(this.connection.getId());\n\t}\n\t\n\tdeactivateConnection(id)\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.deactivateConnection', {\n\t\t\tdata: {\n\t\t\t\tconnectionId: id,\n\t\t\t\tremoveCalendars: 'N', //by default\n\t\t\t}\n\t\t}).then(() => {\n\t\t\tthis.provider.closeSlider();\n\t\t\tthis.provider.setStatus(this.provider.STATUS_NOT_CONNECTED);\n\t\t\tthis.provider.getInterfaceUnit().refreshButton();\n\t\t\tthis.provider.getInterfaceUnit().setSyncStatus(this.provider.STATUS_NOT_CONNECTED);\n\t\t\t\n\t\t\tthis.emit('reDrawCalendarGrid', {});\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {InterfaceTemplate} from './interfacetemplate';\nimport {Dom, Loc, Tag} from \"main.core\";\nimport ConnectionControls from \"../controls/connectioncontrols\";\n\nexport class CaldavInterfaceTemplate extends InterfaceTemplate\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\tconst formObject = new ConnectionControls();\n\t\tconst formBlock = formObject.getWrapper();\n\t\tconst form = formObject.getForm();\n\t\tconst button = formObject.getAddButton();\n\t\tconst buttonWrapper = formObject.getButtonWrapper();\n\t\tconst bodyHeader = this.getContentInfoBodyHeader();\n\n\t\tbutton.addEventListener('click', (event) => {\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tclick_to_connection_button: 'Y',\n\t\t\t\t\tconnection_type: this.provider.getType(),\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tDom.addClass(button, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t\tevent.preventDefault();\n\t\t\tthis.sendRequestAddConnection(form);\n\t\t});\n\n\t\tDom.append(button, buttonWrapper);\n\t\tDom.append(buttonWrapper, form);\n\t\tDom.append(form, formBlock);\n\n\t\treturn Tag.render`\n\t\t\t${bodyHeader}\n\t\t\t${formBlock}\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\tconst formObject = new ConnectionControls({\n\t\t\tserver: this.connection.addParams.server,\n\t\t\tuserName: this.connection.addParams.userName,\n\t\t\tconnectionName: this.connection.connectionName,\n\t\t});\n\t\tconst formBlock = formObject.getWrapper();\n\t\tconst form = formObject.getForm();\n\t\tconst bodyHeader = this.getContentActiveBodyHeader();\n\t\tDom.append(form, formBlock);\n\n\t\treturn Tag.render`\n\t\t\t${bodyHeader}\n\t\t\t${formBlock}\n\t\t`;\n\t}\n\n\tsendRequestAddConnection(form)\n\t{\n\t\tconst fd = new FormData(form);\n\t\tBX.ajax.runAction('calendar.api.syncajax.addConnection', {\n\t\t\tdata: {\n\t\t\t\tname: fd.get('name'),\n\t\t\t\tserver: fd.get('server'),\n\t\t\t\tuserName: fd.get('user_name'),\n\t\t\t\tpass: fd.get('password'),\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tBX.reload();\n\t\t}, response => {\n\t\t\tconst button = form.querySelector('#connect-button');\n\t\t\tthis.showAlertPopup(response.errors[0], button);\n\t\t});\n\t}\n\n\tshowAlertPopup(alert, button)\n\t{\n\t\tlet message = '';\n\t\tif (alert.code === 'incorrect_parameters')\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_INCORRECT_PARAMETERS');\n\t\t}\n\t\telse if (alert.code === 'tech_problem')\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_TECH_PROBLEM');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_DEFAULT');\n\t\t}\n\n\t\tconst messageBox = new BX.UI.Dialogs.MessageBox({\n\t\t\tmessage: message,\n\t\t\ttitle: alert.message,\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tokCaption: Loc.getMessage('CAL_TEXT_BUTTON_RETURN_TO_SETTINGS'),\n\t\t\tminWidth: 358,\n\t\t\tmediumButtonSize: false,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndex: 3021,\n\t\t\t\theight: 166,\n\t\t\t\twidth: 358,\n\t\t\t\tclassName: 'calendar-alert-popup-connection'\n\t\t\t},\n\t\t\tonOk: () => {\n\t\t\t\tDom.removeClass(button, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t\tmessageBox.show();\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {CaldavInterfaceTemplate} from \"./caldavinterfacetemplate\";\n\nexport default class CaldavTemplate extends CaldavInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_CALDAV\"),\n\t\t\thelpDeskCode: '5697365',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_CALDAV_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_CALDAV_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_CALDAV_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_CALDAV_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-caldav',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/caldav.svg',\n\t\t\tcolor: '#1eae43',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport { Loc, Tag } from 'main.core';\nimport { InterfaceTemplate } from './interfacetemplate';\nimport { Util } from 'calendar.util';\n\nexport default class ExchangeTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_EXCHANGE\"),\n\t\t\thelpDeskCode: '9860971',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_EXCHANGE_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_EXCHANGE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_EXCHANGE_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_EXCHANGE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-office',\n\t\t\ticonLogoClass: '--exchange',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/exchange.svg',\n\t\t\tcolor: '#54d0df',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t${this.getContentBody()}\n\t\t\t${this.getHelpdeskBlock()}\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account ${this.getSyncStatusClassName()}\">\n\t\t\t\t<div class=\"calendar-sync__account-logo\">\n\t\t\t\t\t<div class=\"calendar-sync__account-logo--image ${this.getLogoIconClass()}\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__account-content\">\n\t\t\t\t\t${BX.util.htmlspecialchars(this.connection.getConnectionName())}\n\t\t\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t\t\t${syncTime}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tgetContentBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account-desc\">\n\t\t\t\t${Loc.getMessage('CAL_EXCHANGE_SELECTED_DESCRIPTION')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHelpdeskBlock()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div>\n\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\t}\n}","// @flow\n'use strict';\n\nimport { Dom, Loc, Tag, Cache, Event, Text, Type} from 'main.core';\nimport {Util} from 'calendar.util';\nimport { Entry } from 'calendar.entry';\nimport {EventEmitter} from 'main.core.events';\n\nexport default class SyncWizard extends EventEmitter\n{\n\tTYPE = 'undefined';\n\tSLIDER_NAME = 'calendar:sync-wizard-slider';\n\tSLIDER_WIDTH = 450;\n\tLOADER_NAME = \"calendar:loader\";\n\tcache = new Cache.MemoryCache();\n\tsyncStagesList = [];\n\taccountName = '';\n\tHELPDESK_CODE = 11828176;\n\tMIN_UPDATE_STATE_DELAY = 1500; // in ms\n\tCONFETTI_DELAY = 1000;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.SyncWizard');\n\n\t\tthis.BX = window.top.BX || window.BX;\n\n\t\tthis.pullWizardEventHandler = this.handlePullNewEvent.bind(this);\n\t\tthis.lastUpdateStateTimestamp = Date.now();\n\t\tthis.logoIconClass = '';\n\t}\n\n\topenSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(this.SLIDER_NAME, {\n\t\t\tcontentCallback: slider => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(this.getContent());\n\t\t\t\t});\n\t\t\t},\n\t\t\tallowChangeHistory: false,\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tthis.displaySyncStages();\n\t\t\t\t\tthis.bindButtonsHandlers();\n\t\t\t\t},\n\t\t\t\tonDestroy: this.handleCloseWizard.bind(this)\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tloader: this.LOADER_NAME,\n\t\t});\n\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.syncIsFinished = false;\n\t\tthis.errorStatus = false;\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__wrapper calendar-sync__scope\">\n\t\t\t\t<div class=\"calendar-sync__content --border-radius\">\n\t\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t\t${this.getTitleWrapper()}\n\t\t\t\t\t\t${this.getSyncStagesWrapper()}\n\t\t\t\t\t\t${this.getInfoStatusWrapper()}\n\t\t\t\t\t\t${this.getErrorWrapper()}\n\t\t\t\t\t\t${this.getFinalCheckWrapper()}\n\t\t\t\t\t\t${this.getHelpLinkWrapper()}\n\t\t\t\t\t\t${this.getButtonWrapper()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetTitleWrapper()\n\t{\n\t\tthis.syncTitleWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__account\">\n\t\t\t\t<div class=\"calendar-sync__account-logo\">\n\t\t\t\t\t<div class=\"calendar-sync__account-logo--image ${this.getLogoIconClass()}\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__account-content\">\n\t\t\t\t\t${this.getAccountNameNode()}\n\t\t\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t\t\t${this.getActiveStatusNode()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.syncTitleWrapper;\n\t}\n\n\tgetSyncStagesWrapper()\n\t{\n\t\tthis.syncStagesWrapper = Tag.render`<div class=\"calendar-sync-stages-wrap\"></div>`;\n\t\treturn this.syncStagesWrapper;\n\t}\n\n\tgetInfoStatusWrapper()\n\t{\n\t\tthis.infoStatusWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom-xl\" style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__notification\">\n\t\t\t\t\t<div class=\"calendar-sync__notification-title\">${Loc.getMessage('CAL_INFO_STATUS_CONG_1')}</div>\n\t\t\t\t\t<div class=\"calendar-sync__notification-message\">${Loc.getMessage('CAL_INFO_STATUS_CONG_2')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.infoStatusWrapper;\n\t}\n\n\tgetErrorWrapper()\n\t{\n\t\tthis.errorWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom-xl\" style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__error\">\n\t\t\t\t\t<div class=\"calendar-sync__notification-message\">\n\t\t\t\t\t\t<div class=\"calendar-sync__notification-message-inner\">\n\t\t\t\t\t\t\t${Loc.getMessage('CAL_ERROR_WARN_1')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${Loc.getMessage('CAL_ERROR_WARN_2')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.errorWrapper;\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\tthis.helpLinkWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block\" style=\"display: none;\"></div>\n\t\t`;\n\t\treturn this.helpLinkWrapper;\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block\" style=\"display: none;\"></div>\n\t\t`;\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tgetButtonWrapper()\n\t{\n\t\tthis.buttonWrapper = Tag.render`\n\t\t\t<div style=\"display: none\" class=\"calendar-sync__content-block --align-center\">\n\t\t\t\t<a class=\"ui-btn ui-btn-lg ui-btn-primary ui-btn-round\" data-role=\"continue_btn\">\n\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_CONTINUE')}\n\t\t\t\t</a>\n\t\t\t\t<a style=\"display: none\" class=\"ui-btn ui-btn-lg ui-btn-light-border ui-btn-round\" data-role=\"everything_is_fine_btn\">\n\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_EVERYTHING_IS_FINE')}\n\t\t\t\t</a>\n\t\t\t\t<a style=\"display: none\" class=\"ui-btn ui-btn-lg ui-btn-light-border ui-btn-round\" data-role=\"close_button\">\n\t\t\t\t\t${Loc.getMessage('CAL_ERROR_CLOSE')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.buttonWrapper;\n\t}\n\n\tgetNewEventCardWrapper()\n\t{\n\t\tthis.newEventCardWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom\" style=\"display: none;\"></div>\n\t\t`;\n\t\treturn this.newEventCardWrapper;\n\t}\n\n\tgetSkeletonWrapper()\n\t{\n\t\tthis.skeletonWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --skeleton\">\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-box\">\n\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-inline-box\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-circle\"></div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-line\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-line\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text\">${this.getSkeletonTitle()}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t`;\n\t\treturn this.skeletonWrapper;\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn '';\n\t}\n\n\tgetExtraInfoWithCheckIcon()\n\t{\n\t\tconst alreadyConnected = Object.values(this.connectionsProviders).filter(item => {\n\t\t\treturn item.mainPanel && item.status;\n\t\t}).length > 0;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__content-text --icon-check${(alreadyConnected ? ' --disabled' : '')}\">\n\t\t\t\t${Loc.getMessage('CAL_SYNC_INFO_PROMO')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetAccountNameNode()\n\t{\n\t\tif (!Type.isElementNode(this.accountNameNode))\n\t\t{\n\t\t\tthis.accountNameNode = Tag.render`\n\t\t\t<div class=\"calendar-sync__account-title\">${this.getAccountName()}</div>\n\t\t`;\n\t\t}\n\t\treturn this.accountNameNode;\n\t}\n\n\tsetAccountName(value)\n\t{\n\t\tthis.accountName = value;\n\t}\n\n\tgetAccountName()\n\t{\n\t\treturn this.accountName;\n\t}\n\n\tgetActiveStatusNode()\n\t{\n\t\tif (!Type.isElementNode(this.activeStatusNode))\n\t\t{\n\t\t\tthis.activeStatusNode = Tag.render`\n\t\t\t\t<span>${Loc.getMessage('CAL_STATUS_SYNC_IN_PROGRESS').toUpperCase()}</span>\n\t\t\t`;\n\t\t}\n\t\treturn this.activeStatusNode;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [];\n\t}\n\n\tgetSyncStages()\n\t{\n\t\treturn this.syncStagesList;\n\t}\n\n\tgetHelpDeskCode()\n\t{\n\t\treturn this.HELPDESK_CODE;\n\t}\n\n\tdisplaySyncStages()\n\t{\n\t\tDom.clean(this.syncStagesWrapper);\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tstage.renderTo(this.syncStagesWrapper);\n\t\t});\n\t}\n\n\tbindButtonsHandlers()\n\t{\n\t\tconst continueButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"continue_btn\"]');\n\t\tif (Type.isElementNode(continueButton))\n\t\t{\n\t\t\tEvent.bind(continueButton, 'click', this.handleContinueButtonClick.bind(this));\n\t\t}\n\n\t\tconst eifButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"everything_is_fine_btn\"]');\n\t\tif (Type.isElementNode(eifButton))\n\t\t{\n\t\t\tEvent.bind(eifButton, 'click', this.handleFinalCloseButtonClick.bind(this));\n\t\t}\n\t}\n\n\thandleContinueButtonClick()\n\t{\n\t\tthis.showFinalStage();\n\t}\n\n\tshowFinalStage()\n\t{\n\t\tthis.syncIsFinished = true;\n\n\t\tconst eifButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"everything_is_fine_btn\"]');\n\t\tif (Type.isElementNode(eifButton))\n\t\t{\n\t\t\teifButton.style.display = '';\n\t\t}\n\n\t\tconst continueButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"continue_btn\"]');\n\t\tif (Type.isElementNode(continueButton))\n\t\t{\n\t\t\tcontinueButton.style.display = 'none';\n\t\t}\n\n\t\tthis.showFinalCheckWrapper();\n\t\tthis.showHelpLinkWrapper();\n\t\tthis.hideSyncStagesWrapper();\n\t\tthis.hideInfoStatusWrapper();\n\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'onPullEvent-calendar',\n\t\t\tthis.pullWizardEventHandler\n\t\t);\n\n\t\tthis.emit('startWizardWaitingMode');\n\t}\n\n\tisSyncFinished()\n\t{\n\t\treturn this.syncIsFinished;\n\t}\n\n\thandleFinalCloseButtonClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:sync-slider', 'calendar:section-slider', this.SLIDER_NAME].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\t\t\n\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\tanalyticsLabel: {\n\t\t\t\tcalendarAction: 'complete_wizard_close',\n\t\t\t\tconnection_type: this.TYPE\n\t\t\t}\n\t\t});\n\t}\n\n\thandleUpdateState(stateData)\n\t{\n\t\tconst currentTimestamp = Date.now();\n\t\tif (currentTimestamp - this.lastUpdateStateTimestamp > this.MIN_UPDATE_STATE_DELAY)\n\t\t{\n\t\t\tthis.updateState(stateData);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.handleUpdateState(stateData);\n\t\t\t}, this.MIN_UPDATE_STATE_DELAY);\n\t\t}\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tif (this.errorStatus)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (stateData.stage === 'connection_created'\n\t\t\t&& stateData.accountName\n\t\t\t&& Type.isElementNode(this.accountNameNode)\n\t\t)\n\t\t{\n\t\t\tthis.setAccountName(stateData.accountName);\n\t\t\tthis.accountNameNode.innerHTML = Text.encode(stateData.accountName)\n\t\t}\n\n\t\tthis.lastUpdateStateTimestamp = Date.now();\n\t}\n\n\tsetActiveStatusFinished()\n\t{\n\t\tthis.syncIsFinished = true;\n\t\tif (Type.isElementNode(this.activeStatusNode))\n\t\t{\n\t\t\tthis.activeStatusNode.innerHTML = Text.encode(Loc.getMessage('CAL_STATUS_SYNC_SUCCESS').toUpperCase())\n\t\t\tDom.remove(this.syncTitleWrapper.querySelector('.calendar-sync__account-info--icon'));\n\t\t}\n\t}\n\n\tshowButtonWrapper()\n\t{\n\t\tif (Type.isElementNode(this.buttonWrapper))\n\t\t{\n\t\t\tthis.buttonWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideButtonWrapper()\n\t{\n\t\tif (Type.isElementNode(this.buttonWrapper))\n\t\t{\n\t\t\tthis.buttonWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowInfoStatusWrapper()\n\t{\n\t\tif (Type.isElementNode(this.infoStatusWrapper))\n\t\t{\n\t\t\tthis.infoStatusWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideInfoStatusWrapper()\n\t{\n\t\tif (Type.isElementNode(this.infoStatusWrapper))\n\t\t{\n\t\t\tthis.infoStatusWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowErrorWrapper()\n\t{\n\t\tif (Type.isElementNode(this.errorWrapper))\n\t\t{\n\t\t\tthis.errorWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideErrorWrapper()\n\t{\n\t\tif (Type.isElementNode(this.errorWrapper))\n\t\t{\n\t\t\tthis.errorWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowFinalCheckWrapper()\n\t{\n\t\tif (Type.isElementNode(this.finalCheckWrapper))\n\t\t{\n\t\t\tthis.finalCheckWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideFinalCheckWrapper()\n\t{\n\t\tif (Type.isElementNode(this.finalCheckWrapper))\n\t\t{\n\t\t\tthis.finalCheckWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowSyncStagesWrapper()\n\t{\n\t\tif (Type.isElementNode(this.syncStagesWrapper))\n\t\t{\n\t\t\tthis.syncStagesWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideSyncStagesWrapper()\n\t{\n\t\tif (Type.isElementNode(this.syncStagesWrapper))\n\t\t{\n\t\t\tthis.syncStagesWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowHelpLinkWrapper()\n\t{\n\t\tif (Type.isElementNode(this.helpLinkWrapper))\n\t\t{\n\t\t\tthis.helpLinkWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideHelpLinkWrapper()\n\t{\n\t\tif (Type.isElementNode(this.helpLinkWrapper))\n\t\t{\n\t\t\tthis.helpLinkWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\thandlePullNewEvent(event)\n\t{\n\t\tif (event && Type.isFunction(event.getData))\n\t\t{\n\t\t\tconst data = {\n\t\t\t\tcommand: event.getData()[0],\n\t\t\t\t...event.getData()[1]\n\t\t\t};\n\n\t\t\tif (\n\t\t\t\tdata.command === 'edit_event'\n\t\t\t\t&& data.newEvent\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (Type.isElementNode(this.finalCheckWrapper))\n\t\t\t\t{\n\t\t\t\t\tconst syncBalloon = this.finalCheckWrapper.querySelector('.calendar-sync__balloon');\n\t\t\t\t\tif (Type.isElementNode(syncBalloon) && Dom.hasClass(syncBalloon, '--progress'))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(syncBalloon, '--progress');\n\t\t\t\t\t\tDom.addClass(syncBalloon, '--done');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst entry = new Entry({ data: data.fields });\n\t\t\t\tthis.displayNewEvent(entry);\n\n\t\t\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t\t\t'onPullEvent-calendar',\n\t\t\t\t\tthis.pullWizardEventHandler\n\t\t\t\t);\n\n\t\t\t\tconst eifButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"everything_is_fine_btn\"]');\n\t\t\t\tif (Type.isElementNode(eifButton))\n\t\t\t\t{\n\t\t\t\t\teifButton.innerHTML = Text.encode(Loc.getMessage('CAL_BUTTON_KEEP_GOING'));\n\t\t\t\t\tDom.addClass(eifButton, 'ui-btn-primary');\n\t\t\t\t\tDom.removeClass(eifButton, 'ui-btn-light-border');\n\t\t\t\t}\n\n\t\t\t\tthis.emit('endWizardWaitingMode');\n\t\t\t}\n\t\t}\n\t}\n\n\tdisplayNewEvent(entry)\n\t{\n\t\t// Hide skeleton\n\t\tif (Type.isElementNode(this.skeletonWrapper))\n\t\t{\n\t\t\tDom.remove(this.skeletonWrapper);\n\t\t}\n\n\t\tif (Type.isElementNode(this.newEventCardWrapper))\n\t\t{\n\t\t\tthis.newEventCardWrapper.style.display = '';\n\t\t\tDom.clean(this.newEventCardWrapper);\n\t\t\tthis.newEventCardWrapper.appendChild(this.getNewEventCard(entry));\n\t\t}\n\t}\n\n\tgetNewEventCard(entry)\n\t{\n\t\tconst from = new Date(entry.from.getTime() - (parseInt(entry.data['~USER_OFFSET_FROM']) || 0) * 1000);\n\t\tconst to = new Date(entry.to.getTime() - (parseInt(entry.data['~USER_OFFSET_TO']) || 0) * 1000);\n\t\tconst fromTimestamp = from.getTime();\n\t\tconst dateFrom = BX.date.format(Util.getDayMonthFormat(), fromTimestamp / 1000);\n\t\tconst timeFrom = Util.formatTime(from.getHours(), from.getMinutes());\n\t\tconst timeTo = Util.formatTime(to.getHours(), to.getMinutes());\n\t\tconst timeField = entry.isFullDay()\n\t\t\t\t? Loc.getMessage('CAL_WIZARD_FULL_DAY')\n\t\t\t\t: timeFrom + ' - ' + timeTo;\n\n\t\tthis.newEventCard = Tag.render`\n\t\t\t<div class=\"calendar-sync__balloon --calendar ${entry.isFullDay() ? '--fullday-event' : ''}\">\n\t\t\t\t<div class=\"calendar-sync__content-text\">\n\t\t\t\t\t${dateFrom}\n\t\t\t\t\t<span class=\"calendar-date-year\">\n\t\t\t\t\t\t${BX.date.format('Y', fromTimestamp / 1000)}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__content-text\">${BX.date.format('l', fromTimestamp / 1000)}</div>\n\t\t\t\t<div class=\"calendar-sync__time-box\">\n\t\t\t\t\t<div class=\"calendar-sync__time\">\n\t\t\t\t\t\t<div class=\"calendar-sync__time-date\">${timeFrom}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__time-line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync__time-notification-box\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text\">${Text.encode(entry.getName())}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text\">${timeField}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync__time\">\n\t\t\t\t\t\t<div class=\"calendar-sync__time-date\">${timeTo}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__time-line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.newEventCard;\n\t}\n\n\thandleCloseWizard()\n\t{\n\t\tthis.slider = null;\n\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'onPullEvent-calendar',\n\t\t\tthis.pullWizardEventHandler\n\t\t);\n\n\t\tthis.emit('onClose');\n\t}\n\n\tshowConfetti()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tconst bx = Util.getBX();\n\t\t\tbx.UI.Confetti.fire({\n\t\t\t\tparticleCount: 240,\n\t\t\t\tspread: 170,\n\t\t\t\torigin: { y: 0.3, x: 0.9 },\n\t\t\t\tzIndex: (bx.SidePanel.Instance.getTopSlider().getZindex() + 1)\n\t\t\t});\n\t\t}, this.CONFETTI_DELAY);\n\t}\n\n\tgetLogoIconClass()\n\t{\n\t\treturn this.logoIconClass;\n\t}\n\n\tgetSlider()\n\t{\n\t\treturn this.slider;\n\t}\n\n\tsetErrorState()\n\t{\n\t\tthis.errorStatus = true;\n\t\tthis.showErrorWrapper();\n\t\tthis.hideInfoStatusWrapper();\n\t\tthis.hideSyncStagesWrapper();\n\t\tthis.showButtonWrapper();\n\t\tDom.addClass(this.syncTitleWrapper, '--error');\n\t\tif (Type.isElementNode(this.activeStatusNode))\n\t\t{\n\t\t\tthis.activeStatusNode.innerHTML = Text.encode(Loc.getMessage('CAL_STATUS_SYNC_ERROR').toUpperCase())\n\t\t}\n\n\t\tconst closeButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"close_button\"]');\n\t\tif (Type.isElementNode(closeButton))\n\t\t{\n\t\t\tcloseButton.style.display = '';\n\t\t\tEvent.bind(closeButton, 'click', () => {\n\t\t\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t\t\t{\n\t\t\t\t\tif (['calendar:sync-slider', 'calendar:section-slider', this.SLIDER_NAME].includes(slider.getUrl()))\n\t\t\t\t\t{\n\t\t\t\t\t\tslider.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tBX.reload();\n\t\t\t});\n\t\t}\n\n\t\tconst continueButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"continue_btn\"]');\n\t\tif (Type.isElementNode(continueButton))\n\t\t{\n\t\t\tcontinueButton.style.display = 'none';\n\t\t}\n\t}\n}\n","// @flow\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport { Dom, Loc, Tag, Type, Event} from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport default class SyncStageUnit\n{\n\tconstructor(options)\n\t{\n\t\tthis.name = options.name || '';\n\t\tthis.title = options.title || '';\n\t\tthis.doneStatus = false;\n\t}\n\n\trenderTo(outerWrapper)\n\t{\n\t\tif (Type.isElementNode(outerWrapper))\n\t\t{\n\t\t\touterWrapper.appendChild(this.getContent());\n\t\t}\n\t\t\n\t\tEventEmitter.emit('BX.Calendar.Sync.Interface.SyncStageUnit:onRenderDone');\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.contentNode = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom-xl\">\n\t\t\t\t<div class=\"calendar-sync__content-text --icon-check --disabled\">${this.title}</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.contentNode;\n\t}\n\n\tsetDone()\n\t{\n\t\tthis.doneStatus = true;\n\t\tDom.removeClass(this.contentNode.querySelector('.--icon-check'), '--disabled');\n\t}\n\n\tsetUndone()\n\t{\n\t\tthis.doneStatus = false;\n\t\tDom.addClass(this.contentNode.querySelector('.--icon-check'), '--disabled');\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Tag, Event } from 'main.core';\nimport SyncWizard from './syncwizard';\nimport SyncStageUnit from './syncstageunit';\nimport { Util } from 'calendar.util';\n\n\nexport default class GoogleSyncWizard extends SyncWizard\n{\n\tTYPE = 'google';\n\tSLIDER_NAME = 'calendar:sync-wizard-google';\n\tSTAGE_1_CODE = 'google-to-b24';\n\tSTAGE_2_CODE = 'b24-to-google';\n\tSTAGE_3_CODE = 'b24-events-to-google';\n\tGOOGLE_ON_MOBILE_HELPDESK = 15456338;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.GoogleSyncWizard');\n\t\tthis.setAccountName(Loc.getMessage('CALENDAR_TITLE_GOOGLE'));\n\t\tthis.setSyncStages();\n\t\tthis.logoIconClass = '--google';\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\tlet link;\n\t\tthis.helpLinkWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --align-center --space-bottom\" style=\"display: none;\">\n\t\t\t\t${link = Tag.render`<a href=\"#\" class=\"calendar-sync__content-link\">\n\t\t\t\t\t${Loc.getMessage('CAL_SYNC_NO_GOOGLE_ON_PHONE')}\n\t\t\t\t</a>`}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(link, 'click', () => {\n\t\t\tconst helper = Util.getBX().Helper;\n\t\t\tif(helper)\n\t\t\t{\n\t\t\t\thelper.show(\"redirect=detail&code=\" + this.GOOGLE_ON_MOBILE_HELPDESK);\n\t\t\t}\n\t\t});\n\n\t\treturn this.helpLinkWrapper;\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --progress\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-progress\">${Loc.getMessage('CAL_SYNC_LETS_CHECK')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-progress\">${Loc.getMessage('CAL_SYNC_CREATE_EVENT_GOOGLE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_ADDED_GOOGLE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_YOULL_SEE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon--icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getSkeletonWrapper()}\n\t\t\t\t${this.getNewEventCardWrapper()}\n\t\t\t</div>\n\t\t`;\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_1_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_GOOGLE_1')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_2_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_GOOGLE_2')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_3_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_GOOGLE_3')\n\t\t\t})\n\t\t];\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tsuper.updateState(stateData);\n\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tif (\n\t\t\t\tstateData.stage === 'connection_created'\n\t\t\t\t&& stage.name === this.STAGE_1_CODE\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tstateData.stage === 'import_finished'\n\t\t\t    && (stage.name === this.STAGE_1_CODE || stage.name === this.STAGE_2_CODE)\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === 'export_finished')\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t\tif (stage.name === this.STAGE_3_CODE)\n\t\t\t\t{\n\t\t\t\t\tthis.setActiveStatusFinished();\n\t\t\t\t\tthis.showButtonWrapper();\n\t\t\t\t\tthis.showInfoStatusWrapper();\n\t\t\t\t\tthis.showConfetti();\n\t\t\t\t\t\n\t\t\t\t\tthis.emit('onConnectionCreated');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn Loc.getMessage('CAL_SYNC_NEW_EVENT_GOOGLE_TITLE');\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Event, Runtime } from 'main.core';\nimport { InterfaceTemplate } from \"./interfacetemplate\";\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport { Util } from 'calendar.util';\nimport GoogleSyncWizard from \"../syncwizard/googlesyncwizard\"\n\nexport default class GoogleTemplate extends InterfaceTemplate\n{\n\tHANDLE_CONNECTION_DELAY = 500;\n\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_GOOGLE\"),\n\t\t\thelpDeskCode: '6030429',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_GOOGLE_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_GOOGLE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_GOOGLE_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_GOOGLE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-google',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/google.svg',\n\t\t\ticonLogoClass: '--google',\n\t\t\tcolor: '#387ced',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\n\t\tthis.sectionStatusObject = {};\n\t\tthis.sectionList = [];\n\n\t\tthis.handleSuccessConnectionDebounce = Runtime.debounce(this.handleSuccessConnection, this.HANDLE_CONNECTION_DELAY, this);\n\t}\n\n\tcreateConnection()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\tanalyticsLabel: {\n\t\t\t\tcalendarAction: 'createConnection',\n\t\t\t\tclick_to_connection_button: 'Y',\n\t\t\t\tconnection_type: 'google',\n\t\t\t}\n\t\t});\n\n\t\tBX.util.popup(this.provider.getSyncLink(), 500, 600);\n\n\t\tEvent.bind(window, 'hashchange', this.handleSuccessConnectionDebounce);\n\t\tEvent.bind(window, 'message', this.handleSuccessConnectionDebounce);\n\t}\n\n\thandleSuccessConnection(event)\n\t{\n\t\tif (\n\t\t\t(window.location.hash === '#googleAuthSuccess')\n\t\t\t|| (event.data.title === 'googleAuthSuccess')\n\t\t)\n\t\t{\n\t\t\tUtil.removeHash();\n\t\t\tthis.provider.setWizardSyncMode(true);\n\n\t\t\tthis.provider.saveConnection();\n\t\t\tthis.openSyncWizard();\n\t\t\tthis.provider.setStatus(this.provider.STATUS_SYNCHRONIZING);\n\t\t\tthis.provider.getInterfaceUnit().refreshButton();\n\t\t}\n\t}\n\n\tgetSectionsForGoogle()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAllSectionsForGoogle', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: this.connection.addParams.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.sectionList = response.data;\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tresolve(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t\t})\n\t}\n\n\tonClickCheckSection(event)\n\t{\n\t\tthis.sectionStatusObject[event.target.value] = event.target.checked;\n\t\tthis.runUpdateInfo();\n\t\tthis.showUpdateSectionListNotification();\n\t}\n\n\tshowAlertPopup()\n\t{\n\t\tconst messageBox = new MessageBox({\n\t\t\tclassName: this.id,\n\t\t\tmessage: Loc.getMessage('GOOGLE_IS_NOT_CALDAV_SETTINGS_WARNING_MESSAGE'),\n\t\t\twidth: 500,\n\t\t\toffsetLeft: 60,\n\t\t\toffsetTop: 5,\n\t\t\tpadding: 7,\n\t\t\tonOk: () => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t\tokCaption: 'OK',\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndexAbsolute: 4020,\n\t\t\t\tautoHide: true,\n\t\t\t},\n\t\t});\n\t\tmessageBox.show();\n\t}\n\n\thandleConnectButton()\n\t{\n\t\tif (this.provider.hasSetSyncGoogleSettings())\n\t\t{\n\t\t\tthis.createConnection();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showAlertPopup();\n\t\t}\n\t}\n\n\topenSyncWizard()\n\t{\n\t\tif (!this.wizard)\n\t\t{\n\t\t\tthis.wizard = new GoogleSyncWizard();\n\t\t\tthis.wizard.openSlider();\n\t\t\tthis.provider.setActiveWizard(this.wizard);\n\t\t}\n\t}\n\t\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tthis.deactivateConnection(id);\n\t}\n}\n","// @flow\n'use strict';\nimport { Tag, Loc, Dom, Event } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { Popup } from 'main.popup';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nexport default class IcloudAuthDialog extends EventEmitter\n{\n\tzIndex = 3100;\n\tDOM = {};\n\tappPasswordTemplate = 'xxxx-xxxx-xxxx-xxxx';\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.type = options.type;\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Icloud');\n\t\tthis.keyHandler = this.handleKeyPress.bind(this);\n\t\tthis.checkOutsideClickClose = this.checkOutsideClickClose.bind(this);\n\t\tthis.outsideMouseDownClose = this.outsideMouseDownClose.bind(this);\n\t\tthis.initAlertBlock();\n\t}\n\n\tshow()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: 'calendar-sync__auth-popup calendar-sync__scope',\n\t\t\ttitleBar: Loc.getMessage('CAL_ICLOUD_AUTH_TITLE'),\n\t\t\tdraggable: true,\n\t\t\tcontent: this.getContainer(),\n\t\t\twidth: 475,\n\t\t\tanimation: 'fading-slide',\n\t\t\tzIndexAbsolute: this.zIndex,\n\t\t\tcacheable: false,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t\tcontentBackground: \"#fff\",\n\t\t\toverlay: {opacity: 15},\n\t\t\tlightShadow: true,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('CAL_ICLOUD_CONNECT_BUTTON'),\n\t\t\t\t\tclassName: `ui-btn ui-btn-md ui-btn-success ui-btn-round`,\n\t\t\t\t\tevents : {click : this.authorize.bind(this)},\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-light-border ui-btn-round',\n\t\t\t\t\tevents : {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonPopupClose: this.close.bind(this)\n\t\t\t},\n\t\t});\n\t\tthis.popup.show();\n\t\t\n\t\tEvent.bind(document, 'keydown', this.keyHandler);\n\t\tEvent.bind(document, 'mouseup', this.checkOutsideClickClose);\n\t\tEvent.bind(document, 'mousedown', this.outsideMouseDownClose);\n\t}\n\t\n\tauthorize()\n\t{\n\t\tif (this.isFormDataValid())\n\t\t{\n\t\t\tconst saveBtn = this.popup.getButtons()[0];\n\t\t\tsaveBtn.setClocking(true);\n\t\t\tsaveBtn.setDisabled(true);\n\t\t\tconst cancelButton = this.popup.getButtons()[1];\n\t\t\tcancelButton.setDisabled(true);\n\t\t\tif (this.DOM.container.contains(this.DOM.alertBlock))\n\t\t\t{\n\t\t\t\tDom.remove(this.DOM.alertBlock);\n\t\t\t}\n\n\t\t\tthis.emit('onSubmit', new BaseEvent({\n\t\t\t\tdata: {\n\t\t\t\t\tappleId: this.DOM.appleIdInput.value.toString().trim(),\n\t\t\t\t\tappPassword: this.DOM.appPasswordInput.value.toString().trim()\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.highlightInvalidFormData();\n\t\t}\n\t}\n\n\tisFormDataValid()\n\t{\n\t\treturn this.DOM.appleIdInput.value.toString().trim() !== ''\n\t\t\t&& this.DOM.appPasswordInput.value.toString().trim() !== ''\n\t}\n\n\thighlightInvalidFormData()\n\t{\n\t\tconst saveBtn = this.popup.getButtons()[0];\n\t\tsaveBtn.setClocking(false);\n\t\tsaveBtn.setDisabled(false);\n\t\tconst cancelButton = this.popup.getButtons()[1];\n\t\tcancelButton.setDisabled(false);\n\n\t\tif (this.DOM.appleIdInput.value.toString().trim() === '')\n\t\t{\n\t\t\tthis.highlightInvalidAppleIdInput();\n\t\t}\n\t\tif (this.DOM.appPasswordInput.value.toString().trim() === '')\n\t\t{\n\t\t\tthis.highlightInvalidPasswordInput();\n\t\t}\n\t}\n\n\thighlightInvalidAppleIdInput()\n\t{\n\t\tDom.addClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\n\t\tconst clearInvalidation = () => {\n\t\t\tDom.removeClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t\tEvent.unbind(this.DOM.appleIdInput, 'change', clearInvalidation);\n\t\t\tEvent.unbind(this.DOM.appleIdInput, 'keyup', clearInvalidation);\n\t\t};\n\t\tEvent.bind(this.DOM.appleIdInput, 'change', clearInvalidation);\n\t\tEvent.bind(this.DOM.appleIdInput, 'keyup', clearInvalidation);\n\t}\n\n\thighlightInvalidPasswordInput()\n\t{\n\t\tDom.addClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\n\t\tconst clearInvalidation = () => {\n\t\t\tDom.removeClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t\tEvent.unbind(this.DOM.appPasswordInput, 'change', clearInvalidation);\n\t\t\tEvent.unbind(this.DOM.appPasswordInput, 'keyup', clearInvalidation);\n\t\t};\n\t\tEvent.bind(this.DOM.appPasswordInput, 'change', clearInvalidation);\n\t\tEvent.bind(this.DOM.appPasswordInput, 'keyup', clearInvalidation);\n\t\tthis.DOM.appPasswordInput.focus();\n\n\t}\n\t\n\tenableSaveButton()\n\t{\n\t\tconst saveBtn = this.popup.getButtons()[0];\n\t\tsaveBtn.setDisabled(false);\n\t\tconst cancelButton = this.popup.getButtons()[1];\n\t\tcancelButton.setDisabled(false);\n\t}\n\n\tgetContainer()\n\t{\n\t\tthis.DOM.container = Tag.render `\n\t\t\t<div>\n\t\t\t\t${this.getAppleInfoBlock()}\n\t\t\t\t<div class=\"calendar-sync__auth-popup--row\" id=\"calendar-apple-id-block\">\n\t\t\t\t\t${this.getAppleIdTitle()}\n\t\t\t\t\t${this.getAppleIdInput()}\n\t\t\t\t\t${this.getAppleIdError()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__auth-popup--row\" id=\"calendar-apple-pass-block\">\n\t\t\t\t\t<div class=\"calendar-sync__auth-popup--label-block\">\n\t\t\t\t\t\t${this.getAppPasswordTitle()}\n\t\t\t\t\t\t${this.getLearnMoreButton()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-after-icon\">\n\t\t\t\t\t\t${this.getAppPasswordInput()}\n\t\t\t\t\t\t${this.getShowHidePasswordIcon()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getAppPasswordError()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.DOM.container;\n\t}\n\n\tgetAppleInfoBlock()\n\t{\n\t\tif (!this.DOM.appleInfo)\n\t\t{\n\t\t\tthis.DOM.appleInfo = Tag.render`\n\t\t\t\t<div class=\"calendar-sync__auth-popup--info\">\n\t\t\t\t\t<div class=\"calendar-sync__auth-popup--logo-image --icloud\"></div>\n\t\t\t\t\t<div class=\"calendar-sync__auth-popup--logo-text\">${Loc.getMessage('CAL_ICLOUD_INFO_BLOCK')}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.DOM.appleInfo;\n\t}\n\t\n\tgetAppleIdTitle()\n\t{\n\t\tif (!this.DOM.appleIdTitle)\n\t\t{\n\t\t\tthis.DOM.appleIdTitle = Tag.render`\n\t\t\t<p class=\"calendar-sync__auth-popup--label-text\">\n\t\t\t\t${Loc.getMessage('CAL_ICLOUD_APPLE_ID_PLACEHOLDER')}\n\t\t\t</p>\n\t\t\t`;\n\t\t}\n\t\t\n\t\treturn this.DOM.appleIdTitle;\n\t}\n\t\n\tgetAppPasswordTitle()\n\t{\n\t\tif (!this.DOM.appPasswordTitle)\n\t\t{\n\t\t\tthis.DOM.appPasswordTitle = Tag.render`\n\t\t\t\t<p class=\"calendar-sync__auth-popup--label-text\">\n\t\t\t\t\t${Loc.getMessage('CAL_ICLOUD_PASS_PLACEHOLDER')}\n\t\t\t\t</p>\n\t\t\t`;\n\t\t}\n\t\t\n\t\treturn this.DOM.appPasswordTitle;\n\t}\n\t\n\tgetAppleIdError()\n\t{\n\t\tif (!this.DOM.appleIdError)\n\t\t{\n\t\t\tthis.DOM.appleIdError = Tag.render`\n\t\t\t\t<div class=\"calendar-sync__auth-popup--label-text --error\">\n\t\t\t\t\t${Loc.getMessage('CAL_ICLOUD_APPLE_ID_ERROR')}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\t\n\t\treturn this.DOM.appleIdError;\n\t}\n\t\n\tgetAppPasswordError()\n\t{\n\t\tif (!this.DOM.appPasswordError)\n\t\t{\n\t\t\tthis.DOM.appPasswordError = Tag.render`\n\t\t\t\t<div class=\"calendar-sync__auth-popup--label-text --error\">\n\t\t\t\t\t${Loc.getMessage(\n\t\t\t\t\t\t'CAL_ICLOUD_APP_PASSWORD_ERROR',\n\t\t\t\t\t{\n\t\t\t\t\t\t\t'#LINK_START#': '<a href=\"#\" data-role=\"open-helpdesk-password\">',\n\t\t\t\t\t\t\t'#LINK_END#': '</a>',\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tconst link = this.DOM.appPasswordError.querySelector('a[data-role=\"open-helpdesk-password\"]');\n\t\t\tif (link)\n\t\t\t{\n\t\t\t\tEvent.bind(link, 'click', this.openHelpDesk.bind(this));\n\t\t\t}\n\t\t}\n\n\t\treturn this.DOM.appPasswordError;\n\t}\n\n\tgetAppleIdInput()\n\t{\n\t\tif (!this.DOM.appleIdInput)\n\t\t{\n\t\t\tthis.DOM.appleIdInput = Tag.render `\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"${Loc.getMessage('CAL_ICLOUD_AUTH_EMAIL_PLACEHOLDER')}\"\n\t\t\t\t\tclass=\"calendar-field-string ui-ctl-element\"\n\t\t\t\t/>\n\t\t\t`;\n\t\t\tthis.DOM.appleIdInput.onfocus = () => {\n\t\t\t\tif (Dom.hasClass(this.DOM.appleIdInput, 'calendar-field-string-error'))\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t\t\t\tDom.removeClass(this.DOM.appleIdError, 'show');\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.DOM.appleIdInput.onblur = () => {\n\t\t\t\tif (\n\t\t\t\t\t!this.validateAppleIdInput()\n\t\t\t\t\t&& !Dom.hasClass(this.DOM.appleIdInput, 'calendar-field-string-error')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t\t\t\tDom.addClass(this.DOM.appleIdError, 'show');\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\treturn this.DOM.appleIdInput;\n\t}\n\n\tgetAppPasswordInput()\n\t{\n\t\tif (!this.DOM.appPasswordInput)\n\t\t{\n\t\t\tthis.DOM.appPasswordInput = Tag.render `\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tplaceholder=\"${Loc.getMessage('CAL_ICLOUD_AUTH_APPPASS_PLACEHOLDER')}\"\n\t\t\t\t\tclass=\"calendar-field-string ui-ctl-element\"\n\t\t\t\t\trequired maxlength=\"19\"\n\t\t\t\t/>\n\t\t\t`;\n\t\t\tEvent.bind(this.DOM.appPasswordInput, 'input', this.validateAppPasswordInput.bind(this));\n\t\t}\n\n\t\treturn this.DOM.appPasswordInput;\n\t}\n\t\n\tgetShowHidePasswordIcon()\n\t{\n\t\tif (!this.DOM.showHidePasswordIcon)\n\t\t{\n\t\t\tthis.DOM.showHidePasswordIcon = Tag.render`\n\t\t\t\t<div class=\"ui-ctl-after calendar-sync__auth-popup--icon-adjust-password\"></div>\n\t\t\t`;\n\t\t\tEvent.bind(this.DOM.showHidePasswordIcon, 'click', this.switchPasswordVisibility.bind(this));\n\t\t}\n\t\t\n\t\treturn this.DOM.showHidePasswordIcon;\n\t}\n\t\n\tgetLearnMoreButton()\n\t{\n\t\tif (!this.DOM.learnMoreButton)\n\t\t{\n\t\t\tthis.DOM.learnMoreButton = Tag.render`\n\t\t\t\t<span class=\"calendar-sync__auth-popup--learn-more\">${Loc.getMessage('CAL_ICLOUD_AUTH_APPPASS_ABOUT')}</span>\n\t\t\t`;\n\t\t\tEvent.bind(this.DOM.learnMoreButton, 'click', this.openHelpDesk.bind(this));\n\t\t}\n\t\t\n\t\treturn this.DOM.learnMoreButton;\n\t}\n\n\tinitAlertBlock()\n\t{\n\t\tif (!this.DOM.alertBlock)\n\t\t{\n\t\t\tthis.DOM.alertBlock = Tag.render`\n\t\t\t\t<div class=\"ui-alert ui-alert-danger calendar-sync__auth-error\">\n\t                <span class=\"ui-alert-message\">${Loc.getMessage('CAL_ICLOUD_AUTH_ERROR')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t}\n\n\tshowErrorAuthorizationAlert()\n\t{\n\t\tthis.highlightInvalidAppleIdInput();\n\t\tthis.highlightInvalidPasswordInput();\n\t\tthis.enableSaveButton();\n\t\tif (!this.DOM.container.contains(this.DOM.alertBlock))\n\t\t{\n\t\t\tDom.append(this.DOM.alertBlock, this.DOM.container);\n\t\t}\n\t}\n\t\n\tvalidateAppleIdInput()\n\t{\n\t\tconst emailRegExp = /^[a-zA-Z\\d.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z\\d-]+(?:\\.[a-zA-Z\\d-]+)*$/;\n\t\tconst input = this.DOM.appleIdInput.value.toString().trim();\n\t\tif (input === '')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn emailRegExp.test(input);\n\t}\n\t\n\tvalidateAppPasswordInput()\n\t{\n\t\tconst appPasswordRegExp = /^[a-z]{4}-[a-z]{4}-[a-z]{4}-[a-z]{4}$/;\n\t\tconst input = this.completeWithTemplate(this.DOM.appPasswordInput.value.toString().trim());\n\t\tif (appPasswordRegExp.test(input))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t\tDom.removeClass(this.DOM.appPasswordError, 'show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t\tDom.addClass(this.DOM.appPasswordError, 'show');\n\t\t}\n\t}\n\t\n\tswitchPasswordVisibility()\n\t{\n\t\tif (Dom.hasClass(this.DOM.showHidePasswordIcon, '--hide'))\n\t\t{\n\t\t\tthis.DOM.appPasswordInput.type = 'password';\n\t\t\tDom.removeClass(this.DOM.showHidePasswordIcon, '--hide');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.appPasswordInput.type = 'text';\n\t\t\tDom.addClass(this.DOM.showHidePasswordIcon, '--hide');\n\t\t}\n\t}\n\t\n\tclearForm()\n\t{\n\t\tthis.DOM.appPasswordInput.value = '';\n\t\tthis.DOM.appleIdInput.value = '';\n\t\tif (Dom.hasClass(this.DOM.appleIdInput, 'calendar-field-string-error'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t}\n\t\tif (Dom.hasClass(this.DOM.appPasswordInput, 'calendar-field-string-error'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t}\n\t\tif (Dom.hasClass(this.DOM.appleIdError, 'show'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appleIdError, 'show');\n\t\t}\n\t\tif (Dom.hasClass(this.DOM.appPasswordError, 'show'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appPasswordError, 'show');\n\t\t}\n\t}\n\t\n\tcompleteWithTemplate(password)\n\t{\n\t\tconst addition = this.appPasswordTemplate.slice(password.length, this.appPasswordTemplate.length);\n\t\tpassword += addition;\n\t\treturn password;\n\t}\n\t\n\topenHelpDesk()\n\t{\n\t\tconst helpDeskCode = '15426356';\n\t\ttop.BX.Helper.show('redirect=detail&code=' + helpDeskCode);\n\t\t\n\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\tanalyticsLabel: {\n\t\t\t\tcalendarAction: 'openHelpDesk',\n\t\t\t\tclick_to_helpdesk_button: 'Y',\n\t\t\t\tconnection_type: 'icloud',\n\t\t\t}\n\t\t});\n\t}\n\t\n\thandleKeyPress(e)\n\t{\n\t\tif (e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.authorize();\n\t\t}\n\t\telse if (e.keyCode === Util.getKeyCode('escape'))\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t}\n\t\n\tcheckOutsideClickClose(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tthis.outsideMouseUp = !target.closest('div.popup-window');\n\t\tif (this.outsideMouseUp && this.outsideMouseDown && this.checkTopSlider())\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t}\n\t\n\toutsideMouseDownClose(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tthis.outsideMouseDown = !target.closest('div.popup-window');\n\t}\n\t\n\tclose()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\t\tEvent.unbind(document, 'keydown', this.keyHandler);\n\t\tEvent.unbind(document, 'mouseup', this.checkOutsideClickClose);\n\t\tEvent.unbind(document, 'mousedown', this.outsideMouseDownClose);\n\t\tthis.clearForm();\n\t}\n\t\n\tcheckTopSlider()\n\t{\n\t\treturn !Util.getBX().SidePanel.Instance.getTopSlider();\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Tag } from 'main.core';\nimport SyncWizard from './syncwizard';\nimport SyncStageUnit from './syncstageunit';\n\nexport default class IcloudSyncWizard extends SyncWizard\n{\n\tTYPE = 'icloud';\n\tSLIDER_NAME = 'calendar:sync-wizard-icloud';\n\tSTAGE_1_CODE = 'icloud-to-b24';\n\tSTAGE_2_CODE = 'b24-events-to-icloud';\n\tSTAGE_3_CODE = 'b24-to-icloud';\n\t\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.IcloudSyncWizard');\n\t\tthis.setAccountName(Loc.getMessage('CALENDAR_TITLE_ICLOUD'));\n\t\tthis.setSyncStages();\n\t\tthis.logoIconClass = '--icloud';\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\treturn '';\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --progress\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-progress\">${Loc.getMessage('CAL_SYNC_LETS_CHECK')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-progress\">${Loc.getMessage('CAL_SYNC_CREATE_EVENT_ICLOUD')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_ADDED_FROM_ICLOUD')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_YOULL_SEE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon--icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getSkeletonWrapper()}\n\t\t\t\t${this.getNewEventCardWrapper()}\n\t\t\t</div>\n\t\t`;\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_1_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_ICLOUD_1')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_2_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_ICLOUD_2')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_3_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_ICLOUD_3')\n\t\t\t})\n\t\t];\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tsuper.updateState(stateData);\n\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tif (\n\t\t\t\tstateData.stage === 'connection_created'\n\t\t\t\t&& stage.name === this.STAGE_1_CODE\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tstateData.stage === 'import_finished'\n\t\t\t    && (stage.name === this.STAGE_1_CODE || stage.name === this.STAGE_2_CODE)\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === 'export_finished')\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t\tif (stage.name === this.STAGE_3_CODE)\n\t\t\t\t{\n\t\t\t\t\tthis.setActiveStatusFinished();\n\t\t\t\t\tthis.showButtonWrapper();\n\t\t\t\t\tthis.showInfoStatusWrapper();\n\t\t\t\t\tthis.showConfetti();\n\n\t\t\t\t\tthis.emit('onConnectionCreated');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn Loc.getMessage('CAL_SYNC_NEW_EVENT_ICLOUD_TITLE');\n\t}\n}","// @flow\n'use strict';\nimport { Dom, Loc, Tag } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { Popup } from 'main.popup';\n\nexport default class WarnSyncIcloudDialog\n{\n\tzIndex = 3100;\n\tDOM = {};\n\t\n\tconstructor(options = {})\n\t{\n\t\tthis.authDialog = options.authDialog;\n\t}\n\t\n\tshow()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: 'calendar-sync__auth-popup calendar-sync__scope',\n\t\t\ttitleBar: Loc.getMessage('CAL_ICLOUD_ALERT_OTHER_APPLE_SYNC_TITLE'),\n\t\t\twidth: 500,\n\t\t\tdraggable: true,\n\t\t\tcontent: this.getContainer(),\n\t\t\tcacheable: false,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t\tcontentBackground: \"#fff\",\n\t\t\toverlay: { opacity: 15 },\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('CAL_ICLOUD_ALERT_OTHER_APPLE_SYNC_LEARN_MORE'),\n\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-primary',\n\t\t\t\t\tevents: { click: this.openHelpDesk.bind(this) }\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('CAL_BUTTON_CONTINUE'),\n\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-light',\n\t\t\t\t\tevents: { click: this.openAuthDialog.bind(this) }\n\t\t\t\t}),\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonPopupClose: this.close.bind(this)\n\t\t\t},\n\t\t});\n\t\t\n\t\tthis.popup.show();\n\t}\n\t\n\tgetContainer()\n\t{\n\t\tthis.DOM.container = Tag.render`\n\t\t\t<div>\n\t\t\t\t${this.getAlertInformation()}\n\t\t\t</div>\n\t\t`;\n\t\t\n\t\treturn this.DOM.container;\n\t}\n\t\n\tgetAlertInformation()\n\t{\n\t\tthis.DOM.alertBlock = new BX.UI.Alert({\n\t\t\ttext: Loc.getMessage('CAL_ICLOUD_ALERT_OTHER_APPLE_SYNC_INFO'),\n\t\t\tcolor: BX.UI.Alert.Color.WARNING,\n\t\t\ticon: BX.UI.Alert.Icon.INFO\n\t\t});\n\t\t\n\t\tconst container = this.DOM.alertBlock.getContainer();\n\t\tconst text = container.querySelector('.ui-alert-message');\n\t\tDom.addClass(text, 'calendar-sync__alert-popup--text')\n\t\t\n\t\treturn container;\n\t}\n\t\n\topenHelpDesk()\n\t{\n\t\tconst helpDeskCode = '16020988';\n\t\ttop.BX.Helper.show('redirect=detail&code=' + helpDeskCode);\n\t}\n\t\n\tdisableConnection()\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.disableIphoneOrMacConnection').then(() => {\n\t\t\tthis.authDialog.show();\n\t\t\tthis.close();\n\t\t\tUtil.setIphoneConnectionStatus(false);\n\t\t\tUtil.setMacConnectionStatus(false);\n\t\t})\n\t}\n\t\n\topenAuthDialog()\n\t{\n\t\tthis.authDialog.show();\n\t\tthis.close();\n\t}\n\t\n\tclose()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\nimport { Loc } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { InterfaceTemplate } from './interfacetemplate';\nimport IcloudAuthDialog from '../controls/icloudauthdialog';\nimport IcloudSyncWizard from '../syncwizard/icloudsyncwizard';\nimport { EventEmitter } from 'main.core.events';\nimport WarnSyncIcloudDialog from '../controls/warnsynciclouddialog';\n\nexport default class IcloudTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_ICLOUD\"),\n\t\t\thelpDeskCode: '6030429',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_ICLOUD_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_ICLOUD_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_ICLOUD_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-icloud',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/icloud.svg',\n\t\t\ticonLogoClass: '--icloud',\n\t\t\tcolor: '#95a0af',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\n\t\tthis.sectionStatusObject = {};\n\t\tthis.sectionList = [];\n\t}\n\n\tcreateConnection(data)\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.createIcloudConnection', {\n\t\t\tdata: {\n\t\t\t\tappleId: data.appleId,\n\t\t\t\tappPassword: data.appPassword,\n\t\t\t},\n\t\t}).then(\n\t\t\t(response) => {\n\t\t\t\tconst result = response.data;\n\t\t\t\t\n\t\t\t\tif (result.status === 'success' && result.connectionId)\n\t\t\t\t{\n\t\t\t\t\tthis.openSyncWizard(data.appleId);\n\t\t\t\t\tthis.syncCalendarsWithIcloud(result.connectionId);\n\t\t\t\t}\n\t\t\t},\n\t\t\t(response) => {\n\t\t\t\tconst result = response.data;\n\t\t\t\tif (result.status === 'incorrect_app_pass')\n\t\t\t\t{\n\t\t\t\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\t\tcalendarAction: 'createConnection',\n\t\t\t\t\t\t\twrong_app_pass: 'Y',\n\t\t\t\t\t\t\tconnection_type: 'icloud'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tthis.authDialog.showErrorAuthorizationAlert();\n\t\t\t}\n\t\t);\n\t}\n\n\tsyncCalendarsWithIcloud(connectionId)\n\t{\n\t\tthis.authDialog.close();\n\t\t\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.syncIcloudConnection', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: connectionId,\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_SUCCESS);\n\t\t\t\t\tif (connectionId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.provider.getConnection().setId(connectionId);\n\t\t\t\t\t\tthis.provider.getConnection().setStatus(true);\n\t\t\t\t\t\tthis.provider.getConnection().setConnected(true);\n\t\t\t\t\t\tthis.provider.getConnection().setSyncDate(new Date());\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_FAILED);\n\t\t\t\t\tthis.provider.setWizardState(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstatus: this.provider.ERROR_CODE,\n\t\t\t\t\t\t\tvendorName: this.provider.type,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tresolve(response.errors);\n\t\t\t\t});\n\t\t})\n\t}\n\n\tgetSectionsForIcloud()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAllSectionsForIcloud', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: this.connection.addParams.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.sectionList = response.data;\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tresolve(response.errors);\n\t\t\t\t}\n\t\t\t)\n\t\t})\n\t}\n\n\tonClickCheckSection(event)\n\t{\n\t\tthis.sectionStatusObject[event.target.value] = event.target.checked;\n\t\tthis.runUpdateInfo();\n\t\tthis.showUpdateSectionListNotification();\n\t}\n\n\thandleConnectButton()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\tanalyticsLabel: {\n\t\t\t\tcalendarAction: 'createConnection',\n\t\t\t\tclick_to_connection_button: 'Y',\n\t\t\t\tconnection_type: 'icloud',\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.initPopup();\n\t\tif (Util.isIphoneConnected() || Util.isMacConnected())\n\t\t{\n\t\t\tthis.alertSyncPopup.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.authDialog.show();\n\t\t}\n\t}\n\t\n\tinitPopup()\n\t{\n\t\tif (!this.authDialog)\n\t\t{\n\t\t\tthis.authDialog = new IcloudAuthDialog();\n\t\t\t\n\t\t\tEventEmitter.unsubscribeAll('BX.Calendar.Sync.Icloud:onSubmit');\n\t\t\tEventEmitter.subscribe('BX.Calendar.Sync.Icloud:onSubmit', (e) => {\n\t\t\t\tthis.createConnection(e.data);\n\t\t\t})\n\t\t}\n\t\t\n\t\tif (!this.alertSyncPopup)\n\t\t{\n\t\t\tthis.alertSyncPopup = new WarnSyncIcloudDialog({\n\t\t\t\tauthDialog: this.authDialog\n\t\t\t})\n\t\t}\n\t}\n\n\topenSyncWizard(appleId)\n\t{\n\t\tthis.provider.setWizardSyncMode(true);\n\t\tthis.wizard = new IcloudSyncWizard();\n\t\tthis.wizard.openSlider();\n\t\tthis.provider.setActiveWizard(this.wizard);\n\n\t\tEventEmitter.subscribeOnce('BX.Calendar.Sync.Interface.SyncStageUnit:onRenderDone', () => {\n\t\t\tthis.wizard.updateState({\n\t\t\t\tstage: 'connection_created',\n\t\t\t\tvendorName: 'icloud',\n\t\t\t\taccountName: appleId,\n\t\t\t})\n\t\t})\n\t}\n\t\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tthis.deactivateConnection(id);\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Tag } from 'main.core';\nimport SyncWizard from './syncwizard';\nimport SyncStageUnit from './syncstageunit';\n\nexport default class Office365SyncWizard extends SyncWizard\n{\n\tTYPE = 'office365';\n\tSLIDER_NAME = 'calendar:sync-wizard-office365';\n\tSTAGE_1_CODE = 'office365-to-b24';\n\tSTAGE_2_CODE = 'sections_sync_finished';\n\tSTAGE_3_CODE = 'events_sync_finished';\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.Office365SyncWizard');\n\t\tthis.setAccountName(Loc.getMessage('CALENDAR_TITLE_OFFICE365'));\n\t\tthis.setSyncStages();\n\t\tthis.logoIconClass = '--office365';\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\treturn '';\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --progress\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-progress\">${Loc.getMessage('CAL_SYNC_LETS_CHECK')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-progress\">${Loc.getMessage('CAL_SYNC_CREATE_EVENT_OFFICE365')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_ADDED_FROM_OFFICE365')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_YOULL_SEE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon--icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getSkeletonWrapper()}\n\t\t\t\t${this.getNewEventCardWrapper()}\n\t\t\t</div>\n\t\t`;\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_1_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_OFFICE365_1')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_2_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_OFFICE365_2')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_3_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_OFFICE365_3')\n\t\t\t})\n\t\t];\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tsuper.updateState(stateData);\n\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tif (stateData.stage === 'connection_created'\n\t\t\t\t&& stage.name === this.STAGE_1_CODE)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === this.STAGE_2_CODE\n\t\t\t && (stage.name === this.STAGE_1_CODE || stage.name === this.STAGE_2_CODE)\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === this.STAGE_3_CODE)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t\tthis.setActiveStatusFinished();\n\t\t\t\tthis.showButtonWrapper();\n\t\t\t\tthis.showInfoStatusWrapper();\n\t\t\t\tthis.showConfetti();\n\n\t\t\t\tthis.emit('onConnectionCreated');\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn Loc.getMessage('CAL_SYNC_NEW_EVENT_OFFICE365_TITLE');\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Event } from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport Office365SyncWizard from '../syncwizard/office365syncwizard';\nimport { Util } from 'calendar.util';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nexport default class Office365template extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_OFFICE365\"),\n\t\t\thelpDeskCode: '6030429',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_OFFICE365_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_OFFICE365_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_OFFICE365_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_OFFICE365_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-office365',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/office365.svg',\n\t\t\ticonLogoClass: '--office365',\n\t\t\tcolor: '#fc1d1d',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\n\t\tthis.sectionStatusObject = {};\n\t\tthis.sectionList = [];\n\t}\n\n\tcreateConnection()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\tanalyticsLabel: {\n\t\t\t\tcalendarAction: 'createConnection',\n\t\t\t\tclick_to_connection_button: 'Y',\n\t\t\t\tconnection_type: 'office365',\n\t\t\t}\n\t\t});\n\n\t\tBX.util.popup(this.provider.getSyncLink(), 500, 600);\n\n\t\tEvent.bind(window, 'hashchange', (event) => {\n\t\t\tif (window.location.hash === '#office365AuthSuccess')\n\t\t\t{\n\t\t\t\tUtil.removeHash();\n\t\t\t\tthis.provider.setWizardSyncMode(true);\n\t\t\t\tthis.saveConnection();\n\t\t\t\tthis.openSyncWizard();\n\t\t\t\tthis.provider.setStatus(this.provider.STATUS_SYNCHRONIZING);\n\t\t\t\tthis.provider.getInterfaceUnit().refreshButton();\n\t\t\t}\n\t\t});\n\t}\n\n\tsaveConnection()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.createOffice365Connection')\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tif (response?.data?.status === this.provider.ERROR_CODE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_FAILED);\n\t\t\t\t\t\t\tthis.provider.setWizardState(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatus: this.provider.ERROR_CODE,\n\t\t\t\t\t\t\t\t\tvendorName: this.provider.type,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response?.data?.connectionId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_SUCCESS);\n\t\t\t\t\t\t\tthis.provider.getConnection().setId(response.data.connectionId);\n\t\t\t\t\t\t\tthis.provider.getConnection().setStatus(true);\n\t\t\t\t\t\t\tthis.provider.getConnection().setConnected(true);\n\t\t\t\t\t\t\tthis.provider.getConnection().setSyncDate(new Date());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_FAILED);\n\t\t\t\t\t\tthis.provider.setWizardState(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstatus: this.provider.ERROR_CODE,\n\t\t\t\t\t\t\t\tvendorName: this.provider.type,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresolve(response.errors);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t})\n\t}\n\n\tonClickCheckSection(event)\n\t{\n\t\tthis.sectionStatusObject[event.target.value] = event.target.checked;\n\t\tthis.runUpdateInfo();\n\t\tthis.showUpdateSectionListNotification();\n\t}\n\n\thandleConnectButton()\n\t{\n\t\tif (this.provider.hasSetSyncOffice365Settings())\n\t\t{\n\t\t\tthis.createConnection();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showAlertPopup();\n\t\t}\n\t}\n\n\topenSyncWizard()\n\t{\n\t\tthis.wizard = new Office365SyncWizard();\n\t\tthis.wizard.openSlider();\n\t\tthis.provider.setActiveWizard(this.wizard);\n\t}\n\n\tgetSectionsForOffice365()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAllSectionsForOffice365', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: this.connection.addParams.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tthis.sectionList = response.data;\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tresolve(response.errors);\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t})\n\t}\n\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tthis.deactivateConnection(id);\n\t}\n\n\tshowAlertPopup()\n\t{\n\t\tconst messageBox = new MessageBox({\n\t\t\tclassName: this.id,\n\t\t\tmessage: Loc.getMessage('OFFICE365_IS_NOT_CALDAV_SETTINGS_WARNING_MESSAGE'),\n\t\t\twidth: 500,\n\t\t\toffsetLeft: 60,\n\t\t\toffsetTop: 5,\n\t\t\tpadding: 7,\n\t\t\tonOk: () => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t\tokCaption: 'OK',\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndexAbsolute: 4020,\n\t\t\t\tautoHide: true,\n\t\t\t},\n\t\t});\n\t\tmessageBox.show();\n\t}\n}\n","// @flow\n'use strict';\n\nimport {Loc, Tag} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport { Util } from 'calendar.util';\n\nexport default class MacTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_MAC\"),\n\t\t\thelpDeskCode: '5684075',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_MAC_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_MAC_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_MAC_CALENDAR_IS_CONNECT_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_MAC_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-mac',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/mac.svg',\n\t\t\tcolor: '#ff5752',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\n\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC');\n\t\tthis.warningButtonText = Loc.getMessage('CALENDAR_CONNECT_ICLOUD');\n\t}\n\n\tgetPortalAddress()\n\t{\n\t\treturn this.portalAddress;\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render `\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t\t${this.getContentInfoWarning()}\n\t\t\t${this.getContentBodyConnect()}\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t${this.getContentBodyConnect()}\n\t\t`;\n\t}\n\n\tgetContentBodyConnect()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-col\">\n\t\t\t\t<div class=\"calendar-sync-slider-header calendar-sync-slider-header-divide\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-subtitle\">${Loc.getMessage('CAL_MAC_INSTRUCTION_HEADER')}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_DESCRIPTION')}:</span>\n\t\t\t\t\t<ol class=\"calendar-sync-slider-info-list\">\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FIRST')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SECOND')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_THIRD')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FOURTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FIFTH', { '#PORTAL_ADDRESS#': this.provider.getPortalAddress() })}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SIXTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SEVENTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ol>\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_CONCLUSION')}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\thandleWarningButtonClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-mac'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.getConnectionTemplate()\n\t\t\t\t.handleConnectButton();\n\t\t}\n\t}\n}\n","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\n\nexport default class OutlookTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_MAC\"),\n\t\t\thelpDeskCode: '5684075',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_MAC_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_MAC_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_MAC_CALENDAR_IS_CONNECT_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_MAC_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-mac',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/mac.svg',\n\t\t\tcolor: '#ff5752',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {CaldavInterfaceTemplate} from \"./caldavinterfacetemplate\";\n\nexport default class YandexTemplate extends CaldavInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_YANDEX\"),\n\t\t\thelpDeskCode: '10930170',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_YANDEX_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_YANDEX_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_YANDEX_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_YANDEX_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-yandex',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/yandex.svg',\n\t\t\ticonLogoClass: '--yandex',\n\t\t\tcolor: '#f9c500',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc, Tag, Type} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport MobileSyncBanner from \"../controls/mobilesyncbanner\";\nimport {Util} from \"calendar.util\";\n\nexport default class MobileInterfaceTemplate extends InterfaceTemplate\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\n\t\tthis.banner = new MobileSyncBanner({\n\t\t\ttype: this.provider.getType(),\n\t\t\thelpDeskCode: options.helpDeskCode,\n\t\t});\n\n\t\tif (this.status)\n\t\t{\n\t\t\tthis.syncDate = Type.isDate(this.data.syncDate) ? this.data.syncDate : Util.parseDate(this.data.syncDate);\n\t\t}\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render `\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t\t${this.getContentInfoWarning()}\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-banner\">\n\t\t\t\t${this.getContentBodyConnect()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-banner\">\n\t\t\t\t${this.getContentBodyConnect()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-slider-section\">\n\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t<div class=\"calendar-sync-slider-title\">${this.titleActiveHeader}</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_SYNC_LAST_SYNC_DATE')}</span>\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-time\">${syncTime}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-desc\">${Loc.getMessage('CAL_SYNC_DISABLE')}</div>\n\t\t\t\t\t<a class=\"calendar-sync-slider-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}</a>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t}\n\n\tgetContentBodyConnect()\n\t{\n\t\tthis.banner.initQrCode().then(this.banner.drawQRCode.bind(this.banner));\n\t\treturn this.banner.getContainer();\n\t}\n\t\n\tgetActiveConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t${this.getContentActiveBody()}\n\t\t\t</div>\n\t\t`\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport MobileInterfaceTemplate from \"./mobileinterfacetemplate\";\nimport { Util } from 'calendar.util';\n\nexport default class AndroidTemplate extends MobileInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_ANDROID\"),\n\t\t\thelpDeskCode: '5686179',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_ANDROID_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_ANDROID_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_SYNC_CONNECTED_ANDROID_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_ANDROID_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-android',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/android.svg',\n\t\t\tcolor: '#9ece03',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\n\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_ANDROID');\n\t\tthis.warningButtonText = Loc.getMessage('CALENDAR_CONNECT_GOOGLE');\n\t}\n\n\thandleWarningButtonClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-android'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getGoogleProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.getConnectionTemplate()\n\t\t\t\t.handleConnectButton();\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\nimport { Loc, Tag } from \"main.core\";\nimport MobileInterfaceTemplate from \"./mobileinterfacetemplate\";\nimport { Util } from 'calendar.util';\n\nexport default class IphoneTemplate extends MobileInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_IPHONE\"),\n\t\t\thelpDeskCode: '5686207',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_IPHONE_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_IPHONE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_SYNC_CONNECTED_IPHONE_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_IPHONE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-iphone',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/iphone.svg',\n\t\t\tcolor: '#2fc6f6',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\n\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC');\n\t\tthis.warningButtonText = Loc.getMessage('CALENDAR_CONNECT_ICLOUD');\n\t}\n\n\thandleWarningButtonClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-iphone'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.getConnectionTemplate()\n\t\t\t\t.handleConnectButton();\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\n\nimport {Popup} from 'main.popup';\nimport {Util} from 'calendar.util';\nimport {Loc, Tag} from \"main.core\";\nimport \"../css/icalpopup.css\"\n\nexport default class IcalSyncPopup\n{\n\tLINK_LENGTH = 112;\n\n\tconstructor(options)\n\t{\n\t\tthis.link = this.getIcalLink(options);\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tshow()\n\t{\n\t\tthis.createPopup().show();\n\t\tthis.startSync();\n\t}\n\n\tstartSync()\n\t{\n\t\tBX.ajax.get(this.link + '&check=Y', \"\", (result) =>\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tif (!result || result.length <= 0 || result.toUpperCase().indexOf('BEGIN:VCALENDAR') === -1)\n\t\t\t\t{\n\t\t\t\t\tthis.showPopupWithSyncDataError();\n\t\t\t\t}\n\t\t\t}, 300);\n\t\t});\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-ical-popup-wrapper\">\n\t\t\t\t<h3>${Loc.getMessage('EC_JS_EXPORT_TILE')}</h3>\n\t\t\t\t<div class=\"calendar-ical-popup-label-text\"><span>${Loc.getMessage('EC_EXP_TEXT')}</span></div>\n\t\t\t\t${this.getLinkBlock()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreatePopup()\n\t{\n\t\treturn this.popup = new Popup({\n\t\t\twidth: 400,\n\t\t\tzIndexOptions: 4000,\n\t\t\tautoHide: false,\n\t\t\tcloseByEsc: true,\n\t\t\tdraggable: true,\n\t\t\tcloseIcon: {right: \"12px\", top: \"10px\"},\n\t\t\tclassName: \"bxc-popup-window\",\n\t\t\tcontent: this.getContent(),\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('EC_JS_ICAL_COPY_ICAL_SYNC_LINK'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.PRIMARY,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.copyLink(event);\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('EC_SEC_SLIDER_CLOSE'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.LINK,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.popup.close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\tgetIcalLink(options)\n\t{\n\t\treturn options.calendarPath\n\t\t\t+ ((options.calendarPath.indexOf('?') >= 0) ? '&' : '?')\n\t\t\t+ 'action=export'\n\t\t\t+ options.sectionLink;\n\t}\n\n\tgetLinkBlock()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-ical-popup-link-block\">\n\t\t\t\t\t<a class=\"ui-link ui-link-primary \" target=\"_blank\" href=\"${BX.util.htmlspecialchars(this.link)}\">\n\t\t\t\t\t\t${BX.util.htmlspecialchars(this.getShortenLink(this.link))}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tstatic checkPathes(options)\n\t{\n\t\treturn (!!options.sectionLink || !!options.calendarPath)\n\t}\n\n\tstatic showPopupWithPathesError()\n\t{\n\t\tBX.UI.Dialogs.MessageBox.alert(Loc.getMessage('EC_JS_ICAL_ERROR_WITH_PATHES'));\n\t}\n\n\tshowPopupWithSyncDataError()\n\t{\n\t\tBX.UI.Dialogs.MessageBox.alert(Loc.getMessage('EC_EDEV_EXP_WARN'));\n\t}\n\n\tcopyLink(event)\n\t{\n\t\twindow.BX.clipboard.copy(this.link)\n\t\t\t? this.#showSuccessCopyNotification()\n\t\t\t: this.#showFailedCopyNotification();\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t}\n\n\tgetShortenLink(link)\n\t{\n\t\treturn link.length < this.LINK_LENGTH ? link : link.substr(0, 105) + '...' + link.slice(-7);\n\t}\n\n\t#showSuccessCopyNotification()\n\t{\n\t\tthis.#showResultNotification(Loc.getMessage('EC_JS_ICAL_COPY_ICAL_SYNC_LINK_SUCCESS'));\n\t}\n\n\t#showFailedCopyNotification()\n\t{\n\t\tthis.#showResultNotification(Loc.getMessage('EC_JS_ICAL_COPY_ICAL_SYNC_LINK_FAILED'));\n\t}\n\n\t#showResultNotification(message)\n\t{\n\t\tUtil.showNotification(message);\n\t}\n}\n","// @flow\n'use strict';\nimport {Type, Tag, Loc, Runtime, Dom} from 'main.core';\nimport {Util} from \"calendar.util\";\nimport {Popup} from 'main.popup';\n\nexport default class AfterSyncTour\n{\n\tconstructor(options = {})\n\t{\n\t\tthis.options = options;\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tloadExtension()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tRuntime.loadExtension('ui.tour').then((exports) => {\n\t\t\t\tif (exports && exports['Guide'] && exports['Manager'])\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconsole.error(`Extension \"ui.tour\" not found`);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tshow()\n\t{\n\t\tthis.loadExtension()\n\t\t\t.then(() => {\n\t\t\t\tthis.guide = new BX.UI.Tour.Guide({\n\t\t\t\t\tsteps: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttarget: this.getTarget(),\n\t\t\t\t\t\t\ttitle: Loc.getMessage('CAL_AFTER_SYNC_AHA_TITLE'),\n\t\t\t\t\t\t\ttext: Loc.getMessage('CAL_AFTER_SYNC_AHA_TEXT'),\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tonEvents: true\n\t\t\t\t});\n\n\t\t\t\tthis.guide.start();\n\t\t\t});\n\t}\n\n\tgetTarget()\n\t{\n\t\tlet target;\n\t\tconst view = this.options.view;\n\t\tconst viewWrap = view.getContainer();\n\n\t\tif (view.getName() === 'month')\n\t\t{\n\t\t\ttarget = viewWrap.querySelectorAll(\".calendar-grid-today\")[0];\n\t\t}\n\t\telse if (view.getName() === 'day'\n\t\t|| view.getName() === 'week')\n\t\t{\n\t\t\tconst dayCode = Util.getDayCode(new Date());\n\t\t\ttarget = viewWrap.querySelector('div[data-bx-calendar-timeline-day=\"' + dayCode + '\"] .calendar-grid-cell-inner');\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttarget = document.querySelector('span[data-role=\"addButton\"]');\n\t\t}\n\n\t\treturn target;\n\t}\n}\n"],"names":["StatusBlock","constructor","options","status","connections","withStatusLabel","popupWithUpdateButton","popupId","createInstance","setStatus","setConnections","getContent","statusInfoBlock","Tag","render","Loc","getMessage","addEventListener","handlerMouseEnter","handlerMouseLeave","statusBlock","getStatusTextLabel","clearTimeout","statusBlockEnterTimeout","buttonEnterTimeout","setTimeout","showPopup","statusBlockLeaveTimeout","hidePopup","node","popup","getPopup","show","addPopupHandlers","hide","getPopupContainer","SyncStatusPopup","withUpdateButton","id","refresh","AuxiliarySyncPanel","MAIN_SYNC_SLIDER_NAME","SLIDER_WIDTH","LOADER_NAME","cache","Cache","MemoryCache","connectionsProviders","userId","openSlider","BX","SidePanel","Instance","open","contentCallback","slider","Promise","resolve","reject","allowChangeHistory","events","onLoad","setGridContent","cacheable","width","loader","getHeader","getMobileHeader","getMobileContentWrapper","getWebHeader","getWebContentWrapper","getMainHeader","getStatusBlockContent","getConnections","remember","statusBlockContent","items","Object","values","forEach","item","itemConnections","length","connection","ConnectionItem","isConnectionItem","getConnectStatus","push","showWebGridContent","filter","mainPanel","getViewClassification","showMobileGridContent","wrapper","Dom","clean","grid","TileGrid","Grid","container","sizeRatio","itemMinWidth","tileMargin","itemType","draw","blockStatusContent","replace","document","querySelector","SyncPanelUnit","logoClassName","connectionProvider","getConnectionTemplate","connectionTemplate","getClassTemplateItem","renderTo","outerWrapper","Type","isElementNode","appendChild","unitNode","getLogoNode","getTitle","getSyncInfoWrap","getButtonsWrap","getSyncPanelLogo","getSyncPanelTitle","syncInfoWrap","setSyncStatus","mode","className","STATUS_SUCCESS","addClass","setSyncInfoStatusText","formatSyncTime","getSyncDate","STATUS_FAILED","STATUS_PENDING","STATUS_SYNCHRONIZING","STATUS_NOT_CONNECTED","text","syncInfoStatusText","innerHTML","Text","encode","toUpperCase","buttonsWrap","getMoreButton","getButton","Event","bind","moreButton","handleItemClick","refreshButton","button","getStatus","e","includes","hasMenu","showMenu","openActiveConnectionSlider","getConnection","openInfoConnectionSlider","handleConnectButton","date","now","Date","timestamp","isDate","Math","round","getTime","secondsAgo","parseInt","format","SyncPanel","HELPDESK_CODE","window","top","displayConnectionUnits","getHeaderWrapper","getUnitsContentWrapper","getFooterWrapper","unitsContentWrapper","getExtraInfoWithCheckIcon","getOpenAuxiliaryPanelLink","getOpenHelpLink","alreadyConnected","link","auxiliarySyncPanel","Helper","connected","renderConnectionUnits","providers","provider","interfaceUnit","setInterfaceUnit","GridUnit","Item","type","gridUnit","getAdditionalContentClass","getContentStyles","getImage","isActive","onClick","layout","title","util","htmlspecialchars","getGridTitle","getGridIcon","getSyncStatus","getGridColor","ajax","runAction","analyticsLabel","open_connection_slider","sync_connection_type","getType","sync_connection_status","ConnectionControls","userName","server","connectionName","addButtonText","removeButtonText","saveButtonText","getWrapper","getForm","getAddButton","getDisconnectButton","getSaveButton","getButtonWrapper","MobileSyncBanner","zIndex","DOM","QRCODE_SIZE","QRCODE_COLOR_LIGHT","QRCODE_COLOR_DARK","QRCODE_WRAP_CLASS","QRC","helpDeskCode","showInPopup","Popup","draggable","content","getContainer","zIndexAbsolute","closeByEsc","closeIcon","initQrCode","then","drawQRCode","close","Util","getLoader","getHelpdeskCode","initHintNode","getInnerContainer","Runtime","loadExtension","exports","QRCode","wrap","isDomNode","getMobileSyncUrl","getSize","height","colorDark","colorLight","correctLevel","CorrectLevel","H","data","response","getDetailHelpUrl","InterfaceTemplate","EventEmitter","sliderWidth","setEventNamespace","helpdeskCode","titleInfoHeader","descriptionInfoHeader","titleActiveHeader","descriptionActiveHeader","sliderIconClass","iconPath","iconLogoClass","color","getInfoConnectionContent","getHeaderTitle","getContentInfoBody","getContentActiveBodyHeader","disconnectButton","handleDisconnectButton","syncTime","formatDateUsable","getTimeFormatShort","getSyncStatusClassName","getLogoIconClass","getConnectionName","getActiveConnectionContent","getContentActiveBody","getContentInfoBodyHeader","getContentActiveBodySectionsHeader","getContentActiveBodySectionsManager","showHelp","event","preventDefault","getHelpdeskLink","getContentInfoWarning","connectOtherButton","getWarningButton","handleWarningButtonClick","warningText","warningButtonText","setProvider","sendRequestRemoveConnection","connectionId","removeCalendars","reload","runUpdateInfo","sectionStatus","sectionStatusObject","emit","getElementById","getContentActiveBodySections","sectionList","section","onClickCheckSection","showUpdateSectionListNotification","showNotification","getId","deactivateConnection","closeSlider","getInterfaceUnit","SLIDER_PREFIX","CaldavInterfaceTemplate","formObject","formBlock","form","buttonWrapper","bodyHeader","click_to_connection_button","connection_type","sendRequestAddConnection","append","addParams","fd","FormData","name","get","pass","showAlertPopup","errors","alert","message","code","messageBox","UI","Dialogs","MessageBox","buttons","MessageBoxButtons","OK","okCaption","minWidth","mediumButtonSize","popupOptions","onOk","removeClass","CaldavTemplate","ExchangeTemplate","getContentBody","getHelpdeskBlock","SyncWizard","TYPE","SLIDER_NAME","syncStagesList","accountName","MIN_UPDATE_STATE_DELAY","CONFETTI_DELAY","pullWizardEventHandler","handlePullNewEvent","lastUpdateStateTimestamp","logoIconClass","displaySyncStages","bindButtonsHandlers","onDestroy","handleCloseWizard","getTopSlider","syncIsFinished","errorStatus","getTitleWrapper","getSyncStagesWrapper","getInfoStatusWrapper","getErrorWrapper","getFinalCheckWrapper","getHelpLinkWrapper","syncTitleWrapper","getAccountNameNode","getActiveStatusNode","syncStagesWrapper","infoStatusWrapper","errorWrapper","helpLinkWrapper","finalCheckWrapper","getNewEventCardWrapper","newEventCardWrapper","getSkeletonWrapper","skeletonWrapper","getSkeletonTitle","accountNameNode","getAccountName","setAccountName","value","activeStatusNode","setSyncStages","getSyncStages","getHelpDeskCode","stage","continueButton","handleContinueButtonClick","eifButton","handleFinalCloseButtonClick","showFinalStage","style","display","showFinalCheckWrapper","showHelpLinkWrapper","hideSyncStagesWrapper","hideInfoStatusWrapper","getBX","subscribe","isSyncFinished","getOpenSliders","getUrl","calendarAction","handleUpdateState","stateData","currentTimestamp","updateState","setActiveStatusFinished","remove","showButtonWrapper","hideButtonWrapper","showInfoStatusWrapper","showErrorWrapper","hideErrorWrapper","hideFinalCheckWrapper","showSyncStagesWrapper","hideHelpLinkWrapper","isFunction","getData","command","newEvent","syncBalloon","hasClass","entry","Entry","fields","displayNewEvent","unsubscribe","getNewEventCard","from","to","fromTimestamp","dateFrom","getDayMonthFormat","timeFrom","formatTime","getHours","getMinutes","timeTo","timeField","isFullDay","newEventCard","getName","showConfetti","bx","Confetti","fire","particleCount","spread","origin","y","x","getZindex","getSlider","setErrorState","closeButton","SyncStageUnit","doneStatus","contentNode","setDone","setUndone","GoogleSyncWizard","STAGE_1_CODE","STAGE_2_CODE","STAGE_3_CODE","GOOGLE_ON_MOBILE_HELPDESK","helper","GoogleTemplate","HANDLE_CONNECTION_DELAY","handleSuccessConnectionDebounce","debounce","handleSuccessConnection","createConnection","getSyncLink","location","hash","removeHash","setWizardSyncMode","saveConnection","openSyncWizard","getSectionsForGoogle","target","checked","offsetLeft","offsetTop","padding","autoHide","hasSetSyncGoogleSettings","wizard","setActiveWizard","IcloudAuthDialog","appPasswordTemplate","keyHandler","handleKeyPress","checkOutsideClickClose","outsideMouseDownClose","initAlertBlock","titleBar","animation","contentBackground","overlay","opacity","lightShadow","Button","click","authorize","onPopupClose","isFormDataValid","saveBtn","getButtons","setClocking","setDisabled","cancelButton","contains","alertBlock","BaseEvent","appleId","appleIdInput","toString","trim","appPassword","appPasswordInput","highlightInvalidFormData","highlightInvalidAppleIdInput","highlightInvalidPasswordInput","clearInvalidation","unbind","focus","enableSaveButton","getAppleInfoBlock","getAppleIdTitle","getAppleIdInput","getAppleIdError","getAppPasswordTitle","getLearnMoreButton","getAppPasswordInput","getShowHidePasswordIcon","getAppPasswordError","appleInfo","appleIdTitle","appPasswordTitle","appleIdError","appPasswordError","openHelpDesk","onfocus","onblur","validateAppleIdInput","validateAppPasswordInput","showHidePasswordIcon","switchPasswordVisibility","learnMoreButton","showErrorAuthorizationAlert","emailRegExp","input","test","appPasswordRegExp","completeWithTemplate","clearForm","password","addition","slice","click_to_helpdesk_button","keyCode","getKeyCode","srcElement","outsideMouseUp","closest","outsideMouseDown","checkTopSlider","destroy","IcloudSyncWizard","WarnSyncIcloudDialog","authDialog","openAuthDialog","getAlertInformation","Alert","Color","WARNING","icon","Icon","INFO","disableConnection","setIphoneConnectionStatus","setMacConnectionStatus","IcloudTemplate","result","syncCalendarsWithIcloud","wrong_app_pass","setId","setConnected","setSyncDate","setWizardState","ERROR_CODE","vendorName","getSectionsForIcloud","initPopup","isIphoneConnected","isMacConnected","alertSyncPopup","unsubscribeAll","subscribeOnce","Office365SyncWizard","Office365template","hasSetSyncOffice365Settings","getSectionsForOffice365","MacTemplate","getPortalAddress","portalAddress","getContentBodyConnect","calendarContext","getCalendarContext","syncInterface","getIcloudProvider","OutlookTemplate","YandexTemplate","MobileInterfaceTemplate","banner","syncDate","parseDate","AndroidTemplate","getGoogleProvider","IphoneTemplate","IcalSyncPopup","LINK_LENGTH","getIcalLink","createPopup","startSync","indexOf","showPopupWithSyncDataError","getLinkBlock","zIndexOptions","right","PRIMARY","onclick","copyLink","LINK","calendarPath","sectionLink","getShortenLink","checkPathes","showPopupWithPathesError","clipboard","copy","stopPropagation","substr","AfterSyncTour","console","error","guide","Tour","Guide","steps","getTarget","onEvents","start","view","viewWrap","querySelectorAll","dayCode","getDayCode"],"mappings":";;;;;;;;;;;;CAMe,MAAMA,WAAN,CACf;GACCC,WAAW,CAACC,OAAD,EACX;KACC,KAAKC,MAAL,GAAcD,OAAO,CAACC,MAAtB;KACA,KAAKC,WAAL,GAAmBF,OAAO,CAACE,WAA3B;KACA,KAAKC,eAAL,GAAuBH,OAAO,CAACG,eAA/B;KACA,KAAKC,qBAAL,GAA6BJ,OAAO,CAACI,qBAArC;KACA,KAAKC,OAAL,GAAeL,OAAO,CAACK,OAAvB;;;GAGoB,OAAdC,cAAc,CAACN,OAAD,EACrB;KACC,OAAO,IAAI,IAAJ,CAASA,OAAT,CAAP;;;GAGDO,SAAS,CAACN,MAAD,EACT;KACC,KAAKA,MAAL,GAAcA,MAAd;KAEA,OAAO,IAAP;;;GAGDO,cAAc,CAACN,WAAD,EACd;KACC,KAAKA,WAAL,GAAmBA,WAAnB;KAEA,OAAO,IAAP;;;GAGDO,UAAU,GACV;KACC,IAAIC,eAAJ;;KACA,IAAI,KAAKT,MAAL,KAAgB,SAApB,EACA;OACCS,eAAe,GAAGC,aAAG,CAACC,MAAP,cAAe;;sCAAf,CAE0D;;IAF1D,GAEoBC,aAAG,CAACC,UAAJ,CAAe,qBAAf,CAFpB,CAAf;MAFD,MAQK,IAAI,KAAKb,MAAL,KAAgB,QAApB,EACL;OACCS,eAAe,GAAGC,aAAG,CAACC,MAAP,gBAAe;;sCAAf,CAEwD;;IAFxD,GAEoBC,aAAG,CAACC,UAAJ,CAAe,mBAAf,CAFpB,CAAf;MAFI,MASL;OACCJ,eAAe,GAAGC,aAAG,CAACC,MAAP,gBAAe;;sCAAf,CAEgE;;IAFhE,GAEoBC,aAAG,CAACC,UAAJ,CAAe,2BAAf,CAFpB,CAAf;;;KAODJ,eAAe,CAACK,gBAAhB,CAAiC,YAAjC,EAA+C,MAAM;OACpD,KAAKC,iBAAL,CAAuBN,eAAvB;MADD;KAIAA,eAAe,CAACK,gBAAhB,CAAiC,YAAjC,EAA+C,MAAM;OACpD,KAAKE,iBAAL;MADD;KAIA,KAAKC,WAAL,GAAmBP,aAAG,CAACC,MAAvB,gBAA+B;;MAA/B,CAE8B;MAF9B,CAGoB;;GAHpB,GAEI,KAAKO,kBAAL,EAFJ,EAGIT,eAHJ;KAOA,OAAO,KAAKQ,WAAZ;;;GAGDC,kBAAkB,GAClB;KACC,OAAO,KAAKhB,eAAL,GACJQ,aAAG,CAACC,MADA,gBACO;;;+CADP,CAI0E;WAJ1E,GAIsCC,aAAG,CAACC,UAAJ,CAAe,mBAAf,CAJtC,IAMJ,EANH;;;GAUDE,iBAAiB,CAACE,WAAD,EACjB;KACCE,YAAY,CAAC,KAAKC,uBAAN,CAAZ;KACA,KAAKC,kBAAL,GAA0BC,UAAU,CAAC,MACpC;OACC,KAAKF,uBAAL,GAA+B,IAA/B;OACA,KAAKG,SAAL,CAAeN,WAAf;MAHkC,EAIhC,GAJgC,CAApC;;;GAQDD,iBAAiB,GACjB;KACC,IAAI,KAAKI,uBAAL,KAAiC,IAArC,EACA;OACCD,YAAY,CAAC,KAAKC,uBAAN,CAAZ;OACA,KAAKA,uBAAL,GAA+B,IAA/B;OACA;;;KAGD,KAAKI,uBAAL,GAA+BF,UAAU,CAAC,MACzC;OACC,KAAKG,SAAL;MAFuC,EAGrC,GAHqC,CAAzC;;;GAODF,SAAS,CAACG,IAAD,EACT;KACC,IAAG,KAAK1B,MAAL,KAAgB,eAAnB,EACA;OACC,KAAK2B,KAAL,GAAa,KAAKC,QAAL,CAAcF,IAAd,CAAb;OACA,KAAKC,KAAL,CAAWE,IAAX;OAEA,KAAKC,gBAAL;;;;GAIFL,SAAS,GACT;KACC,IAAI,KAAKE,KAAT,EACA;OACC,KAAKA,KAAL,CAAWI,IAAX;;;;GAIFD,gBAAgB,GAChB;KACC,KAAKH,KAAL,CAAWC,QAAX,GAAsBI,iBAAtB,GAA0ClB,gBAA1C,CAA2D,YAA3D,EAAyE,MACzE;OACCK,YAAY,CAAC,KAAKC,uBAAN,CAAZ;OACAD,YAAY,CAAC,KAAKK,uBAAN,CAAZ;MAHD;KAMA,KAAKG,KAAL,CAAWC,QAAX,GAAsBI,iBAAtB,GAA0ClB,gBAA1C,CAA2D,YAA3D,EAAyE,MACzE;OACC,KAAKW,SAAL;MAFD;;;GAMDG,QAAQ,CAACF,IAAD,EACR;KACC,OAAOO,qCAAe,CAAC5B,cAAhB,CAA+B;OACrCJ,WAAW,EAAE,KAAKA,WADmB;OAErCiC,gBAAgB,EAAE,KAAK/B,qBAFc;OAGrCuB,IAAI,EAAEA,IAH+B;OAIrCS,EAAE,EAAE,KAAK/B;MAJH,CAAP;;;GAQDgC,OAAO,CAACpC,MAAD,EAASC,WAAT,EACP;KACC,KAAKD,MAAL,GAAcA,MAAd;KACA,KAAKC,WAAL,GAAmBA,WAAnB;KAEA,OAAO,IAAP;;;CAlKF;;;;;;;;;;CCAe,MAAMoC,kBAAN,CACf;GAOCvC,WAAW,CAACC,OAAD,EACX;KAAA,KAPAuC,qBAOA,GAPwB,gCAOxB;KAAA,KANAC,YAMA,GANe,GAMf;KAAA,KALAC,WAKA,GALc,iBAKd;KAAA,KAHAC,KAGA,GAHQ,IAAIC,eAAK,CAACC,WAAV,EAGR;KACC,KAAK3C,MAAL,GAAcD,OAAO,CAACC,MAAtB;KACA,KAAK4C,oBAAL,GAA4B7C,OAAO,CAAC6C,oBAApC;KACA,KAAKC,MAAL,GAAc9C,OAAO,CAAC8C,MAAtB;KAEA,KAAKzB,uBAAL,GAA+B,IAA/B;KACA,KAAKI,uBAAL,GAA+B,IAA/B;;;GAGDsB,UAAU,GACV;KACCC,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBC,IAAtB,CAA2B,KAAKZ,qBAAhC,EAAuD;OACtDa,eAAe,EAAGC,MAAD,IAAY;SAC5B,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;WACvCD,OAAO,CAAC,KAAK9C,UAAL,EAAD,CAAP;UADM,CAAP;QAFqD;OAMtDgD,kBAAkB,EAAC,KANmC;OAOtDC,MAAM,EAAE;SACPC,MAAM,EAAE,MAAM;WACb,KAAKC,cAAL;UAFM;;;;;;;;;;QAP8C;OAqBtDC,SAAS,EAAE,KArB2C;OAsBtDC,KAAK,EAAE,KAAKtB,YAtB0C;OAuBtDuB,MAAM,EAAE,KAAKtB;MAvBd;;;GA2BDhC,UAAU,GACV;KACC,OAAOE,aAAG,CAACC,MAAX,oBAAkB;;MAAlB,CAEqB;MAFrB,CAG2B;MAH3B,CAImC;MAJnC,CAKwB;MALxB,CAMgC;;GANhC,GAEI,KAAKoD,SAAL,EAFJ,EAGI,KAAKC,eAAL,EAHJ,EAII,KAAKC,uBAAL,EAJJ,EAKI,KAAKC,YAAL,EALJ,EAMI,KAAKC,oBAAL,EANJ;;;GAWDJ,SAAS,GACT;KACC,OAAOrD,aAAG,CAACC,MAAX,sBAAkB;;MAAlB,CAEyB;MAFzB,CAGsD;;GAHtD,GAEI,KAAKyD,aAAL,EAFJ,EAGI,KAAKC,qBAAL,CAA2B,KAAKC,cAAL,EAA3B,CAHJ;;;GAQDF,aAAa,GACb;KACC,OAAO,KAAK3B,KAAL,CAAW8B,QAAX,CAAoB,+BAApB,EAAqD,MAAM;OACjE,OAAO7D,aAAG,CAACC,MAAX,sBAAkB;8CAAlB,CACsF;IADtF,GAC2CC,aAAG,CAACC,UAAJ,CAAe,0BAAf,CAD3C;MADM,CAAP;;;GAODoD,uBAAuB,GACvB;KACC,OAAO,KAAKxB,KAAL,CAAW8B,QAAX,CAAoB,yCAApB,EAA+D,MAAM;OAC3E,OAAO7D,aAAG,CAACC,MAAX,sBAAkB;;GAAlB;MADM,CAAP;;;GAQDwD,oBAAoB,GACpB;KACC,OAAO,KAAK1B,KAAL,CAAW8B,QAAX,CAAoB,sCAApB,EAA4D,MAAM;OACxE,OAAO7D,aAAG,CAACC,MAAX,sBAAkB;;IAAlB;MADM,CAAP;;;GAODqD,eAAe,GACf;KACC,OAAO,KAAKvB,KAAL,CAAW8B,QAAX,CAAoB,iCAApB,EAAuD,MAAM;OACnE,OAAO7D,aAAG,CAACC,MAAX,kBAAkB;uCAAlB,CACyE;IADzE,GACoCC,aAAG,CAACC,UAAJ,CAAe,oBAAf,CADpC;MADM,CAAP;;;GAODqD,YAAY,GACZ;KACC,OAAO,KAAKzB,KAAL,CAAW8B,QAAX,CAAoB,8BAApB,EAAoD,MAAM;OAChE,OAAO7D,aAAG,CAACC,MAAX,kBAAkB;uCAAlB,CACsE;GADtE,GACoCC,aAAG,CAACC,UAAJ,CAAe,iBAAf,CADpC;MADM,CAAP;;;GAODwD,qBAAqB,CAACpE,WAAD,EACrB;KACC,KAAKgB,WAAL,GAAmBpB,WAAW,CAACQ,cAAZ,CAA2B;OAC7CL,MAAM,EAAE,KAAKA,MADgC;OAE7CC,WAAW,EAAEA,WAFgC;OAG7CC,eAAe,EAAE,IAH4B;OAI7CC,qBAAqB,EAAE,IAJsB;OAK7CC,OAAO,EAAE;MALS,CAAnB;KAQA,KAAKoE,kBAAL,GAA2B,KAAKvD,WAAL,CAAiBT,UAAjB,EAA3B;KACA,OAAO,KAAKgE,kBAAZ;;;GAGDF,cAAc,GACd;KACC,MAAMrE,WAAW,GAAG,EAApB;KACA,MAAMwE,KAAK,GAAGC,MAAM,CAACC,MAAP,CAAc,KAAK/B,oBAAnB,CAAd;KACA6B,KAAK,CAACG,OAAN,CAAcC,IAAI,IAClB;OACC,MAAMC,eAAe,GAAGD,IAAI,CAACP,cAAL,EAAxB;;OACA,IAAIQ,eAAe,CAACC,MAAhB,GAAyB,CAA7B,EACA;SACCD,eAAe,CAACF,OAAhB,CAAwBI,UAAU,IAAI;WAErC,IAAIC,oCAAc,CAACC,gBAAf,CAAgCF,UAAhC,KAA+CA,UAAU,CAACG,gBAAX,OAAkC,IAArF,EACA;aACClF,WAAW,CAACmF,IAAZ,CAAiBJ,UAAjB;;UAJF;;MALF;KAeA,OAAO/E,WAAP;;;GAGD0D,cAAc,GACd;KACC,MAAMc,KAAK,GAAGC,MAAM,CAACC,MAAP,CAAc,KAAK/B,oBAAnB,CAAd;KAEA,KAAKyC,kBAAL,CAAwBZ,KAAK,CAACa,MAAN,CAAaT,IAAI,IAAI;OAC5C,OAAOA,IAAI,CAACU,SAAL,KAAmB,KAAnB,IAA4BV,IAAI,CAACW,qBAAL,OAAiC,KAApE;MADuB,CAAxB;KAIA,KAAKC,qBAAL,CAA2BhB,KAAK,CAACa,MAAN,CAAaT,IAAI,IAAI;OAC/C,OAAOA,IAAI,CAACU,SAAL,KAAmB,KAAnB,IAA4BV,IAAI,CAACW,qBAAL,OAAiC,QAApE;MAD0B,CAA3B;;;GAKDH,kBAAkB,CAACZ,KAAD,EAClB;KACC,MAAMiB,OAAO,GAAG,KAAKvB,oBAAL,EAAhB;KACAwB,aAAG,CAACC,KAAJ,CAAUF,OAAV;KACA,MAAMG,IAAI,GAAG,IAAI9C,EAAE,CAAC+C,QAAH,CAAYC,IAAhB,CAAqB;OACjC5D,EAAE,EAAE,eAD6B;OAEjCsC,KAAK,EAAEA,KAF0B;OAGjCuB,SAAS,EAAEN,OAHsB;OAIjCO,SAAS,EAAE,KAJsB;OAKjCC,YAAY,EAAE,GALmB;OAMjCC,UAAU,EAAE,CANqB;OAOjCC,QAAQ,EAAE,qCAPuB;OAQjCvD,MAAM,EAAE,KAAKA;MARD,CAAb;KAWAgD,IAAI,CAACQ,IAAL;;;GAGDZ,qBAAqB,CAAChB,KAAD,EACrB;KACC,MAAMiB,OAAO,GAAG,KAAKzB,uBAAL,EAAhB;KACA0B,aAAG,CAACC,KAAJ,CAAUF,OAAV;KACA,MAAMG,IAAI,GAAG,IAAI9C,EAAE,CAAC+C,QAAH,CAAYC,IAAhB,CAAqB;OACjC5D,EAAE,EAAE,eAD6B;OAEjCsC,KAAK,EAAGA,KAFyB;OAGjCuB,SAAS,EAAEN,OAHsB;OAIjCO,SAAS,EAAG,KAJqB;OAKjCC,YAAY,EAAG,GALkB;OAMjCC,UAAU,EAAG,CANoB;OAOjCC,QAAQ,EAAE;MAPE,CAAb;KAUAP,IAAI,CAACQ,IAAL;;;GAGDjE,OAAO,CAACpC,MAAD,EAAS4C,oBAAT,EACP;KACC,KAAK5C,MAAL,GAAcA,MAAd;KACA,KAAK4C,oBAAL,GAA4BA,oBAA5B;KACA,KAAK0D,kBAAL,GAA0B,KAAKrF,WAAL,CAAiBmB,OAAjB,CAAyBpC,MAAzB,EAAiC,KAAKsE,cAAL,EAAjC,EAAwD9D,UAAxD,EAA1B;KACAmF,aAAG,CAACY,OAAJ,CAAYC,QAAQ,CAACC,aAAT,CAAuB,6BAAvB,CAAZ,EAAmE,KAAKH,kBAAxE;KACA,KAAK3C,cAAL;;;CA7MF;;;;;;;;;;;;;CCDe,MAAM+C,aAAN,CACf;GAGC5G,WAAW,CAACC,OAAD,EACX;KAAA,KAHA4G,aAGA,GAHgB,EAGhB;KACC,KAAK5G,OAAL,GAAeA,OAAf;KACA,KAAK6G,kBAAL,GAA0B,KAAK7G,OAAL,CAAa6G,kBAAvC;;;GAGDC,qBAAqB,GACrB;KACC,IAAI,CAAC,KAAKC,kBAAV,EACA;OACC,KAAKA,kBAAL,GAA0B,KAAKF,kBAAL,CAAwBG,oBAAxB,GAA+C1G,cAA/C,CAA8D,KAAKuG,kBAAnE,CAA1B;;;KAGD,OAAO,KAAKE,kBAAZ;;;GAGDE,QAAQ,CAACC,YAAD,EACR;KACC,IAAIC,cAAI,CAACC,aAAL,CAAmBF,YAAnB,CAAJ,EACA;OACCA,YAAY,CAACG,WAAb,CAAyB,KAAK5G,UAAL,EAAzB;;;;GAIFA,UAAU,GACV;KACC,KAAK6G,QAAL,GAAgB3G,aAAG,CAACC,MAApB,oBAA2B;;;OAA3B,CAGwB;;;;QAHxB,CAOsB;QAPtB,CAQ6B;;OAR7B,CAU2B;;;GAV3B,GAGK,KAAK2G,WAAL,EAHL,EAOM,KAAKC,QAAL,EAPN,EAQM,KAAKC,eAAL,EARN,EAUK,KAAKC,cAAL,EAVL;KAeA,OAAO,KAAKJ,QAAZ;;;GAGDC,WAAW,GACX;KACC,OAAO5G,aAAG,CAACC,MAAX,sBAAkB,wDAAlB,CAAoH,UAApH,GAAyE,KAAKiG,kBAAL,CAAwBc,gBAAxB,EAAzE;;;GAGDH,QAAQ,GACR;KACC,OAAO,KAAKX,kBAAL,CAAwBe,iBAAxB,EAAP;;;GAGDH,eAAe,GACf;KACC,KAAKI,YAAL,GAAoBlH,aAAG,CAACC,MAAxB,sBAA+B;;;;;GAA/B;KAMA,OAAO,KAAKiH,YAAZ;;;GAGDC,aAAa,CAACC,IAAD,EACb;KACC,KAAKT,QAAL,CAAcU,SAAd,GAA0B,8BAA1B;;KACA,QAAQD,IAAR;OAEC,KAAK,KAAKlB,kBAAL,CAAwBoB,cAA7B;SACCrC,aAAG,CAACsC,QAAJ,CAAa,KAAKZ,QAAlB,EAA4B,YAA5B;SACA,KAAKa,qBAAL,CAA2B,KAAKC,cAAL,CAAoB,KAAKvB,kBAAL,CAAwBwB,WAAxB,EAApB,CAA3B;SACA;;OACD,KAAK,KAAKxB,kBAAL,CAAwByB,aAA7B;SACC1C,aAAG,CAACsC,QAAJ,CAAa,KAAKZ,QAAlB,EAA4B,SAA5B;SACA,KAAKa,qBAAL,CAA2BtH,aAAG,CAACC,UAAJ,CAAe,4BAAf,CAA3B;SACA;;OACD,KAAK,KAAK+F,kBAAL,CAAwB0B,cAA7B;SACC3C,aAAG,CAACsC,QAAJ,CAAa,KAAKZ,QAAlB,EAA4B,WAA5B;SACA,KAAKa,qBAAL,CAA2B,EAA3B;SACA;;OACD,KAAK,KAAKtB,kBAAL,CAAwB2B,oBAA7B;SACC5C,aAAG,CAACsC,QAAJ,CAAa,KAAKZ,QAAlB,EAA4B,UAA5B;SACA,KAAKa,qBAAL,CAA2BtH,aAAG,CAACC,UAAJ,CAAe,oCAAf,CAA3B;SACA;;OACD,KAAK,KAAK+F,kBAAL,CAAwB4B,oBAA7B;SACC,KAAKN,qBAAL,CAA2B,EAA3B;SACA;;;;GAIHA,qBAAqB,CAACO,IAAD,EACrB;KACC,MAAMC,kBAAkB,GAAG,KAAKd,YAAL,CAAkBnB,aAAlB,CAAgC,8BAAhC,CAA3B;;KACA,IAAIS,cAAI,CAACC,aAAL,CAAmBuB,kBAAnB,CAAJ,EACA;OACCA,kBAAkB,CAACC,SAAnB,GAA+BC,cAAI,CAACC,MAAL,CAAYJ,IAAZ,EAAkBK,WAAlB,EAA/B;;;;GAIFrB,cAAc,GACd;KACC,IAAI,CAACP,cAAI,CAACC,aAAL,CAAmB,KAAK4B,WAAxB,CAAL,EACA;OACC,KAAKA,WAAL,GAAmBrI,aAAG,CAACC,MAAvB,sBAA8B;MAA9B,CACwB;MADxB,CAEoB;UAFpB,GACG,KAAKqI,aAAL,EADH,EAEG,KAAKC,SAAL,EAFH;OAKAC,eAAK,CAACC,IAAN,CAAW,KAAKC,UAAhB,EAA4B,OAA5B,EAAqC,KAAKC,eAAL,CAAqBF,IAArB,CAA0B,IAA1B,CAArC;;;KAGD,OAAO,KAAKJ,WAAZ;;;GAGDO,aAAa,GACb;KACC3D,aAAG,CAACC,KAAJ,CAAU,KAAKmD,WAAf;KACA,KAAKK,UAAL,GAAkB,KAAKL,WAAL,CAAiB3B,WAAjB,CAA6B,KAAK4B,aAAL,EAA7B,CAAlB;KACA,KAAKO,MAAL,GAAc,KAAKR,WAAL,CAAiB3B,WAAjB,CAA6B,KAAK6B,SAAL,EAA7B,CAAd;;;GAGDA,SAAS,GACT;KACC,QAAQ,KAAKrC,kBAAL,CAAwB4C,SAAxB,EAAR;OAEC,KAAK,KAAK5C,kBAAL,CAAwBoB,cAA7B;SACC,KAAKuB,MAAL,GAAc7I,aAAG,CAACC,MAAlB,sBAAyB;;QAAzB,CAEgD;UAFhD,GAEIC,aAAG,CAACC,UAAJ,CAAe,2BAAf,CAFJ;SAIA;;OACD,KAAK,KAAK+F,kBAAL,CAAwByB,aAA7B;SACC,KAAKkB,MAAL,GAAc7I,aAAG,CAACC,MAAlB,sBAAyB;;QAAzB,CAE+C;UAF/C,GAEIC,aAAG,CAACC,UAAJ,CAAe,0BAAf,CAFJ;SAIA;;OACD,KAAK,KAAK+F,kBAAL,CAAwB0B,cAA7B;SACC,KAAKiB,MAAL,GAAc7I,aAAG,CAACC,MAAlB,sBAAyB;;QAAzB,CAEgD;UAFhD,GAEIC,aAAG,CAACC,UAAJ,CAAe,2BAAf,CAFJ;SAIA;;OACD,KAAK,KAAK+F,kBAAL,CAAwB4B,oBAA7B;SACC,KAAKe,MAAL,GAAc7I,aAAG,CAACC,MAAlB,kBAAyB;;QAAzB,CAEsD;UAFtD,GAEIC,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAFJ;SAIAqI,eAAK,CAACC,IAAN,CAAW,KAAKI,MAAhB,EAAwB,OAAxB,EAAiC,KAAKF,eAAL,CAAqBF,IAArB,CAA0B,IAA1B,CAAjC;SACA;;OACD,KAAK,KAAKvC,kBAAL,CAAwB2B,oBAA7B;SACC,KAAKgB,MAAL,GAAc7I,aAAG,CAACC,MAAlB,kBAAyB;;QAAzB,CAEgD;UAFhD,GAEIC,aAAG,CAACC,UAAJ,CAAe,2BAAf,CAFJ;SAIA;;;KAEF,OAAO,KAAK0I,MAAZ;;;GAGDP,aAAa,GACb;KACC,KAAKI,UAAL,GAAkB1I,aAAG,CAACC,MAAtB,oBAA6B;;;;WAA7B;KAKA,OAAO,KAAKyI,UAAZ;;;GAGDC,eAAe,CAACI,CAAD,EACf;KACC,MAAMzJ,MAAM,GAAG,KAAK4G,kBAAL,CAAwB4C,SAAxB,EAAf;;KAEA,IAAI,CAAC,KAAK5C,kBAAL,CAAwBoB,cAAzB,EAAyC,KAAKpB,kBAAL,CAAwByB,aAAjE,EAAgFqB,QAAhF,CAAyF1J,MAAzF,CAAJ,EACA;OACC,IAAI,KAAK4G,kBAAL,CAAwB+C,OAAxB,EAAJ,EACA;SACC,KAAK/C,kBAAL,CAAwBgD,QAAxB,CAAiC,KAAKL,MAAtC;QAFD,MAIK,IAAI,KAAK3C,kBAAL,CAAwBzB,gBAAxB,EAAJ,EACL;SACC,KAAKyB,kBAAL,CAAwBiD,0BAAxB,CAAmD,KAAKjD,kBAAL,CAAwBkD,aAAxB,EAAnD;QAFI,MAKL;SACC,KAAKlD,kBAAL,CAAwBmD,wBAAxB;;MAZF,MAeK,IAAG/J,MAAM,KAAK,KAAK4G,kBAAL,CAAwB4B,oBAAtC,EACL;OACC,KAAK3B,qBAAL,GAA6BmD,mBAA7B;;;;GAIF7B,cAAc,CAAC8B,IAAD,EACd;KACC,MAAMC,GAAG,GAAG,IAAIC,IAAJ,EAAZ;KACA,IAAIC,SAAS,GAAGH,IAAhB;;KACA,IAAI/C,cAAI,CAACmD,MAAL,CAAYJ,IAAZ,CAAJ,EACA;OACCG,SAAS,GAAGE,IAAI,CAACC,KAAL,CAAWN,IAAI,CAACO,OAAL,KAAiB,IAA5B,CAAZ;OACA,MAAMC,UAAU,GAAGC,QAAQ,CAAC,CAACR,GAAG,GAAGD,IAAP,IAAe,IAAhB,CAA3B;;OACA,IAAIQ,UAAU,GAAG,EAAjB,EACA;SACC,OAAO7J,aAAG,CAACC,UAAJ,CAAe,UAAf,CAAP;;;;KAIF,OAAOkC,EAAE,CAACkH,IAAH,CAAQU,MAAR,CACN,CACC,CAAC,UAAD,EAAa,iBAAb,CADD,EAEC,CAAC,GAAD,EAAO,MAAP,CAFD,EAGC,CAAC,GAAD,EAAM,MAAN,CAHD,EAIC,CAAC,GAAD,EAAM,MAAN,CAJD,EAKC,CAAC,MAAD,EAAS,MAAT,CALD,EAMC,CAAC,GAAD,EAAM,MAAN,CAND,EAOC,CAAC,GAAD,EAAM,EAAN,CAPD,CADM,EAUNP,SAVM,CAAP;;;CAtNF;;;;;;;;;;CCAe,MAAMQ,SAAN,CACf;GAOC9K,WAAW,CAACC,OAAD,EACX;KAAA,KAPAuC,qBAOA,GAPwB,sBAOxB;KAAA,KANAuI,aAMA,GANgB,QAMhB;KAAA,KALAtI,YAKA,GALe,GAKf;KAAA,KAJAC,WAIA,GAJc,iBAId;KAAA,KAHAC,KAGA,GAHQ,IAAIC,eAAK,CAACC,WAAV,EAGR;KACC,KAAK3C,MAAL,GAAcD,OAAO,CAACC,MAAtB;KACA,KAAK4C,oBAAL,GAA4B7C,OAAO,CAAC6C,oBAApC;KACA,KAAKC,MAAL,GAAc9C,OAAO,CAAC8C,MAAtB;KACA,KAAKE,EAAL,GAAU+H,MAAM,CAACC,GAAP,CAAWhI,EAAX,IAAiB+H,MAAM,CAAC/H,EAAlC;;;GAGDD,UAAU,GACV;KACCC,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBC,IAAtB,CAA2B,KAAKZ,qBAAhC,EAAuD;OACtDa,eAAe,EAAGC,MAAD,IAAY;SAC5B,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;WACvCD,OAAO,CAAC,KAAK9C,UAAL,EAAD,CAAP;UADM,CAAP;QAFqD;OAMtDgD,kBAAkB,EAAE,KANkC;OAOtDC,MAAM,EAAE;SACPC,MAAM,EAAE,MAAM;WACb,KAAKsH,sBAAL;;QAToD;OAYtDpH,SAAS,EAAE,KAZ2C;OAatDC,KAAK,EAAE,KAAKtB,YAb0C;OActDuB,MAAM,EAAE,KAAKtB;MAdd;;;GAkBDhC,UAAU,GACV;KACC,OAAOE,aAAG,CAACC,MAAX,oBAAkB;;MAAlB,CAE4B;;MAF5B,CAIkC;MAJlC,CAK4B;;;GAL5B,GAEI,KAAKsK,gBAAL,EAFJ,EAII,KAAKC,sBAAL,EAJJ,EAKI,KAAKC,gBAAL,EALJ;;;GAWDF,gBAAgB,GAChB;KACC,OAAOvK,aAAG,CAACC,MAAX,sBAAkB;;;;gDAAlB,CAImF;oDAJnF,CAKuF;;;GALvF,GAI8CC,aAAG,CAACC,UAAJ,CAAe,oBAAf,CAJ9C,EAKkDD,aAAG,CAACC,UAAJ,CAAe,oBAAf,CALlD;;;GAWDqK,sBAAsB,GACtB;KACC,KAAKE,mBAAL,GAA2B1K,aAAG,CAACC,MAA/B,sBAAsC;;;GAAtC;KAKA,OAAO,KAAKyK,mBAAZ;;;GAGDD,gBAAgB,GAChB;KACC,OAAOzK,aAAG,CAACC,MAAX,sBAAkB;;MAAlB,CAEqC;;;MAFrC,CAKqC;;;MALrC,CAQ2B;;GAR3B,GAEI,KAAK0K,yBAAL,EAFJ,EAKI,KAAKC,yBAAL,EALJ,EAQI,KAAKC,eAAL,EARJ;;;GAaDF,yBAAyB,GACzB;KACC,MAAMG,gBAAgB,GAAG9G,MAAM,CAACC,MAAP,CAAc,KAAK/B,oBAAnB,EAAyC0C,MAAzC,CAAgDT,IAAI,IAAI;OAChF,OAAOA,IAAI,CAACU,SAAL,IAAkBV,IAAI,CAAC7E,MAA9B;MADwB,EAEtB+E,MAFsB,GAEb,CAFZ;KAIA,OAAOrE,aAAG,CAACC,MAAX,sBAAkB;yDAAlB,CAC+F;MAD/F,CAE0C;;GAF1C,GACwD6K,gBAAgB,GAAG,aAAH,GAAmB,EAD3F,EAEI5K,aAAG,CAACC,UAAJ,CAAe,qBAAf,CAFJ;;;GAODyK,yBAAyB,GACzB;KACC,MAAMG,IAAI,GAAG/K,aAAG,CAACC,MAAP,sBAAc;;MAAd,CAEqC;;GAFrC,GAENC,aAAG,CAACC,UAAJ,CAAe,0BAAf,CAFM,CAAV;KAKAqI,eAAK,CAACC,IAAN,CAAWsC,IAAX,EAAiB,OAAjB,EAA0B,MAAM;OAC9B,KAAKC,kBAAL,GAA0B,IAAIrJ,kBAAJ,CAAuB;SAChDO,oBAAoB,EAAE,KAAKA,oBADqB;SAEhDC,MAAM,EAAE,KAAKA,MAFmC;SAGhD7C,MAAM,EAAE,KAAKA;QAHY,CAA1B;OAKA,KAAK0L,kBAAL,CAAwB5I,UAAxB;MANF;KASA,OAAO2I,IAAP;;;GAGDF,eAAe,GACf;KACC,MAAME,IAAI,GAAG/K,aAAG,CAACC,MAAP,sBAAc;8CAAd,CACuE;GADvE,GACkCC,aAAG,CAACC,UAAJ,CAAe,oBAAf,CADlC,CAAV;KAGAqI,eAAK,CAACC,IAAN,CAAWsC,IAAX,EAAiB,OAAjB,EAA0B,MAAM;OAC/B,IAAG,KAAK1I,EAAL,CAAQ4I,MAAX,EACA;SACC,KAAK5I,EAAL,CAAQ4I,MAAR,CAAe9J,IAAf,CAAoB,0BAA0B,KAAKgJ,aAAnD;;MAHF;KAOA,OAAOY,IAAP;;;GAGDnH,cAAc,GACd;KACC,MAAMrE,WAAW,GAAG,EAApB;KACA,MAAMwE,KAAK,GAAGC,MAAM,CAACC,MAAP,CAAc,KAAK/B,oBAAnB,CAAd;KACA6B,KAAK,CAACG,OAAN,CAAcC,IAAI,IAClB;OACC,MAAMC,eAAe,GAAGD,IAAI,CAACP,cAAL,EAAxB;;OACA,IAAIQ,eAAe,CAACC,MAAhB,GAAyB,CAA7B,EACA;SACCD,eAAe,CAACF,OAAhB,CAAwBI,UAAU,IAAI;WAErC,IAAIC,oCAAc,CAACC,gBAAf,CAAgCF,UAAhC,KAA+CA,UAAU,CAACG,gBAAX,OAAkC,IAArF,EACA;aACClF,WAAW,CAACmF,IAAZ,CAAiBJ,UAAjB;;UAJF;;MALF;KAeA,OAAO/E,WAAP;;;GAGD+K,sBAAsB,GACtB;KACC,MAAMvG,KAAK,GAAGC,MAAM,CAACC,MAAP,CAAc,KAAK/B,oBAAnB,EAAyC0C,MAAzC,CAAgDT,IAAI,IAAI;OACrE,OAAOA,IAAI,CAACU,SAAL,IAAkBV,IAAI,CAAC+G,SAA9B;MADa,CAAd;KAIA,KAAKC,qBAAL,CAA2BpH,KAA3B;;;GAGDoH,qBAAqB,CAACC,SAAD,EACrB;KACCnG,aAAG,CAACC,KAAJ,CAAU,KAAKwF,mBAAf;KACAU,SAAS,CAAClH,OAAV,CAAmBmH,QAAD,IAAc;OAC/B,MAAMC,aAAa,GAAG,IAAItF,aAAJ,CAAkB;SAACE,kBAAkB,EAAEmF;QAAvC,CAAtB;OACAA,QAAQ,CAACE,gBAAT,CAA0BD,aAA1B;OACAA,aAAa,CAAChF,QAAd,CAAuB,KAAKoE,mBAA5B;OACAY,aAAa,CAACnE,aAAd,CAA4BkE,QAAQ,CAACvC,SAAT,EAA5B;MAJD;;;GAQDnE,kBAAkB,CAACZ,KAAD,EAClB;KACC,MAAMiB,OAAO,GAAG,KAAKvB,oBAAL,EAAhB;KACAwB,aAAG,CAACC,KAAJ,CAAUF,OAAV;KACA,MAAMG,IAAI,GAAG,IAAI9C,EAAE,CAAC+C,QAAH,CAAYC,IAAhB,CAAqB;OACjC5D,EAAE,EAAE,eAD6B;OAEjCsC,KAAK,EAAEA,KAF0B;OAGjCuB,SAAS,EAAEN,OAHsB;OAIjCO,SAAS,EAAE,KAJsB;OAKjCC,YAAY,EAAE,GALmB;OAMjCC,UAAU,EAAE,CANqB;OAOjCC,QAAQ,EAAE,qCAPuB;OAQjCvD,MAAM,EAAE,KAAKA;MARD,CAAb;KAWAgD,IAAI,CAACQ,IAAL;;;GAGDjE,OAAO,CAACpC,MAAD,EAAS4C,oBAAT,EACP;KACC,KAAK5C,MAAL,GAAcA,MAAd;KACA,KAAK4C,oBAAL,GAA4BA,oBAA5B;KACA+C,aAAG,CAACY,OAAJ,CAAYC,QAAQ,CAACC,aAAT,CAAuB,6BAAvB,CAAZ,EAAmE,KAAKH,kBAAxE;KACA,KAAK0E,sBAAL;KACA,KAAKU,kBAAL,CAAwBtJ,OAAxB,CAAgCpC,MAAhC,EAAwC4C,oBAAxC;;;CAvMF;;;;;;;CCFe,MAAMsJ,QAAN,SAAuBnJ,EAAE,CAAC+C,QAAH,CAAYqG,IAAnC,CACf;GACCrM,WAAW,CAAC+E,IAAD,EACX;KACC,MAAM;OACL1C,EAAE,EAAE0C,IAAI,CAACuH;MADV;KAGA,KAAKvH,IAAL,GAAYA,IAAZ;;;GAGDrE,UAAU,GACV;KACC,KAAK6L,QAAL,GAAgB3L,aAAG,CAACC,MAApB,oBAA2B,kCAA3B,CAA6F,YAA7F,CAAgI;;MAAhI,CAEoB;MAFpB,CAGoB;MAHpB,CAI8C;;SAJ9C,GAA4D,KAAK2L,yBAAL,EAA5D,EAAwG,KAAKC,gBAAL,EAAxG,EAEI,KAAKC,QAAL,EAFJ,EAGI,KAAKjF,QAAL,EAHJ,EAIK,KAAKkF,QAAL,KAAkB,KAAKjD,SAAL,EAAlB,GAAqC,EAJ1C;KAQA,KAAK6C,QAAL,CAAcvL,gBAAd,CAA+B,OAA/B,EAAwC,KAAK4L,OAAL,CAAavD,IAAb,CAAkB,IAAlB,CAAxC;KAEA,OAAO,KAAKkD,QAAZ;;;GAGD9E,QAAQ,GACR;KACC,IAAI,CAAC,KAAKoF,MAAL,CAAYC,KAAjB,EACA;OACC,KAAKD,MAAL,CAAYC,KAAZ,GAAoBlM,aAAG,CAACC,MAAxB,sBAAgC;4CAAhC,CAC4F,QAD5F,GACyCoC,EAAE,CAAC8J,IAAH,CAAQC,gBAAR,CAAyB,KAAKjI,IAAL,CAAUkI,YAAV,EAAzB,CADzC;;;KAID,OAAO,KAAKJ,MAAL,CAAYC,KAAnB;;;GAGDJ,QAAQ,GACR;KACC,OAAO9L,aAAG,CAACC,MAAX,sBAAmB;;0EAAnB,CAE+G;UAF/G,GAEwE,SAAS,KAAKkE,IAAL,CAAUmI,WAAV,EAAT,GAAmC,GAF3G;;;GAMDxD,SAAS,GACT;KACC,IAAI,KAAKiD,QAAL,EAAJ,EACA;OACC,OAAO/L,aAAG,CAACC,MAAX,sBAAmB;;IAAnB;;;KAKD,OAAO,EAAP;;;GAGD8L,QAAQ,GACR;KACC,OAAO,KAAK5H,IAAL,CAAUM,gBAAV,EAAP;;;GAGDmH,yBAAyB,GACzB;KACC,IAAI,KAAKG,QAAL,EAAJ,EACA;OACC,IAAI,KAAK5H,IAAL,CAAUoI,aAAV,EAAJ,EACA;SACC,OAAO,6BAAP;QAFD,MAKA;SACC,OAAO,2BAAP;;MARF,MAYA;OACC,OAAO,EAAP;;;;GAIFV,gBAAgB,GAChB;KACC,IAAI,KAAKE,QAAL,EAAJ,EACA;OACC,OAAO,sBAAsB,KAAK5H,IAAL,CAAUqI,YAAV,EAAtB,GAAiD,GAAxD;MAFD,MAKA;OACC,OAAO,EAAP;;;;GAIFR,OAAO,GACP;KACC3J,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,sCAAlB,EAA0D;OACzDC,cAAc,EAAE;SACfC,sBAAsB,EAAE,GADT;SAEfC,oBAAoB,EAAE,KAAK1I,IAAL,CAAU2I,OAAV,EAFP;SAGfC,sBAAsB,EAAE,KAAK5I,IAAL,CAAUoI,aAAV,KAA4B,GAA5B,GAAkC;;MAJ5D;;KAQA,IAAI,KAAKpI,IAAL,CAAU8E,OAAV,EAAJ,EACA;OACC,KAAK9E,IAAL,CAAU+E,QAAV,CAAmB,KAAKyC,QAAxB;MAFD,MAIK,IAAI,KAAKxH,IAAL,CAAUM,gBAAV,EAAJ,EACL;OACC,KAAKN,IAAL,CAAUgF,0BAAV,CAAqC,KAAKhF,IAAL,CAAUiF,aAAV,EAArC;MAFI,MAKL;OACC,KAAKjF,IAAL,CAAUkF,wBAAV;;;;CA/GH;;;;;;;;;CCHe,MAAM2D,kBAAN,CACf;GAKC5N,WAAW,CAACC,OAAO,GAAG,IAAX,EACX;KAAA,KALA4N,QAKA,GALW,IAKX;KAAA,KAJAC,MAIA,GAJS,IAIT;KAAA,KAHAC,cAGA,GAHiB,IAGjB;KACC,KAAKC,aAAL,GAAqBlN,aAAG,CAACC,UAAJ,CAAe,mBAAf,CAArB;KACA,KAAKkN,gBAAL,GAAwBnN,aAAG,CAACC,UAAJ,CAAe,sBAAf,CAAxB;KACA,KAAKmN,cAAL,GAAsBpN,aAAG,CAACC,UAAJ,CAAe,gBAAf,CAAtB;;KAEA,IAAId,OAAO,KAAK,IAAhB,EACA;OACC,KAAK4N,QAAL,GAAgB5K,EAAE,CAAC8J,IAAH,CAAQC,gBAAR,CAAyB/M,OAAO,CAAC4N,QAAjC,CAAhB;OACA,KAAKC,MAAL,GAAc7K,EAAE,CAAC8J,IAAH,CAAQC,gBAAR,CAAyB/M,OAAO,CAAC6N,MAAjC,CAAd;OACA,KAAKC,cAAL,GAAsB9K,EAAE,CAAC8J,IAAH,CAAQC,gBAAR,CAAyB/M,OAAO,CAAC8N,cAAjC,CAAtB;;;;GAIFI,UAAU,GACV;KACC,OAAOvN,aAAG,CAACC,MAAX,oBAAmB;;GAAnB;;;GAKDuN,OAAO,GACP;KACC,OAAOxN,aAAG,CAACC,MAAX,sBAAkB;;;;gEAAlB,CAI8F,yBAJ9F,CAIgJ;;;;;gEAJhJ,CASwG,2BATxG,CASoJ;;;;;gEATpJ,CAcmG,8BAdnG,CAcoJ;;;;;oFAdpJ,CAmBsH;;;;GAnBtH,GAI8DC,aAAG,CAACC,UAAJ,CAAe,eAAf,CAJ9D,EAIsH,KAAKgN,cAAL,IAAuB,EAJ7I,EAS8DjN,aAAG,CAACC,UAAJ,CAAe,yBAAf,CAT9D,EASkI,KAAK+M,MAAL,IAAe,EATjJ,EAc8DhN,aAAG,CAACC,UAAJ,CAAe,oBAAf,CAd9D,EAcgI,KAAK8M,QAAL,IAAiB,EAdjJ,EAmBkF/M,aAAG,CAACC,UAAJ,CAAe,mBAAf,CAnBlF;;;GA0BDsN,YAAY,GACZ;KACC,OAAOzN,aAAG,CAACC,MAAX,sBAAmB;oEAAnB,CACqF;GADrF,GACkE,KAAKmN,aADvE;;;GAKDM,mBAAmB,GACnB;KACC,OAAO1N,aAAG,CAACC,MAAX,sBAAkB;gGAAlB,CACoH;GADpH,GAC8F,KAAKoN,gBADnG;;;GAKDM,aAAa,GACb;KACC,OAAO3N,aAAG,CAACC,MAAX,sBAAkB;kGAAlB,CACoH;GADpH,GACgG,KAAKqN,cADrG;;;GAKDM,gBAAgB,GAChB;KACC,OAAO5N,aAAG,CAACC,MAAX,sBAAkB;;GAAlB;;;CA7EF;;;;;CCAe,MAAM4N,gBAAN,CACf;GASCzO,WAAW,CAACC,OAAO,GAAG,EAAX,EACX;KAAA,KATAyO,MASA,GATS,IAST;KAAA,KARAC,GAQA,GARM,EAQN;KAAA,KAPAC,WAOA,GAPc,GAOd;KAAA,KANAC,kBAMA,GANqB,SAMrB;KAAA,KALAC,iBAKA,GALoB,SAKpB;KAAA,KAJAC,iBAIA,GAJoB,mCAIpB;KAAA,KAHAC,GAGA,GAHM,IAGN;KACC,KAAK1C,IAAL,GAAYrM,OAAO,CAACqM,IAApB;KACA,KAAK2C,YAAL,GAAoBhP,OAAO,CAACgP,YAAR,IAAwB,UAA5C;;;GAGDlN,IAAI,GACJ;;GAGAmN,WAAW,GACX;KACC,KAAKrN,KAAL,GAAa,IAAIsN,gBAAJ,CAAU;OACtBlH,SAAS,EAAE,wBADW;OAEtBmH,SAAS,EAAE,IAFW;OAGtBC,OAAO,EAAE,KAAKC,YAAL,EAHa;OAItBvL,KAAK,EAAE,GAJe;OAKtBwL,cAAc,EAAE,KAAKb,MALC;OAMtB5K,SAAS,EAAE,KANW;OAOtB0L,UAAU,EAAE,IAPU;OAQtBC,SAAS,EAAE;MARC,CAAb;KAUA,KAAK5N,KAAL,CAAWE,IAAX;KAEA,KAAK2N,UAAL,GAAkBC,IAAlB,CAAuB,KAAKC,UAAL,CAAgBvG,IAAhB,CAAqB,IAArB,CAAvB;;;GAGDwG,KAAK,GACL;KACC,KAAKhO,KAAL,CAAWgO,KAAX;;;GAGDP,YAAY,GACZ;KACC,KAAKX,GAAL,CAASzI,SAAT,GAAqBtF,aAAG,CAACC,MAAzB,oBAAiC;;;OAAjC,CAGqB;;;;;oBAHrB,CAQyC,KARzC,CAQ8E;;;;;4DAR9E,CAasG,IAbtG,CAawR;6DAbxR,CAcgG;;4DAdhG,CAgBiF;;SAhBjF,CAkB+C;;;;;GAlB/C,GAGK,KAAK4G,QAAL,EAHL,EAQkB,KAAKsH,iBARvB,EAQ6Ce,kBAAI,CAACC,SAAL,CAAe,KAAKnB,WAApB,CAR7C,EAa0D9N,aAAG,CAACC,UAAJ,CAAe,2BAAf,CAb1D,EAayG,KAAKuL,IAAL,KAAc,QAAd,GAAyB1L,aAAG,CAACC,MAA7B,sBAAqC,0DAArC,CAAyI,iCAAzI,GAA8FC,aAAG,CAACC,UAAJ,CAAe,0BAAf,CAA9F,IAA4K,EAbrR,EAc2DD,aAAG,CAACC,UAAJ,CAAe,oBAAf,CAd3D,EAgB0D,KAAKiP,eAAL,EAhB1D,EAkBOlP,aAAG,CAACC,UAAJ,CAAe,uBAAf,CAlBP;KAyBA+O,kBAAI,CAACG,YAAL,CAAkB,KAAKtB,GAAL,CAASzI,SAAT,CAAmBS,aAAnB,CAAiC,gCAAjC,CAAlB;KAEA,OAAO,KAAKgI,GAAL,CAASzI,SAAhB;;;GAGDgK,iBAAiB,GACjB;KACC,OAAO,KAAKvB,GAAL,CAASzI,SAAT,CAAmBS,aAAnB,CAAiC,MAAM,KAAKoI,iBAA5C,CAAP;;;GAGDW,UAAU,GACV;KACC,OAAO,IAAInM,OAAJ,CAAaC,OAAD,IAAa;OAC/B2M,iBAAO,CAACC,aAAR,CAAsB,CAAC,aAAD,CAAtB,EAAuCT,IAAvC,CAA6CU,OAAD,IAAa;SACxD,IAAIA,OAAO,IAAIA,OAAO,CAACC,MAAvB,EACA;WACC9M,OAAO;;QAHT;MADM,CAAP;;;GAUDoM,UAAU,CAACW,IAAD,EACV;KACC,IAAI,CAACnJ,cAAI,CAACoJ,SAAL,CAAeD,IAAf,CAAL,EACA;OACCA,IAAI,GAAG,KAAKL,iBAAL,EAAP;;;KAGD,KAAKO,gBAAL,GAAwBd,IAAxB,CAA8BhE,IAAD,IAAU;OACtC9F,aAAG,CAACC,KAAJ,CAAUyK,IAAV;OACA,KAAKvB,GAAL,GAAW,IAAIsB,MAAJ,CAAWC,IAAX,EAAiB;SAC3B5H,IAAI,EAAEgD,IADqB;SAE3B5H,KAAK,EAAE,KAAK2M,OAAL,EAFoB;SAG3BC,MAAM,EAAE,KAAKD,OAAL,EAHmB;SAI3BE,SAAS,EAAG,KAAK9B,iBAJU;SAK3B+B,UAAU,EAAG,KAAKhC,kBALS;SAM3BiC,YAAY,EAAGR,MAAM,CAACS,YAAP,CAAoBC;QANzB,CAAX;MAFD;;;GAaDvJ,QAAQ,GACR;KACC,OAAO3G,aAAG,CAACC,UAAJ,CAAe,0BAAf,CAAP;;;GAGD0P,gBAAgB,GAChB;KACC,OAAO,IAAIlN,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;OACvCR,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,mCAAlB,EAAuD;SACtD2D,IAAI,EAAE;WACL3E,IAAI,EAAE,KAAKA,IAAL,GAAY,QAAZ,GAAuB;;QAF/B,EAKCqD,IALD,CAMEuB,QAAD,IAAc;SACb1N,OAAO,CAAC0N,QAAQ,CAACD,IAAT,CAActF,IAAf,CAAP;QAPF,EASClI,MATD;MADM,CAAP;;;GAeDiN,OAAO,GACP;KACC,OAAO,KAAK9B,WAAZ;;;GAGDuC,gBAAgB,GAChB;KACC,OAAO,uCAAuC,KAAKnB,eAAL,EAA9C;;;GAGDA,eAAe,GACf;KACC,OAAO,KAAKf,YAAZ;;;CAhJF;;;;;;;;;;;;;;;CCAO,MAAMmC,iBAAN,SAAgCC,6BAAhC,CACP;GAKCrR,WAAW,CAACC,OAAD,EACX;KACC;KADD,KAJAqR,WAIA,GAJc,GAId;KAEC,KAAKC,iBAAL,CAAuB,8CAAvB;KAEA,KAAKzE,KAAL,GAAa7M,OAAO,CAAC6M,KAArB;KACA,KAAK0E,YAAL,GAAoBvR,OAAO,CAACgP,YAA5B;KACA,KAAKwC,eAAL,GAAuBxR,OAAO,CAACwR,eAA/B;KACA,KAAKC,qBAAL,GAA6BzR,OAAO,CAACyR,qBAArC;KACA,KAAKC,iBAAL,GAAyB1R,OAAO,CAAC0R,iBAAjC;KACA,KAAKC,uBAAL,GAA+B3R,OAAO,CAAC2R,uBAAvC;KACA,KAAKC,eAAL,GAAuB5R,OAAO,CAAC4R,eAA/B;KACA,KAAKC,QAAL,GAAgB7R,OAAO,CAAC6R,QAAxB;KACA,KAAKC,aAAL,GAAqB9R,OAAO,CAAC8R,aAAR,IAAyB,EAA9C;KACA,KAAKC,KAAL,GAAa/R,OAAO,CAAC+R,KAArB;KACA,KAAK/F,QAAL,GAAgBhM,OAAO,CAACgM,QAAxB;KACA,KAAK/G,UAAL,GAAkBjF,OAAO,CAACiF,UAA1B;KACA,KAAK7E,qBAAL,GAA6BJ,OAAO,CAACI,qBAArC;;;GAGoB,OAAdE,cAAc,CAAC0L,QAAD,EAAW/G,UAAU,GAAG,IAAxB,EACrB;KACC,OAAO,IAAI,IAAJ,CAAS+G,QAAT,EAAmB/G,UAAnB,CAAP;;;GAGD+M,wBAAwB,GACxB;KACC,OAAOrR,aAAG,CAACC,MAAX,oBAAkB;;;+CAAlB,CAGmE;;MAHnE,CAK8B;;GAL9B,GAG6C,KAAKqR,cAAL,EAH7C,EAKI,KAAKC,kBAAL,EALJ;;;GAUDC,0BAA0B,GAC1B;KACC,KAAKC,gBAAL,GAAwB,KAAK/D,mBAAL,EAAxB;KACAlF,eAAK,CAACC,IAAN,CAAW,KAAKgJ,gBAAhB,EAAkC,OAAlC,EAA2C,KAAKC,sBAAL,CAA4BjJ,IAA5B,CAAiC,IAAjC,CAA3C;KAEA,MAAMiB,SAAS,GAAG,KAAKpF,UAAL,CAAgBoD,WAAhB,GAA8BoC,OAA9B,KAA0C,IAA5D;KACA,MAAM6H,QAAQ,GAAGjI,SAAS,GACvBwF,kBAAI,CAAC0C,gBAAL,CAAsBlI,SAAtB,IAAmC,GAAnC,GAAyCrH,EAAE,CAACkH,IAAH,CAAQU,MAAR,CAAeiF,kBAAI,CAAC2C,kBAAL,EAAf,EAA0CnI,SAA1C,CADlB,GAEvB,EAFH;KAIA,OAAO1J,aAAG,CAACC,MAAX,sBAAkB;wCAAlB,CACoE;;sDADpE,CAG4E;;;OAH5E,CAMmE;;;QANnE,CASe;;;MATf,CAY0B;;IAZ1B,GACsC,KAAK6R,sBAAL,EADtC,EAGoD,KAAKC,gBAAL,EAHpD,EAMK1P,EAAE,CAAC8J,IAAH,CAAQC,gBAAR,CAAyB,KAAK9H,UAAL,CAAgB0N,iBAAhB,EAAzB,CANL,EASML,QATN,EAYI,KAAKF,gBAZT;;;GAiBDQ,0BAA0B,GAC1B;KACC,OAAOjS,aAAG,CAACC,MAAX,sBAAkB;;;+CAAlB,CAGmE;;;;;SAHnE,CAQmC;;;;;GARnC,GAG6C,KAAKqR,cAAL,EAH7C,EAQO,KAAKY,oBAAL,EARP;;;GAgBDX,kBAAkB,GAClB;KACC,OAAOvR,aAAG,CAACC,MAAX,sBAAkB;KAAlB,CACmC;GADnC,GACG,KAAKkS,wBAAL,EADH;;;GAKDD,oBAAoB,GACpB;KACC,OAAOlS,aAAG,CAACC,MAAX,sBAAkB;KAAlB,CACqC;KADrC,CAE6C;KAF7C,CAG8C;GAH9C,GACG,KAAKuR,0BAAL,EADH,EAEG,KAAKY,kCAAL,EAFH,EAGG,KAAKC,mCAAL,EAHH;;;GAODC,QAAQ,GACR;KACC,IAAIjQ,EAAE,CAAC4I,MAAP,EACA;OACC5I,EAAE,CAAC4I,MAAH,CAAU9J,IAAV,CAAe,0BAA0B,KAAKyP,YAA9C;OACA2B,KAAK,CAACC,cAAN;;;;GAIFC,eAAe,GACf;KACC,OAAO,uCAAuC,KAAK7B,YAAnD;;;GAGDU,cAAc,GACd;KACC,OAAO,KAAKpF,KAAZ;;;GAGD6F,gBAAgB,GAChB;KACC,OAAO,KAAKZ,aAAZ;;;GAGDgB,wBAAwB,GACxB;KACC,OAAOnS,aAAG,CAACC,MAAX,sBAAkB;;mDAAlB,CAEsE;;;QAFtE,CAK2B;;;;SAL3B,CASkC;;;;;uFATlC,CAc8G;UAd9G,CAemD;;;;;;GAfnD,GAEiD,KAAKgR,eAFtD,EAKM,KAAKJ,eALX,EASO,KAAKC,qBATZ,EAcqF,KAAKwB,QAAL,CAAc7J,IAAd,CAAmB,IAAnB,CAdrF,EAeQvI,aAAG,CAACC,UAAJ,CAAe,0BAAf,CAfR;;;GAwBDuS,qBAAqB,GACrB;KACC,MAAMC,kBAAkB,GAAG,KAAKC,gBAAL,EAA3B;KACApK,eAAK,CAACC,IAAN,CAAWkK,kBAAX,EAA+B,OAA/B,EAAwC,KAAKE,wBAAL,CAA8BpK,IAA9B,CAAmC,IAAnC,CAAxC;KAEA,OAAOzI,aAAG,CAACC,MAAX,sBAAkB;;qCAAlB,CAEoD;wCAFpD,CAGyD;;;GAHzD,GAEmC,KAAK6S,WAFxC,EAGsCH,kBAHtC;;;GASDC,gBAAgB,GAChB;KACC,OAAO5S,aAAG,CAACC,MAAX,sBAAkB;;MAAlB,CAE2B;;GAF3B,GAEI,KAAK8S,iBAFT;;;GAODC,WAAW,CAAC3H,QAAD,EACX;KACC,KAAKA,QAAL,GAAgBA,QAAhB;IAlLF;;;GAsLC4H,2BAA2B,CAACxR,EAAD,EAC3B;KACCY,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,wCAAlB,EAA4D;OAC3D2D,IAAI,EAAE;SACL6C,YAAY,EAAEzR,EADT;SAEL0R,eAAe,EAAE,GAFZ;;;MADP,EAMCpE,IAND,CAMM,MAAM;OACX1M,EAAE,CAAC+Q,MAAH;MAPD;;;GAWDC,aAAa,GACb;KACChR,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,4CAAlB,EAAgE;OAC/D2D,IAAI,EAAE;SACLiD,aAAa,EAAE,KAAKC;;MAFtB,EAKCxE,IALD,CAKOuB,QAAD,IAAc;OACnB,KAAKkD,IAAL,CAAU,oBAAV,EAAgC,EAAhC;MAND;;;GAUD9R,OAAO,CAAC4C,UAAD,EACP;KACC,KAAKA,UAAL,GAAkBA,UAAlB;;KACA,IAAI,KAAKA,UAAT,EACA;OACC,KAAK/D,WAAL,CACEX,SADF,CACY,KAAK0E,UAAL,CAAgBwE,SAAhB,EADZ,EAEEjJ,cAFF,CAEiB,CAAC,KAAKyE,UAAN,CAFjB;;;KAKDW,aAAG,CAACY,OAAJ,CAAYC,QAAQ,CAAC2N,cAAT,CAAwB,mBAAxB,CAAZ,EAA0D,KAAKlT,WAAL,CAAiBT,UAAjB,EAA1D;;;GAGDwJ,mBAAmB,GACnB;;GAGAoE,mBAAmB,GACnB;KACC,OAAO1N,aAAG,CAACC,MAAX,sBAAkB;2EAAlB,CACsH;GADtH,GACyEC,aAAG,CAACC,UAAJ,CAAe,4BAAf,CADzE;;;GAKD2R,sBAAsB,GACtB;KACC,OAAO,KAAKzG,QAAL,CAAcvC,SAAd,OAA8B,SAA9B,GAA0C,YAA1C,GAAyD,SAAhE;;;GAGDsJ,kCAAkC,GAClC;KACC,OAAOpS,aAAG,CAACC,MAAX,wBAAkB;8CAAlB,CAC2F;GAD3F,GAC4CC,aAAG,CAACC,UAAJ,CAAe,8BAAf,CAD5C;;;GAKDkS,mCAAmC,GACnC;KACC,OAAOrS,aAAG,CAACC,MAAX,oBAAkB;;MAAlB,CAEwC;;GAFxC,GAEI,KAAKyT,4BAAL,EAFJ;;;GAQDA,4BAA4B,GAC5B;KACC,MAAMC,WAAW,GAAG,EAApB;KACA,KAAKA,WAAL,CAAiBzP,OAAjB,CAAyB0P,OAAO,IAAI;OACnCD,WAAW,CAACjP,IAAZ,CAAiB1E,aAAG,CAACC,MAArB,oBAA4B;;;eAA5B,CAGoD;iBAHpD,CAIkD,KAJlD,CAIiG;4DAJjG,CAKmG;;IALnG,GAGYoC,EAAE,CAAC8J,IAAH,CAAQC,gBAAR,CAAyBwH,OAAO,CAAC,IAAD,CAAhC,CAHZ,EAIc,KAAKC,mBAAL,CAAyBpL,IAAzB,CAA8B,IAA9B,CAJd,EAIsDmL,OAAO,CAAC,QAAD,CAAP,KAAsB,GAAtB,GAA4B,SAA5B,GAAwC,EAJ9F,EAKyDvR,EAAE,CAAC8J,IAAH,CAAQC,gBAAR,CAAyBwH,OAAO,CAAC,MAAD,CAAhC,CALzD;MADD;KAWA,OAAOD,WAAP;;;GAGDG,iCAAiC,GACjC;KACC5E,kBAAI,CAAC6E,gBAAL,CACC7T,aAAG,CAACC,UAAJ,CAAe,gCAAf,CADD;;;GAKDuR,sBAAsB,CAACa,KAAD,EACtB;KACC,IAAI/L,cAAI,CAACC,aAAL,CAAmB,KAAKgL,gBAAxB,CAAJ,EACA;OACCxM,aAAG,CAACsC,QAAJ,CAAa,KAAKkK,gBAAlB,EAAoC,CAAC,cAAD,EAAiB,iBAAjB,CAApC;;;KAEDc,KAAK,CAACC,cAAN,GALD;;KAOC,KAAKS,2BAAL,CAAiC,KAAK3O,UAAL,CAAgB0P,KAAhB,EAAjC;;;GAGDC,oBAAoB,CAACxS,EAAD,EACpB;KACCY,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,4CAAlB,EAAgE;OAC/D2D,IAAI,EAAE;SACL6C,YAAY,EAAEzR,EADT;SAEL0R,eAAe,EAAE,GAFZ;;;MADP,EAKGpE,IALH,CAKQ,MAAM;OACb,KAAK1D,QAAL,CAAc6I,WAAd;OACA,KAAK7I,QAAL,CAAczL,SAAd,CAAwB,KAAKyL,QAAL,CAAcvD,oBAAtC;OACA,KAAKuD,QAAL,CAAc8I,gBAAd,GAAiCvL,aAAjC;OACA,KAAKyC,QAAL,CAAc8I,gBAAd,GAAiChN,aAAjC,CAA+C,KAAKkE,QAAL,CAAcvD,oBAA7D;OAEA,KAAK0L,IAAL,CAAU,oBAAV,EAAgC,EAAhC;MAXD;;;CAlSF;CADahD,kBAEL3O,eAAe;CAFV2O,kBAIL4D,gBAAgB;;;;;CCJjB,MAAMC,uBAAN,SAAsC7D,iBAAtC,CACP;GACCpR,WAAW,CAACC,OAAD,EACX;KACC,MAAMA,OAAN;;;GAGDkS,kBAAkB,GAClB;KACC,MAAM+C,UAAU,GAAG,IAAItH,kBAAJ,EAAnB;KACA,MAAMuH,SAAS,GAAGD,UAAU,CAAC/G,UAAX,EAAlB;KACA,MAAMiH,IAAI,GAAGF,UAAU,CAAC9G,OAAX,EAAb;KACA,MAAM3E,MAAM,GAAGyL,UAAU,CAAC7G,YAAX,EAAf;KACA,MAAMgH,aAAa,GAAGH,UAAU,CAAC1G,gBAAX,EAAtB;KACA,MAAM8G,UAAU,GAAG,KAAKvC,wBAAL,EAAnB;KAEAtJ,MAAM,CAACzI,gBAAP,CAAwB,OAAxB,EAAkCmS,KAAD,IAAW;OAC3ClQ,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,sCAAlB,EAA0D;SACzDC,cAAc,EAAE;WACfgI,0BAA0B,EAAE,GADb;WAEfC,eAAe,EAAE,KAAKvJ,QAAL,CAAcyB,OAAd;;QAHnB;OAOA7H,aAAG,CAACsC,QAAJ,CAAasB,MAAb,EAAqB,CAAC,cAAD,EAAiB,iBAAjB,CAArB;OACA0J,KAAK,CAACC,cAAN;OACA,KAAKqC,wBAAL,CAA8BL,IAA9B;MAVD;KAaAvP,aAAG,CAAC6P,MAAJ,CAAWjM,MAAX,EAAmB4L,aAAnB;KACAxP,aAAG,CAAC6P,MAAJ,CAAWL,aAAX,EAA0BD,IAA1B;KACAvP,aAAG,CAAC6P,MAAJ,CAAWN,IAAX,EAAiBD,SAAjB;KAEA,OAAOvU,aAAG,CAACC,MAAX,oBAAkB;KAAlB,CACc;KADd,CAEa;GAFb,GACGyU,UADH,EAEGH,SAFH;;;GAMDrC,oBAAoB,GACpB;KACC,MAAMoC,UAAU,GAAG,IAAItH,kBAAJ,CAAuB;OACzCE,MAAM,EAAE,KAAK5I,UAAL,CAAgByQ,SAAhB,CAA0B7H,MADO;OAEzCD,QAAQ,EAAE,KAAK3I,UAAL,CAAgByQ,SAAhB,CAA0B9H,QAFK;OAGzCE,cAAc,EAAE,KAAK7I,UAAL,CAAgB6I;MAHd,CAAnB;KAKA,MAAMoH,SAAS,GAAGD,UAAU,CAAC/G,UAAX,EAAlB;KACA,MAAMiH,IAAI,GAAGF,UAAU,CAAC9G,OAAX,EAAb;KACA,MAAMkH,UAAU,GAAG,KAAKlD,0BAAL,EAAnB;KACAvM,aAAG,CAAC6P,MAAJ,CAAWN,IAAX,EAAiBD,SAAjB;KAEA,OAAOvU,aAAG,CAACC,MAAX,sBAAkB;KAAlB,CACc;KADd,CAEa;GAFb,GACGyU,UADH,EAEGH,SAFH;;;GAMDM,wBAAwB,CAACL,IAAD,EACxB;KACC,MAAMQ,EAAE,GAAG,IAAIC,QAAJ,CAAaT,IAAb,CAAX;KACAnS,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,qCAAlB,EAAyD;OACxD2D,IAAI,EAAE;SACL6E,IAAI,EAAEF,EAAE,CAACG,GAAH,CAAO,MAAP,CADD;SAELjI,MAAM,EAAE8H,EAAE,CAACG,GAAH,CAAO,QAAP,CAFH;SAGLlI,QAAQ,EAAE+H,EAAE,CAACG,GAAH,CAAO,WAAP,CAHL;SAILC,IAAI,EAAEJ,EAAE,CAACG,GAAH,CAAO,UAAP;;MALR,EAOGpG,IAPH,CAOSuB,QAAD,IAAc;OACrBjO,EAAE,CAAC+Q,MAAH;MARD,EASG9C,QAAQ,IAAI;OACd,MAAMzH,MAAM,GAAG2L,IAAI,CAACzO,aAAL,CAAmB,iBAAnB,CAAf;OACA,KAAKsP,cAAL,CAAoB/E,QAAQ,CAACgF,MAAT,CAAgB,CAAhB,CAApB,EAAwCzM,MAAxC;MAXD;;;GAeDwM,cAAc,CAACE,KAAD,EAAQ1M,MAAR,EACd;KACC,IAAI2M,OAAO,GAAG,EAAd;;KACA,IAAID,KAAK,CAACE,IAAN,KAAe,sBAAnB,EACA;OACCD,OAAO,GAAGtV,aAAG,CAACC,UAAJ,CAAe,qCAAf,CAAV;MAFD,MAIK,IAAIoV,KAAK,CAACE,IAAN,KAAe,cAAnB,EACL;OACCD,OAAO,GAAGtV,aAAG,CAACC,UAAJ,CAAe,6BAAf,CAAV;MAFI,MAKL;OACCqV,OAAO,GAAGtV,aAAG,CAACC,UAAJ,CAAe,wBAAf,CAAV;;;KAGD,MAAMuV,UAAU,GAAG,IAAIrT,EAAE,CAACsT,EAAH,CAAMC,OAAN,CAAcC,UAAlB,CAA6B;OAC/CL,OAAO,EAAEA,OADsC;OAE/CtJ,KAAK,EAAEqJ,KAAK,CAACC,OAFkC;OAG/CM,OAAO,EAAEzT,EAAE,CAACsT,EAAH,CAAMC,OAAN,CAAcG,iBAAd,CAAgCC,EAHM;OAI/CC,SAAS,EAAE/V,aAAG,CAACC,UAAJ,CAAe,oCAAf,CAJoC;OAK/C+V,QAAQ,EAAE,GALqC;OAM/CC,gBAAgB,EAAE,KAN6B;OAO/CC,YAAY,EAAE;SACbtI,MAAM,EAAE,IADK;SAEbiC,MAAM,EAAE,GAFK;SAGb5M,KAAK,EAAE,GAHM;SAIbkE,SAAS,EAAE;QAXmC;OAa/CgP,IAAI,EAAE,MAAM;SACXpR,aAAG,CAACqR,WAAJ,CAAgBzN,MAAhB,EAAwB,CAAC,cAAD,EAAiB,iBAAjB,CAAxB;SACA,OAAO,IAAP;;MAfiB,CAAnB;KAmBA6M,UAAU,CAACvU,IAAX;;;CA7GF;;CCFe,MAAMoV,cAAN,SAA6BlC,uBAA7B,CACf;GACCjV,WAAW,CAACiM,QAAD,EAAW/G,UAAU,GAAG,IAAxB,EACX;KACC,MAAM;OACL4H,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,uBAAf,CADF;OAELkO,YAAY,EAAE,SAFT;OAGLwC,eAAe,EAAE3Q,aAAG,CAACC,UAAJ,CAAe,6BAAf,CAHZ;OAIL2Q,qBAAqB,EAAE5Q,aAAG,CAACC,UAAJ,CAAe,gCAAf,CAJlB;OAKL4Q,iBAAiB,EAAE7Q,aAAG,CAACC,UAAJ,CAAe,gCAAf,CALd;OAML6Q,uBAAuB,EAAE9Q,aAAG,CAACC,UAAJ,CAAe,iCAAf,CANpB;OAOL8Q,eAAe,EAAE,yCAPZ;OAQLC,QAAQ,EAAE,yCARL;OASLE,KAAK,EAAE,SATF;OAUL/F,QAAQ,EAAEA,QAVL;OAWL/G,UAAU,EAAEA,UAXP;OAYL7E,qBAAqB,EAAE;MAZxB;;;CAHF;;;;;;;CCAe,MAAM+W,gBAAN,SAA+BhG,iBAA/B,CACf;GACCpR,WAAW,CAACiM,QAAD,EAAW/G,UAAU,GAAG,IAAxB,EACX;KACC,MAAM;OACL4H,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,yBAAf,CADF;OAELkO,YAAY,EAAE,SAFT;OAGLwC,eAAe,EAAE3Q,aAAG,CAACC,UAAJ,CAAe,+BAAf,CAHZ;OAIL2Q,qBAAqB,EAAE5Q,aAAG,CAACC,UAAJ,CAAe,kCAAf,CAJlB;OAKL4Q,iBAAiB,EAAE7Q,aAAG,CAACC,UAAJ,CAAe,kCAAf,CALd;OAML6Q,uBAAuB,EAAE9Q,aAAG,CAACC,UAAJ,CAAe,mCAAf,CANpB;OAOL8Q,eAAe,EAAE,yCAPZ;OAQLE,aAAa,EAAE,YARV;OASLD,QAAQ,EAAE,2CATL;OAULE,KAAK,EAAE,SAVF;OAWL/F,QAAQ,EAAEA,QAXL;OAYL/G,UAAU,EAAEA,UAZP;OAaL7E,qBAAqB,EAAE;MAbxB;;;GAiBDyS,oBAAoB,GACpB;KACC,OAAOlS,aAAG,CAACC,MAAX,oBAAkB;KAAlB,CACqC;KADrC,CAEyB;KAFzB,CAG2B;GAH3B,GACG,KAAKuR,0BAAL,EADH,EAEG,KAAKiF,cAAL,EAFH,EAGG,KAAKC,gBAAL,EAHH;;;GAODlF,0BAA0B,GAC1B;KAEC,MAAM9H,SAAS,GAAG,KAAKpF,UAAL,CAAgBoD,WAAhB,GAA8BoC,OAA9B,KAA0C,IAA5D;KACA,MAAM6H,QAAQ,GAAGjI,SAAS,GACvBwF,kBAAI,CAAC0C,gBAAL,CAAsBlI,SAAtB,IAAmC,GAAnC,GAAyCrH,EAAE,CAACkH,IAAH,CAAQU,MAAR,CAAeiF,kBAAI,CAAC2C,kBAAL,EAAf,EAA0CnI,SAA1C,CADlB,GAEvB,EAFH;KAIA,OAAO1J,aAAG,CAACC,MAAX,sBAAkB;wCAAlB,CACoE;;sDADpE,CAG4E;;;OAH5E,CAMmE;;;QANnE,CASe;;;;IATf,GACsC,KAAK6R,sBAAL,EADtC,EAGoD,KAAKC,gBAAL,EAHpD,EAMK1P,EAAE,CAAC8J,IAAH,CAAQC,gBAAR,CAAyB,KAAK9H,UAAL,CAAgB0N,iBAAhB,EAAzB,CANL,EASML,QATN;;;GAgBD8E,cAAc,GACd;KACC,OAAOzW,aAAG,CAACC,MAAX,sBAAkB;;MAAlB,CAEwD;;GAFxD,GAEIC,aAAG,CAACC,UAAJ,CAAe,mCAAf,CAFJ;;;GAODuW,gBAAgB,GAChB;KACC,OAAO1W,aAAG,CAACC,MAAX,sBAAkB;;oFAAlB,CAE2G;OAF3G,CAGgD;;;GAHhD,GAEkF,KAAKqS,QAAL,CAAc7J,IAAd,CAAmB,IAAnB,CAFlF,EAGKvI,aAAG,CAACC,UAAJ,CAAe,0BAAf,CAHL;;;CAhEF;;;;;;;;;;;;;;;;;CCAe,MAAMwW,UAAN,SAAyBlG,6BAAzB,CACf;;GAYCrR,WAAW,GACX;KACC;KADD,KAZAwX,IAYA,GAZO,WAYP;KAAA,KAXAC,WAWA,GAXc,6BAWd;KAAA,KAVAhV,YAUA,GAVe,GAUf;KAAA,KATAC,WASA,GATc,iBASd;KAAA,KARAC,KAQA,GARQ,IAAIC,eAAK,CAACC,WAAV,EAQR;KAAA,KAPA6U,cAOA,GAPiB,EAOjB;KAAA,KANAC,WAMA,GANc,EAMd;KAAA,KALA5M,aAKA,GALgB,QAKhB;KAAA,KAJA6M,sBAIA,GAJyB,IAIzB;KAAA,KAHAC,cAGA,GAHiB,IAGjB;KAEC,KAAKtG,iBAAL,CAAuB,uCAAvB;KAEA,KAAKtO,EAAL,GAAU+H,MAAM,CAACC,GAAP,CAAWhI,EAAX,IAAiB+H,MAAM,CAAC/H,EAAlC;KAEA,KAAK6U,sBAAL,GAA8B,KAAKC,kBAAL,CAAwB1O,IAAxB,CAA6B,IAA7B,CAA9B;KACA,KAAK2O,wBAAL,GAAgC3N,IAAI,CAACD,GAAL,EAAhC;KACA,KAAK6N,aAAL,GAAqB,EAArB;;;GAGDjV,UAAU,GACV;KACCC,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBC,IAAtB,CAA2B,KAAKqU,WAAhC,EAA6C;OAC5CpU,eAAe,EAAEC,MAAM,IAAI;SAC1B,OAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;WACvCD,OAAO,CAAC,KAAK9C,UAAL,EAAD,CAAP;UADM,CAAP;QAF2C;OAM5CgD,kBAAkB,EAAE,KANwB;OAO5CC,MAAM,EAAE;SACPC,MAAM,EAAE,MAAM;WACb,KAAKsU,iBAAL;WACA,KAAKC,mBAAL;UAHM;SAKPC,SAAS,EAAE,KAAKC,iBAAL,CAAuBhP,IAAvB,CAA4B,IAA5B;QAZgC;OAc5CvF,SAAS,EAAE,KAdiC;OAe5CC,KAAK,EAAE,KAAKtB,YAfgC;OAgB5CuB,MAAM,EAAE,KAAKtB;MAhBd;KAmBA,KAAKY,MAAL,GAAcL,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBmV,YAAtB,EAAd;KACA,KAAKC,cAAL,GAAsB,KAAtB;KACA,KAAKC,WAAL,GAAmB,KAAnB;;;GAGD9X,UAAU,GACV;KACC,OAAOE,aAAG,CAACC,MAAX,oBAAkB;;;;QAAlB,CAI6B;QAJ7B,CAKkC;QALlC,CAMkC;QANlC,CAO6B;QAP7B,CAQkC;QARlC,CASgC;QAThC,CAU8B;;;;GAV9B,GAIM,KAAK4X,eAAL,EAJN,EAKM,KAAKC,oBAAL,EALN,EAMM,KAAKC,oBAAL,EANN,EAOM,KAAKC,eAAL,EAPN,EAQM,KAAKC,oBAAL,EARN,EASM,KAAKC,kBAAL,EATN,EAUM,KAAKtK,gBAAL,EAVN;;;GAiBDiK,eAAe,GACf;KACC,KAAKM,gBAAL,GAAwBnY,aAAG,CAACC,MAA5B,sBAAmC;;;sDAAnC,CAG4E;;;OAH5E,CAM+B;;;QAN/B,CASiC;;;;GATjC,GAGoD,KAAK8R,gBAAL,EAHpD,EAMK,KAAKqG,kBAAL,EANL,EASM,KAAKC,mBAAL,EATN;KAcA,OAAO,KAAKF,gBAAZ;;;GAGDL,oBAAoB,GACpB;KACC,KAAKQ,iBAAL,GAAyBtY,aAAG,CAACC,MAA7B,sBAAoC,+CAApC;KACA,OAAO,KAAKqY,iBAAZ;;;GAGDP,oBAAoB,GACpB;KACC,KAAKQ,iBAAL,GAAyBvY,aAAG,CAACC,MAA7B,sBAAoC;;;sDAApC,CAG6F;wDAH7F,CAI+F;;;GAJ/F,GAGoDC,aAAG,CAACC,UAAJ,CAAe,wBAAf,CAHpD,EAIsDD,aAAG,CAACC,UAAJ,CAAe,wBAAf,CAJtD;KAQA,OAAO,KAAKoY,iBAAZ;;;GAGDP,eAAe,GACf;KACC,KAAKQ,YAAL,GAAoBxY,aAAG,CAACC,MAAxB,sBAA+B;;;;;SAA/B,CAK0C;;QAL1C,CAOyC;;;GAPzC,GAKOC,aAAG,CAACC,UAAJ,CAAe,kBAAf,CALP,EAOMD,aAAG,CAACC,UAAJ,CAAe,kBAAf,CAPN;KAWA,OAAO,KAAKqY,YAAZ;;;GAGDN,kBAAkB,GAClB;KACC,KAAKO,eAAL,GAAuBzY,aAAG,CAACC,MAA3B,sBAAkC;;GAAlC;KAGA,OAAO,KAAKwY,eAAZ;;;GAGDR,oBAAoB,GACpB;KACC,KAAKS,iBAAL,GAAyB1Y,aAAG,CAACC,MAA7B,sBAAoC;;GAApC;KAGA,OAAO,KAAKyY,iBAAZ;;;GAGD9K,gBAAgB,GAChB;KACC,KAAK6G,aAAL,GAAqBzU,aAAG,CAACC,MAAzB,sBAAgC;;;OAAhC,CAG2C;;;OAH3C,CAMqD;;;OANrD,CASuC;;;GATvC,GAGKC,aAAG,CAACC,UAAJ,CAAe,qBAAf,CAHL,EAMKD,aAAG,CAACC,UAAJ,CAAe,+BAAf,CANL,EASKD,aAAG,CAACC,UAAJ,CAAe,iBAAf,CATL;KAcA,OAAO,KAAKsU,aAAZ;;;GAGDkE,sBAAsB,GACtB;KACC,KAAKC,mBAAL,GAA2B5Y,aAAG,CAACC,MAA/B,sBAAsC;;GAAtC;KAGA,OAAO,KAAK2Y,mBAAZ;;;GAGDC,kBAAkB,GAClB;KACC,KAAKC,eAAL,GAAuB9Y,aAAG,CAACC,MAA3B,wBAAkC;;;;;;;;;;iDAAlC,CAUuE;;;GAVvE,GAU+C,KAAK8Y,gBAAL,EAV/C;KAcA,OAAO,KAAKD,eAAZ;;;GAGDC,gBAAgB,GAChB;KACC,OAAO,EAAP;;;GAGDpO,yBAAyB,GACzB;KACC,MAAMG,gBAAgB,GAAG9G,MAAM,CAACC,MAAP,CAAc,KAAK/B,oBAAnB,EAAyC0C,MAAzC,CAAgDT,IAAI,IAAI;OAChF,OAAOA,IAAI,CAACU,SAAL,IAAkBV,IAAI,CAAC7E,MAA9B;MADwB,EAEtB+E,MAFsB,GAEb,CAFZ;KAIA,OAAOrE,aAAG,CAACC,MAAX,wBAAkB;yDAAlB,CAC+F;MAD/F,CAE0C;;GAF1C,GACwD6K,gBAAgB,GAAG,aAAH,GAAmB,EAD3F,EAEI5K,aAAG,CAACC,UAAJ,CAAe,qBAAf,CAFJ;;;GAODiY,kBAAkB,GAClB;KACC,IAAI,CAAC5R,cAAI,CAACC,aAAL,CAAmB,KAAKuS,eAAxB,CAAL,EACA;OACC,KAAKA,eAAL,GAAuBhZ,aAAG,CAACC,MAA3B,wBAAkC;+CAAlC,CACkE;GADlE,GAC4C,KAAKgZ,cAAL,EAD5C;;;KAID,OAAO,KAAKD,eAAZ;;;GAGDE,cAAc,CAACC,KAAD,EACd;KACC,KAAKpC,WAAL,GAAmBoC,KAAnB;;;GAGDF,cAAc,GACd;KACC,OAAO,KAAKlC,WAAZ;;;GAGDsB,mBAAmB,GACnB;KACC,IAAI,CAAC7R,cAAI,CAACC,aAAL,CAAmB,KAAK2S,gBAAxB,CAAL,EACA;OACC,KAAKA,gBAAL,GAAwBpZ,aAAG,CAACC,MAA5B,oBAAmC;YAAnC,CACqE;IADrE,GACSC,aAAG,CAACC,UAAJ,CAAe,6BAAf,EAA8CiI,WAA9C,EADT;;;KAID,OAAO,KAAKgR,gBAAZ;;;GAGDC,aAAa,GACb;KACC,KAAKvC,cAAL,GAAsB,EAAtB;;;GAGDwC,aAAa,GACb;KACC,OAAO,KAAKxC,cAAZ;;;GAGDyC,eAAe,GACf;KACC,OAAO,KAAKpP,aAAZ;;;GAGDmN,iBAAiB,GACjB;KACCrS,aAAG,CAACC,KAAJ,CAAU,KAAKoT,iBAAf;KACA,KAAKgB,aAAL,GAAqBpV,OAArB,CAA6BsV,KAAK,IAAI;OACrCA,KAAK,CAAClT,QAAN,CAAe,KAAKgS,iBAApB;MADD;;;GAKDf,mBAAmB,GACnB;KACC,MAAMkC,cAAc,GAAG,KAAKhF,aAAL,CAAmB1O,aAAnB,CAAiC,mCAAjC,CAAvB;;KACA,IAAIS,cAAI,CAACC,aAAL,CAAmBgT,cAAnB,CAAJ,EACA;OACCjR,eAAK,CAACC,IAAN,CAAWgR,cAAX,EAA2B,OAA3B,EAAoC,KAAKC,yBAAL,CAA+BjR,IAA/B,CAAoC,IAApC,CAApC;;;KAGD,MAAMkR,SAAS,GAAG,KAAKlF,aAAL,CAAmB1O,aAAnB,CAAiC,6CAAjC,CAAlB;;KACA,IAAIS,cAAI,CAACC,aAAL,CAAmBkT,SAAnB,CAAJ,EACA;OACCnR,eAAK,CAACC,IAAN,CAAWkR,SAAX,EAAsB,OAAtB,EAA+B,KAAKC,2BAAL,CAAiCnR,IAAjC,CAAsC,IAAtC,CAA/B;;;;GAIFiR,yBAAyB,GACzB;KACC,KAAKG,cAAL;;;GAGDA,cAAc,GACd;KACC,KAAKlC,cAAL,GAAsB,IAAtB;KAEA,MAAMgC,SAAS,GAAG,KAAKlF,aAAL,CAAmB1O,aAAnB,CAAiC,6CAAjC,CAAlB;;KACA,IAAIS,cAAI,CAACC,aAAL,CAAmBkT,SAAnB,CAAJ,EACA;OACCA,SAAS,CAACG,KAAV,CAAgBC,OAAhB,GAA0B,EAA1B;;;KAGD,MAAMN,cAAc,GAAG,KAAKhF,aAAL,CAAmB1O,aAAnB,CAAiC,mCAAjC,CAAvB;;KACA,IAAIS,cAAI,CAACC,aAAL,CAAmBgT,cAAnB,CAAJ,EACA;OACCA,cAAc,CAACK,KAAf,CAAqBC,OAArB,GAA+B,MAA/B;;;KAGD,KAAKC,qBAAL;KACA,KAAKC,mBAAL;KACA,KAAKC,qBAAL;KACA,KAAKC,qBAAL;KAEAjL,kBAAI,CAACkL,KAAL,GAAa5R,KAAb,CAAmBiI,YAAnB,CAAgC4J,SAAhC,CACC,sBADD,EAEC,KAAKnD,sBAFN;KAKA,KAAK1D,IAAL,CAAU,wBAAV;;;GAGD8G,cAAc,GACd;KACC,OAAO,KAAK3C,cAAZ;;;GAGDiC,2BAA2B,GAC3B;KACCvX,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBgY,cAAtB,GAAuCrW,OAAvC,CAA+CxB,MAAM,IACrD;OACC,IAAI,CAAC,sBAAD,EAAyB,yBAAzB,EAAoD,KAAKmU,WAAzD,EAAsE7N,QAAtE,CAA+EtG,MAAM,CAAC8X,MAAP,EAA/E,CAAJ,EACA;SACC9X,MAAM,CAACuM,KAAP;;MAJF;KAQA5M,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,sCAAlB,EAA0D;OACzDC,cAAc,EAAE;SACf8N,cAAc,EAAE,uBADD;SAEf7F,eAAe,EAAE,KAAKgC;;MAHxB;;;GAQD8D,iBAAiB,CAACC,SAAD,EACjB;KACC,MAAMC,gBAAgB,GAAGnR,IAAI,CAACD,GAAL,EAAzB;;KACA,IAAIoR,gBAAgB,GAAG,KAAKxD,wBAAxB,GAAmD,KAAKJ,sBAA5D,EACA;OACC,KAAK6D,WAAL,CAAiBF,SAAjB;MAFD,MAKA;OACC/Z,UAAU,CAAC,MAAM;SAChB,KAAK8Z,iBAAL,CAAuBC,SAAvB;QADS,EAEP,KAAK3D,sBAFE,CAAV;;;;GAMF6D,WAAW,CAACF,SAAD,EACX;KACC,IAAI,KAAK/C,WAAT,EACA;OACC;;;KAGD,IAAI+C,SAAS,CAACnB,KAAV,KAAoB,oBAApB,IACAmB,SAAS,CAAC5D,WADV,IAEAvQ,cAAI,CAACC,aAAL,CAAmB,KAAKuS,eAAxB,CAFJ,EAIA;OACC,KAAKE,cAAL,CAAoByB,SAAS,CAAC5D,WAA9B;OACA,KAAKiC,eAAL,CAAqB/Q,SAArB,GAAiCC,cAAI,CAACC,MAAL,CAAYwS,SAAS,CAAC5D,WAAtB,CAAjC;;;KAGD,KAAKK,wBAAL,GAAgC3N,IAAI,CAACD,GAAL,EAAhC;;;GAGDsR,uBAAuB,GACvB;KACC,KAAKnD,cAAL,GAAsB,IAAtB;;KACA,IAAInR,cAAI,CAACC,aAAL,CAAmB,KAAK2S,gBAAxB,CAAJ,EACA;OACC,KAAKA,gBAAL,CAAsBnR,SAAtB,GAAkCC,cAAI,CAACC,MAAL,CAAYjI,aAAG,CAACC,UAAJ,CAAe,yBAAf,EAA0CiI,WAA1C,EAAZ,CAAlC;OACAnD,aAAG,CAAC8V,MAAJ,CAAW,KAAK5C,gBAAL,CAAsBpS,aAAtB,CAAoC,oCAApC,CAAX;;;;GAIFiV,iBAAiB,GACjB;KACC,IAAIxU,cAAI,CAACC,aAAL,CAAmB,KAAKgO,aAAxB,CAAJ,EACA;OACC,KAAKA,aAAL,CAAmBqF,KAAnB,CAAyBC,OAAzB,GAAmC,EAAnC;;;;GAIFkB,iBAAiB,GACjB;KACC,IAAIzU,cAAI,CAACC,aAAL,CAAmB,KAAKgO,aAAxB,CAAJ,EACA;OACC,KAAKA,aAAL,CAAmBqF,KAAnB,CAAyBC,OAAzB,GAAmC,MAAnC;;;;GAIFmB,qBAAqB,GACrB;KACC,IAAI1U,cAAI,CAACC,aAAL,CAAmB,KAAK8R,iBAAxB,CAAJ,EACA;OACC,KAAKA,iBAAL,CAAuBuB,KAAvB,CAA6BC,OAA7B,GAAuC,EAAvC;;;;GAIFI,qBAAqB,GACrB;KACC,IAAI3T,cAAI,CAACC,aAAL,CAAmB,KAAK8R,iBAAxB,CAAJ,EACA;OACC,KAAKA,iBAAL,CAAuBuB,KAAvB,CAA6BC,OAA7B,GAAuC,MAAvC;;;;GAIFoB,gBAAgB,GAChB;KACC,IAAI3U,cAAI,CAACC,aAAL,CAAmB,KAAK+R,YAAxB,CAAJ,EACA;OACC,KAAKA,YAAL,CAAkBsB,KAAlB,CAAwBC,OAAxB,GAAkC,EAAlC;;;;GAIFqB,gBAAgB,GAChB;KACC,IAAI5U,cAAI,CAACC,aAAL,CAAmB,KAAK+R,YAAxB,CAAJ,EACA;OACC,KAAKA,YAAL,CAAkBsB,KAAlB,CAAwBC,OAAxB,GAAkC,MAAlC;;;;GAIFC,qBAAqB,GACrB;KACC,IAAIxT,cAAI,CAACC,aAAL,CAAmB,KAAKiS,iBAAxB,CAAJ,EACA;OACC,KAAKA,iBAAL,CAAuBoB,KAAvB,CAA6BC,OAA7B,GAAuC,EAAvC;;;;GAIFsB,qBAAqB,GACrB;KACC,IAAI7U,cAAI,CAACC,aAAL,CAAmB,KAAKiS,iBAAxB,CAAJ,EACA;OACC,KAAKA,iBAAL,CAAuBoB,KAAvB,CAA6BC,OAA7B,GAAuC,MAAvC;;;;GAIFuB,qBAAqB,GACrB;KACC,IAAI9U,cAAI,CAACC,aAAL,CAAmB,KAAK6R,iBAAxB,CAAJ,EACA;OACC,KAAKA,iBAAL,CAAuBwB,KAAvB,CAA6BC,OAA7B,GAAuC,EAAvC;;;;GAIFG,qBAAqB,GACrB;KACC,IAAI1T,cAAI,CAACC,aAAL,CAAmB,KAAK6R,iBAAxB,CAAJ,EACA;OACC,KAAKA,iBAAL,CAAuBwB,KAAvB,CAA6BC,OAA7B,GAAuC,MAAvC;;;;GAIFE,mBAAmB,GACnB;KACC,IAAIzT,cAAI,CAACC,aAAL,CAAmB,KAAKgS,eAAxB,CAAJ,EACA;OACC,KAAKA,eAAL,CAAqBqB,KAArB,CAA2BC,OAA3B,GAAqC,EAArC;;;;GAIFwB,mBAAmB,GACnB;KACC,IAAI/U,cAAI,CAACC,aAAL,CAAmB,KAAKgS,eAAxB,CAAJ,EACA;OACC,KAAKA,eAAL,CAAqBqB,KAArB,CAA2BC,OAA3B,GAAqC,MAArC;;;;GAIF5C,kBAAkB,CAAC5E,KAAD,EAClB;KACC,IAAIA,KAAK,IAAI/L,cAAI,CAACgV,UAAL,CAAgBjJ,KAAK,CAACkJ,OAAtB,CAAb,EACA;OACC,MAAMpL,IAAI,GAAG;SACZqL,OAAO,EAAEnJ,KAAK,CAACkJ,OAAN,GAAgB,CAAhB,CADG;SAEZ,GAAGlJ,KAAK,CAACkJ,OAAN,GAAgB,CAAhB;QAFJ;;OAKA,IACCpL,IAAI,CAACqL,OAAL,KAAiB,YAAjB,IACGrL,IAAI,CAACsL,QAFT,EAIA;SACC,IAAInV,cAAI,CAACC,aAAL,CAAmB,KAAKiS,iBAAxB,CAAJ,EACA;WACC,MAAMkD,WAAW,GAAG,KAAKlD,iBAAL,CAAuB3S,aAAvB,CAAqC,yBAArC,CAApB;;WACA,IAAIS,cAAI,CAACC,aAAL,CAAmBmV,WAAnB,KAAmC3W,aAAG,CAAC4W,QAAJ,CAAaD,WAAb,EAA0B,YAA1B,CAAvC,EACA;aACC3W,aAAG,CAACqR,WAAJ,CAAgBsF,WAAhB,EAA6B,YAA7B;aACA3W,aAAG,CAACsC,QAAJ,CAAaqU,WAAb,EAA0B,QAA1B;;;;SAIF,MAAME,KAAK,GAAG,IAAIC,oBAAJ,CAAU;WAAE1L,IAAI,EAAEA,IAAI,CAAC2L;UAAvB,CAAd;SACA,KAAKC,eAAL,CAAqBH,KAArB;SAEA5M,kBAAI,CAACkL,KAAL,GAAa5R,KAAb,CAAmBiI,YAAnB,CAAgCyL,WAAhC,CACC,sBADD,EAEC,KAAKhF,sBAFN;SAKA,MAAMyC,SAAS,GAAG,KAAKlF,aAAL,CAAmB1O,aAAnB,CAAiC,6CAAjC,CAAlB;;SACA,IAAIS,cAAI,CAACC,aAAL,CAAmBkT,SAAnB,CAAJ,EACA;WACCA,SAAS,CAAC1R,SAAV,GAAsBC,cAAI,CAACC,MAAL,CAAYjI,aAAG,CAACC,UAAJ,CAAe,uBAAf,CAAZ,CAAtB;WACA8E,aAAG,CAACsC,QAAJ,CAAaoS,SAAb,EAAwB,gBAAxB;WACA1U,aAAG,CAACqR,WAAJ,CAAgBqD,SAAhB,EAA2B,qBAA3B;;;SAGD,KAAKnG,IAAL,CAAU,sBAAV;;;;;GAKHyI,eAAe,CAACH,KAAD,EACf;;KAEC,IAAItV,cAAI,CAACC,aAAL,CAAmB,KAAKqS,eAAxB,CAAJ,EACA;OACC7T,aAAG,CAAC8V,MAAJ,CAAW,KAAKjC,eAAhB;;;KAGD,IAAItS,cAAI,CAACC,aAAL,CAAmB,KAAKmS,mBAAxB,CAAJ,EACA;OACC,KAAKA,mBAAL,CAAyBkB,KAAzB,CAA+BC,OAA/B,GAAyC,EAAzC;OACA9U,aAAG,CAACC,KAAJ,CAAU,KAAK0T,mBAAf;OACA,KAAKA,mBAAL,CAAyBlS,WAAzB,CAAqC,KAAKyV,eAAL,CAAqBL,KAArB,CAArC;;;;GAIFK,eAAe,CAACL,KAAD,EACf;KACC,MAAMM,IAAI,GAAG,IAAI3S,IAAJ,CAASqS,KAAK,CAACM,IAAN,CAAWtS,OAAX,KAAuB,CAACE,QAAQ,CAAC8R,KAAK,CAACzL,IAAN,CAAW,mBAAX,CAAD,CAAR,IAA6C,CAA9C,IAAmD,IAAnF,CAAb;KACA,MAAMgM,EAAE,GAAG,IAAI5S,IAAJ,CAASqS,KAAK,CAACO,EAAN,CAASvS,OAAT,KAAqB,CAACE,QAAQ,CAAC8R,KAAK,CAACzL,IAAN,CAAW,iBAAX,CAAD,CAAR,IAA2C,CAA5C,IAAiD,IAA/E,CAAX;KACA,MAAMiM,aAAa,GAAGF,IAAI,CAACtS,OAAL,EAAtB;KACA,MAAMyS,QAAQ,GAAGla,EAAE,CAACkH,IAAH,CAAQU,MAAR,CAAeiF,kBAAI,CAACsN,iBAAL,EAAf,EAAyCF,aAAa,GAAG,IAAzD,CAAjB;KACA,MAAMG,QAAQ,GAAGvN,kBAAI,CAACwN,UAAL,CAAgBN,IAAI,CAACO,QAAL,EAAhB,EAAiCP,IAAI,CAACQ,UAAL,EAAjC,CAAjB;KACA,MAAMC,MAAM,GAAG3N,kBAAI,CAACwN,UAAL,CAAgBL,EAAE,CAACM,QAAH,EAAhB,EAA+BN,EAAE,CAACO,UAAH,EAA/B,CAAf;KACA,MAAME,SAAS,GAAGhB,KAAK,CAACiB,SAAN,KACd7c,aAAG,CAACC,UAAJ,CAAe,qBAAf,CADc,GAEdsc,QAAQ,GAAG,KAAX,GAAmBI,MAFvB;KAIA,KAAKG,YAAL,GAAoBhd,aAAG,CAACC,MAAxB,oBAA+B;mDAA/B,CAC4F;;OAD5F,CAGc;;QAHd,CAKgD;;;+CALhD,CAQuF;;;8CARvF,CAWqD;;;;iDAXrD,CAe4E;iDAf5E,CAgByD;;;8CAhBzD,CAmBmD;;;;;GAnBnD,GACiD6b,KAAK,CAACiB,SAAN,KAAoB,iBAApB,GAAwC,EADzF,EAGKR,QAHL,EAKMla,EAAE,CAACkH,IAAH,CAAQU,MAAR,CAAe,GAAf,EAAoBqS,aAAa,GAAG,IAApC,CALN,EAQ6Cja,EAAE,CAACkH,IAAH,CAAQU,MAAR,CAAe,GAAf,EAAoBqS,aAAa,GAAG,IAApC,CAR7C,EAW4CG,QAX5C,EAe+CvU,cAAI,CAACC,MAAL,CAAY2T,KAAK,CAACmB,OAAN,EAAZ,CAf/C,EAgB+CH,SAhB/C,EAmB4CD,MAnB5C;KA0BA,OAAO,KAAKG,YAAZ;;;GAGDvF,iBAAiB,GACjB;KACC,KAAK/U,MAAL,GAAc,IAAd;KAEAwM,kBAAI,CAACkL,KAAL,GAAa5R,KAAb,CAAmBiI,YAAnB,CAAgCyL,WAAhC,CACC,sBADD,EAEC,KAAKhF,sBAFN;KAKA,KAAK1D,IAAL,CAAU,SAAV;;;GAGD0J,YAAY,GACZ;KACCtc,UAAU,CAAC,MAAM;OAChB,MAAMuc,EAAE,GAAGjO,kBAAI,CAACkL,KAAL,EAAX;OACA+C,EAAE,CAACxH,EAAH,CAAMyH,QAAN,CAAeC,IAAf,CAAoB;SACnBC,aAAa,EAAE,GADI;SAEnBC,MAAM,EAAE,GAFW;SAGnBC,MAAM,EAAE;WAAEC,CAAC,EAAE,GAAL;WAAUC,CAAC,EAAE;UAHF;SAInB5P,MAAM,EAAGqP,EAAE,CAAC7a,SAAH,CAAaC,QAAb,CAAsBmV,YAAtB,GAAqCiG,SAArC,KAAmD;QAJ7D;MAFS,EAQP,KAAK1G,cARE,CAAV;;;GAWDlF,gBAAgB,GAChB;KACC,OAAO,KAAKsF,aAAZ;;;GAGDuG,SAAS,GACT;KACC,OAAO,KAAKlb,MAAZ;;;GAGDmb,aAAa,GACb;KACC,KAAKjG,WAAL,GAAmB,IAAnB;KACA,KAAKuD,gBAAL;KACA,KAAKhB,qBAAL;KACA,KAAKD,qBAAL;KACA,KAAKc,iBAAL;KACA/V,aAAG,CAACsC,QAAJ,CAAa,KAAK4Q,gBAAlB,EAAoC,SAApC;;KACA,IAAI3R,cAAI,CAACC,aAAL,CAAmB,KAAK2S,gBAAxB,CAAJ,EACA;OACC,KAAKA,gBAAL,CAAsBnR,SAAtB,GAAkCC,cAAI,CAACC,MAAL,CAAYjI,aAAG,CAACC,UAAJ,CAAe,uBAAf,EAAwCiI,WAAxC,EAAZ,CAAlC;;;KAGD,MAAM0V,WAAW,GAAG,KAAKrJ,aAAL,CAAmB1O,aAAnB,CAAiC,mCAAjC,CAApB;;KACA,IAAIS,cAAI,CAACC,aAAL,CAAmBqX,WAAnB,CAAJ,EACA;OACCA,WAAW,CAAChE,KAAZ,CAAkBC,OAAlB,GAA4B,EAA5B;OACAvR,eAAK,CAACC,IAAN,CAAWqV,WAAX,EAAwB,OAAxB,EAAiC,MAAM;SACtCzb,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBgY,cAAtB,GAAuCrW,OAAvC,CAA+CxB,MAAM,IACrD;WACC,IAAI,CAAC,sBAAD,EAAyB,yBAAzB,EAAoD,KAAKmU,WAAzD,EAAsE7N,QAAtE,CAA+EtG,MAAM,CAAC8X,MAAP,EAA/E,CAAJ,EACA;aACC9X,MAAM,CAACuM,KAAP;;UAJF;SAOA5M,EAAE,CAAC+Q,MAAH;QARD;;;KAYD,MAAMqG,cAAc,GAAG,KAAKhF,aAAL,CAAmB1O,aAAnB,CAAiC,mCAAjC,CAAvB;;KACA,IAAIS,cAAI,CAACC,aAAL,CAAmBgT,cAAnB,CAAJ,EACA;OACCA,cAAc,CAACK,KAAf,CAAqBC,OAArB,GAA+B,MAA/B;;;;CA/nBH;;;;CCDe,MAAMgE,aAAN,CACf;GACC3e,WAAW,CAACC,OAAD,EACX;KACC,KAAK6V,IAAL,GAAY7V,OAAO,CAAC6V,IAAR,IAAgB,EAA5B;KACA,KAAKhJ,KAAL,GAAa7M,OAAO,CAAC6M,KAAR,IAAiB,EAA9B;KACA,KAAK8R,UAAL,GAAkB,KAAlB;;;GAGD1X,QAAQ,CAACC,YAAD,EACR;KACC,IAAIC,cAAI,CAACC,aAAL,CAAmBF,YAAnB,CAAJ,EACA;OACCA,YAAY,CAACG,WAAb,CAAyB,KAAK5G,UAAL,EAAzB;;;KAGD2Q,6BAAY,CAAC+C,IAAb,CAAkB,uDAAlB;;;GAGD1T,UAAU,GACV;KACC,KAAKme,WAAL,GAAmBje,aAAG,CAACC,MAAvB,oBAA8B;;uEAA9B,CAEgF;;GAFhF,GAEqE,KAAKiM,KAF1E;KAKA,OAAO,KAAK+R,WAAZ;;;GAGDC,OAAO,GACP;KACC,KAAKF,UAAL,GAAkB,IAAlB;KACA/Y,aAAG,CAACqR,WAAJ,CAAgB,KAAK2H,WAAL,CAAiBlY,aAAjB,CAA+B,eAA/B,CAAhB,EAAiE,YAAjE;;;GAGDoY,SAAS,GACT;KACC,KAAKH,UAAL,GAAkB,KAAlB;KACA/Y,aAAG,CAACsC,QAAJ,CAAa,KAAK0W,WAAL,CAAiBlY,aAAjB,CAA+B,eAA/B,CAAb,EAA8D,YAA9D;;;CArCF;;;;;;CCAe,MAAMqY,gBAAN,SAA+BzH,UAA/B,CACf;GAQCvX,WAAW,GACX;KACC;KADD,KARAwX,IAQA,GARO,QAQP;KAAA,KAPAC,WAOA,GAPc,6BAOd;KAAA,KANAwH,YAMA,GANe,eAMf;KAAA,KALAC,YAKA,GALe,eAKf;KAAA,KAJAC,YAIA,GAJe,sBAIf;KAAA,KAHAC,yBAGA,GAH4B,QAG5B;KAEC,KAAK7N,iBAAL,CAAuB,6CAAvB;KACA,KAAKuI,cAAL,CAAoBhZ,aAAG,CAACC,UAAJ,CAAe,uBAAf,CAApB;KACA,KAAKkZ,aAAL;KACA,KAAKhC,aAAL,GAAqB,UAArB;;;GAGDa,kBAAkB,GAClB;KACC,IAAInN,IAAJ;KACA,KAAK0N,eAAL,GAAuBzY,aAAG,CAACC,MAA3B,oBAAkC;;MAAlC,CAIQ;;GAJR,GAEI8K,IAAI,GAAG/K,aAAG,CAACC,MAAP,sBAAc;OAAd,CAC2C;SAD3C,GACHC,aAAG,CAACC,UAAJ,CAAe,6BAAf,CADG,CAFR;KAQAqI,eAAK,CAACC,IAAN,CAAWsC,IAAX,EAAiB,OAAjB,EAA0B,MAAM;OAC/B,MAAM0T,MAAM,GAAGvP,kBAAI,CAACkL,KAAL,GAAanP,MAA5B;;OACA,IAAGwT,MAAH,EACA;SACCA,MAAM,CAACtd,IAAP,CAAY,0BAA0B,KAAKqd,yBAA3C;;MAJF;KAQA,OAAO,KAAK/F,eAAZ;;;GAGDR,oBAAoB,GACpB;KACC,KAAKS,iBAAL,GAAyB1Y,aAAG,CAACC,MAA7B,sBAAoC;;;;kGAApC,CAIsI;qGAJtI,CAKkJ;8FALlJ,CAM8I;iGAN9I,CAO8I;;;;MAP9I,CAW8B;MAX9B,CAYkC;;GAZlC,GAIgGC,aAAG,CAACC,UAAJ,CAAe,qBAAf,CAJhG,EAKmGD,aAAG,CAACC,UAAJ,CAAe,8BAAf,CALnG,EAM4FD,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAN5F,EAO+FD,aAAG,CAACC,UAAJ,CAAe,8BAAf,CAP/F,EAWI,KAAK0Y,kBAAL,EAXJ,EAYI,KAAKF,sBAAL,EAZJ;KAeA,OAAO,KAAKD,iBAAZ;;;GAGDW,aAAa,GACb;KACC,KAAKvC,cAAL,GAAsB,CACrB,IAAIiH,aAAJ,CAAkB;OACjB7I,IAAI,EAAE,KAAKmJ,YADM;OAEjBnS,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,yBAAf;MAFR,CADqB,EAKrB,IAAI4d,aAAJ,CAAkB;OACjB7I,IAAI,EAAE,KAAKoJ,YADM;OAEjBpS,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,yBAAf;MAFR,CALqB,EASrB,IAAI4d,aAAJ,CAAkB;OACjB7I,IAAI,EAAE,KAAKqJ,YADM;OAEjBrS,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,yBAAf;MAFR,CATqB,CAAtB;;;GAgBD0a,WAAW,CAACF,SAAD,EACX;KACC,MAAME,WAAN,CAAkBF,SAAlB;KAEA,KAAKrB,aAAL,GAAqBpV,OAArB,CAA6BsV,KAAK,IAAI;OACrC,IACCmB,SAAS,CAACnB,KAAV,KAAoB,oBAApB,IACGA,KAAK,CAACtE,IAAN,KAAe,KAAKmJ,YAFxB,EAIA;SACC7E,KAAK,CAAC0E,OAAN;QALD,MAOK,IACJvD,SAAS,CAACnB,KAAV,KAAoB,iBAApB,KACOA,KAAK,CAACtE,IAAN,KAAe,KAAKmJ,YAApB,IAAoC7E,KAAK,CAACtE,IAAN,KAAe,KAAKoJ,YAD/D,CADI,EAIL;SACC9E,KAAK,CAAC0E,OAAN;QALI,MAOA,IAAIvD,SAAS,CAACnB,KAAV,KAAoB,iBAAxB,EACL;SACCA,KAAK,CAAC0E,OAAN;;SACA,IAAI1E,KAAK,CAACtE,IAAN,KAAe,KAAKqJ,YAAxB,EACA;WACC,KAAKzD,uBAAL;WACA,KAAKE,iBAAL;WACA,KAAKE,qBAAL;WACA,KAAKgC,YAAL;WAEA,KAAK1J,IAAL,CAAU,qBAAV;;;MAzBH;;;GA+BDuF,gBAAgB,GAChB;KACC,OAAO7Y,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAAP;;;CAlHF;;CCDe,MAAMue,cAAN,SAA6BlO,iBAA7B,CACf;GAGCpR,WAAW,CAACiM,QAAD,EAAW/G,UAAU,GAAG,IAAxB,EACX;KACC,MAAM;OACL4H,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,uBAAf,CADF;OAELkO,YAAY,EAAE,SAFT;OAGLwC,eAAe,EAAE3Q,aAAG,CAACC,UAAJ,CAAe,6BAAf,CAHZ;OAIL2Q,qBAAqB,EAAE5Q,aAAG,CAACC,UAAJ,CAAe,gCAAf,CAJlB;OAKL4Q,iBAAiB,EAAE7Q,aAAG,CAACC,UAAJ,CAAe,gCAAf,CALd;OAML6Q,uBAAuB,EAAE9Q,aAAG,CAACC,UAAJ,CAAe,iCAAf,CANpB;OAOL8Q,eAAe,EAAE,yCAPZ;OAQLC,QAAQ,EAAE,yCARL;OASLC,aAAa,EAAE,UATV;OAULC,KAAK,EAAE,SAVF;OAWL/F,QAAQ,EAAEA,QAXL;OAYL/G,UAAU,EAAEA,UAZP;OAaL7E,qBAAqB,EAAE;MAbxB;KADD,KAHAkf,uBAGA,GAH0B,GAG1B;KAiBC,KAAKpL,mBAAL,GAA2B,EAA3B;KACA,KAAKI,WAAL,GAAmB,EAAnB;KAEA,KAAKiL,+BAAL,GAAuCrP,iBAAO,CAACsP,QAAR,CAAiB,KAAKC,uBAAtB,EAA+C,KAAKH,uBAApD,EAA6E,IAA7E,CAAvC;;;GAGDI,gBAAgB,GAChB;KACC1c,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,sCAAlB,EAA0D;OACzDC,cAAc,EAAE;SACf8N,cAAc,EAAE,kBADD;SAEf9F,0BAA0B,EAAE,GAFb;SAGfC,eAAe,EAAE;;MAJnB;KAQAvS,EAAE,CAAC8J,IAAH,CAAQlL,KAAR,CAAc,KAAKoK,QAAL,CAAc2T,WAAd,EAAd,EAA2C,GAA3C,EAAgD,GAAhD;KAEAxW,eAAK,CAACC,IAAN,CAAW2B,MAAX,EAAmB,YAAnB,EAAiC,KAAKwU,+BAAtC;KACApW,eAAK,CAACC,IAAN,CAAW2B,MAAX,EAAmB,SAAnB,EAA8B,KAAKwU,+BAAnC;;;GAGDE,uBAAuB,CAACvM,KAAD,EACvB;KACC,IACEnI,MAAM,CAAC6U,QAAP,CAAgBC,IAAhB,KAAyB,oBAA1B,IACI3M,KAAK,CAAClC,IAAN,CAAWnE,KAAX,KAAqB,mBAF1B,EAIA;OACCgD,kBAAI,CAACiQ,UAAL;OACA,KAAK9T,QAAL,CAAc+T,iBAAd,CAAgC,IAAhC;OAEA,KAAK/T,QAAL,CAAcgU,cAAd;OACA,KAAKC,cAAL;OACA,KAAKjU,QAAL,CAAczL,SAAd,CAAwB,KAAKyL,QAAL,CAAcxD,oBAAtC;OACA,KAAKwD,QAAL,CAAc8I,gBAAd,GAAiCvL,aAAjC;;;;GAIF2W,oBAAoB,GACpB;KACC,OAAO,IAAI5c,OAAJ,CAAaC,OAAD,IAAa;OAC/BP,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,+CAAlB,EAAmE;SAClE2D,IAAI,EAAE;WACL6C,YAAY,EAAE,KAAK5O,UAAL,CAAgByQ,SAAhB,CAA0BtT;;QAF1C,EAKCsN,IALD,CAMEuB,QAAD,IAAc;SACb,KAAKqD,WAAL,GAAmBrD,QAAQ,CAACD,IAA5B;SACAzN,OAAO,CAAC0N,QAAQ,CAACD,IAAV,CAAP;QARF,EAUEC,QAAD,IAAc;SACb1N,OAAO,CAAC0N,QAAQ,CAACgF,MAAV,CAAP;QAXF;MADM,CAAP;;;GAkBDzB,mBAAmB,CAACtB,KAAD,EACnB;KACC,KAAKgB,mBAAL,CAAyBhB,KAAK,CAACiN,MAAN,CAAarG,KAAtC,IAA+C5G,KAAK,CAACiN,MAAN,CAAaC,OAA5D;KACA,KAAKpM,aAAL;KACA,KAAKS,iCAAL;;;GAGDuB,cAAc,GACd;KACC,MAAMK,UAAU,GAAG,IAAIG,gCAAJ,CAAe;OACjCxO,SAAS,EAAE,KAAK5F,EADiB;OAEjC+T,OAAO,EAAEtV,aAAG,CAACC,UAAJ,CAAe,+CAAf,CAFwB;OAGjCgD,KAAK,EAAE,GAH0B;OAIjCuc,UAAU,EAAE,EAJqB;OAKjCC,SAAS,EAAE,CALsB;OAMjCC,OAAO,EAAE,CANwB;OAOjCvJ,IAAI,EAAE,MAAM;SACXX,UAAU,CAACzG,KAAX;QARgC;OAUjCgH,SAAS,EAAE,IAVsB;OAWjCH,OAAO,EAAEzT,EAAE,CAACsT,EAAH,CAAMC,OAAN,CAAcG,iBAAd,CAAgCC,EAXR;OAYjCI,YAAY,EAAE;SACbzH,cAAc,EAAE,IADH;SAEbkR,QAAQ,EAAE;;MAdO,CAAnB;KAiBAnK,UAAU,CAACvU,IAAX;;;GAGDmI,mBAAmB,GACnB;KACC,IAAI,KAAK+B,QAAL,CAAcyU,wBAAd,EAAJ,EACA;OACC,KAAKf,gBAAL;MAFD,MAKA;OACC,KAAK1J,cAAL;;;;GAIFiK,cAAc,GACd;KACC,IAAI,CAAC,KAAKS,MAAV,EACA;OACC,KAAKA,MAAL,GAAc,IAAI3B,gBAAJ,EAAd;OACA,KAAK2B,MAAL,CAAY3d,UAAZ;OACA,KAAKiJ,QAAL,CAAc2U,eAAd,CAA8B,KAAKD,MAAnC;;;;GAIF9M,2BAA2B,CAACxR,EAAD,EAC3B;KACC,KAAKwS,oBAAL,CAA0BxS,EAA1B;;;CArIF;;;;;;;;;;;;;;CCHe,MAAMwe,gBAAN,SAA+BxP,6BAA/B,CACf;GAKCrR,WAAW,CAACC,OAAO,GAAG,EAAX,EACX;KACC;KADD,KALAyO,MAKA,GALS,IAKT;KAAA,KAJAC,GAIA,GAJM,EAIN;KAAA,KAHAmS,mBAGA,GAHsB,qBAGtB;KAEC,KAAKxU,IAAL,GAAYrM,OAAO,CAACqM,IAApB;KACA,KAAKiF,iBAAL,CAAuB,yBAAvB;KACA,KAAKwP,UAAL,GAAkB,KAAKC,cAAL,CAAoB3X,IAApB,CAAyB,IAAzB,CAAlB;KACA,KAAK4X,sBAAL,GAA8B,KAAKA,sBAAL,CAA4B5X,IAA5B,CAAiC,IAAjC,CAA9B;KACA,KAAK6X,qBAAL,GAA6B,KAAKA,qBAAL,CAA2B7X,IAA3B,CAAgC,IAAhC,CAA7B;KACA,KAAK8X,cAAL;;;GAGDpf,IAAI,GACJ;KACC,KAAKF,KAAL,GAAa,IAAIsN,gBAAJ,CAAU;OACtBlH,SAAS,EAAE,gDADW;OAEtBmZ,QAAQ,EAAEtgB,aAAG,CAACC,UAAJ,CAAe,uBAAf,CAFY;OAGtBqO,SAAS,EAAE,IAHW;OAItBC,OAAO,EAAE,KAAKC,YAAL,EAJa;OAKtBvL,KAAK,EAAE,GALe;OAMtBsd,SAAS,EAAE,cANW;OAOtB9R,cAAc,EAAE,KAAKb,MAPC;OAQtB5K,SAAS,EAAE,KARW;OAStB0L,UAAU,EAAE,IATU;OAUtBC,SAAS,EAAE,IAVW;OAWtB6R,iBAAiB,EAAE,MAXG;OAYtBC,OAAO,EAAE;SAACC,OAAO,EAAE;QAZG;OAatBC,WAAW,EAAE,IAbS;OActB/K,OAAO,EAAE,CACR,IAAIzT,EAAE,CAACsT,EAAH,CAAMmL,MAAV,CAAiB;SAChB/Y,IAAI,EAAG7H,aAAG,CAACC,UAAJ,CAAe,2BAAf,CADS;SAEhBkH,SAAS,EAAG,8CAFI;SAGhBtE,MAAM,EAAG;WAACge,KAAK,EAAG,KAAKC,SAAL,CAAevY,IAAf,CAAoB,IAApB;;QAHnB,CADQ,EAMR,IAAIpG,EAAE,CAACsT,EAAH,CAAMmL,MAAV,CAAiB;SAChB/Y,IAAI,EAAE7H,aAAG,CAACC,UAAJ,CAAe,sBAAf,CADU;SAEhBkH,SAAS,EAAE,mDAFK;SAGhBtE,MAAM,EAAG;WAACge,KAAK,EAAG,KAAK9R,KAAL,CAAWxG,IAAX,CAAgB,IAAhB;;QAHnB,CANQ,CAda;OA0BtB1F,MAAM,EAAE;SACPke,YAAY,EAAE,KAAKhS,KAAL,CAAWxG,IAAX,CAAgB,IAAhB;;MA3BH,CAAb;KA8BA,KAAKxH,KAAL,CAAWE,IAAX;KAEAqH,eAAK,CAACC,IAAN,CAAW3C,QAAX,EAAqB,SAArB,EAAgC,KAAKqa,UAArC;KACA3X,eAAK,CAACC,IAAN,CAAW3C,QAAX,EAAqB,SAArB,EAAgC,KAAKua,sBAArC;KACA7X,eAAK,CAACC,IAAN,CAAW3C,QAAX,EAAqB,WAArB,EAAkC,KAAKwa,qBAAvC;;;GAGDU,SAAS,GACT;KACC,IAAI,KAAKE,eAAL,EAAJ,EACA;OACC,MAAMC,OAAO,GAAG,KAAKlgB,KAAL,CAAWmgB,UAAX,GAAwB,CAAxB,CAAhB;OACAD,OAAO,CAACE,WAAR,CAAoB,IAApB;OACAF,OAAO,CAACG,WAAR,CAAoB,IAApB;OACA,MAAMC,YAAY,GAAG,KAAKtgB,KAAL,CAAWmgB,UAAX,GAAwB,CAAxB,CAArB;OACAG,YAAY,CAACD,WAAb,CAAyB,IAAzB;;OACA,IAAI,KAAKvT,GAAL,CAASzI,SAAT,CAAmBkc,QAAnB,CAA4B,KAAKzT,GAAL,CAAS0T,UAArC,CAAJ,EACA;SACCxc,aAAG,CAAC8V,MAAJ,CAAW,KAAKhN,GAAL,CAAS0T,UAApB;;;OAGD,KAAKjO,IAAL,CAAU,UAAV,EAAsB,IAAIkO,0BAAJ,CAAc;SACnCrR,IAAI,EAAE;WACLsR,OAAO,EAAE,KAAK5T,GAAL,CAAS6T,YAAT,CAAsBzI,KAAtB,CAA4B0I,QAA5B,GAAuCC,IAAvC,EADJ;WAELC,WAAW,EAAE,KAAKhU,GAAL,CAASiU,gBAAT,CAA0B7I,KAA1B,CAAgC0I,QAAhC,GAA2CC,IAA3C;;QAHO,CAAtB;MAZD,MAoBA;OACC,KAAKG,wBAAL;;;;GAIFf,eAAe,GACf;KACC,OAAO,KAAKnT,GAAL,CAAS6T,YAAT,CAAsBzI,KAAtB,CAA4B0I,QAA5B,GAAuCC,IAAvC,OAAkD,EAAlD,IACH,KAAK/T,GAAL,CAASiU,gBAAT,CAA0B7I,KAA1B,CAAgC0I,QAAhC,GAA2CC,IAA3C,OAAsD,EAD1D;;;GAIDG,wBAAwB,GACxB;KACC,MAAMd,OAAO,GAAG,KAAKlgB,KAAL,CAAWmgB,UAAX,GAAwB,CAAxB,CAAhB;KACAD,OAAO,CAACE,WAAR,CAAoB,KAApB;KACAF,OAAO,CAACG,WAAR,CAAoB,KAApB;KACA,MAAMC,YAAY,GAAG,KAAKtgB,KAAL,CAAWmgB,UAAX,GAAwB,CAAxB,CAArB;KACAG,YAAY,CAACD,WAAb,CAAyB,KAAzB;;KAEA,IAAI,KAAKvT,GAAL,CAAS6T,YAAT,CAAsBzI,KAAtB,CAA4B0I,QAA5B,GAAuCC,IAAvC,OAAkD,EAAtD,EACA;OACC,KAAKI,4BAAL;;;KAED,IAAI,KAAKnU,GAAL,CAASiU,gBAAT,CAA0B7I,KAA1B,CAAgC0I,QAAhC,GAA2CC,IAA3C,OAAsD,EAA1D,EACA;OACC,KAAKK,6BAAL;;;;GAIFD,4BAA4B,GAC5B;KACCjd,aAAG,CAACsC,QAAJ,CAAa,KAAKwG,GAAL,CAAS6T,YAAtB,EAAoC,6BAApC;;KAEA,MAAMQ,iBAAiB,GAAG,MAAM;OAC/Bnd,aAAG,CAACqR,WAAJ,CAAgB,KAAKvI,GAAL,CAAS6T,YAAzB,EAAuC,6BAAvC;OACApZ,eAAK,CAAC6Z,MAAN,CAAa,KAAKtU,GAAL,CAAS6T,YAAtB,EAAoC,QAApC,EAA8CQ,iBAA9C;OACA5Z,eAAK,CAAC6Z,MAAN,CAAa,KAAKtU,GAAL,CAAS6T,YAAtB,EAAoC,OAApC,EAA6CQ,iBAA7C;MAHD;;KAKA5Z,eAAK,CAACC,IAAN,CAAW,KAAKsF,GAAL,CAAS6T,YAApB,EAAkC,QAAlC,EAA4CQ,iBAA5C;KACA5Z,eAAK,CAACC,IAAN,CAAW,KAAKsF,GAAL,CAAS6T,YAApB,EAAkC,OAAlC,EAA2CQ,iBAA3C;;;GAGDD,6BAA6B,GAC7B;KACCld,aAAG,CAACsC,QAAJ,CAAa,KAAKwG,GAAL,CAASiU,gBAAtB,EAAwC,6BAAxC;;KAEA,MAAMI,iBAAiB,GAAG,MAAM;OAC/Bnd,aAAG,CAACqR,WAAJ,CAAgB,KAAKvI,GAAL,CAASiU,gBAAzB,EAA2C,6BAA3C;OACAxZ,eAAK,CAAC6Z,MAAN,CAAa,KAAKtU,GAAL,CAASiU,gBAAtB,EAAwC,QAAxC,EAAkDI,iBAAlD;OACA5Z,eAAK,CAAC6Z,MAAN,CAAa,KAAKtU,GAAL,CAASiU,gBAAtB,EAAwC,OAAxC,EAAiDI,iBAAjD;MAHD;;KAKA5Z,eAAK,CAACC,IAAN,CAAW,KAAKsF,GAAL,CAASiU,gBAApB,EAAsC,QAAtC,EAAgDI,iBAAhD;KACA5Z,eAAK,CAACC,IAAN,CAAW,KAAKsF,GAAL,CAASiU,gBAApB,EAAsC,OAAtC,EAA+CI,iBAA/C;KACA,KAAKrU,GAAL,CAASiU,gBAAT,CAA0BM,KAA1B;;;GAIDC,gBAAgB,GAChB;KACC,MAAMpB,OAAO,GAAG,KAAKlgB,KAAL,CAAWmgB,UAAX,GAAwB,CAAxB,CAAhB;KACAD,OAAO,CAACG,WAAR,CAAoB,KAApB;KACA,MAAMC,YAAY,GAAG,KAAKtgB,KAAL,CAAWmgB,UAAX,GAAwB,CAAxB,CAArB;KACAG,YAAY,CAACD,WAAb,CAAyB,KAAzB;;;GAGD5S,YAAY,GACZ;KACC,KAAKX,GAAL,CAASzI,SAAT,GAAqBtF,aAAG,CAACC,MAAzB,oBAAiC;;MAAjC,CAE6B;;OAF7B,CAI4B;OAJ5B,CAK4B;OAL5B,CAM4B;;;;QAN5B,CAUiC;QAVjC,CAWgC;;;QAXhC,CAciC;QAdjC,CAeqC;;OAfrC,CAiBgC;;;GAjBhC,GAEI,KAAKuiB,iBAAL,EAFJ,EAIK,KAAKC,eAAL,EAJL,EAKK,KAAKC,eAAL,EALL,EAMK,KAAKC,eAAL,EANL,EAUM,KAAKC,mBAAL,EAVN,EAWM,KAAKC,kBAAL,EAXN,EAcM,KAAKC,mBAAL,EAdN,EAeM,KAAKC,uBAAL,EAfN,EAiBK,KAAKC,mBAAL,EAjBL;KAsBA,OAAO,KAAKjV,GAAL,CAASzI,SAAhB;;;GAGDkd,iBAAiB,GACjB;KACC,IAAI,CAAC,KAAKzU,GAAL,CAASkV,SAAd,EACA;OACC,KAAKlV,GAAL,CAASkV,SAAT,GAAqBjjB,aAAG,CAACC,MAAzB,sBAAgC;;;yDAAhC,CAG8F;;IAH9F,GAGsDC,aAAG,CAACC,UAAJ,CAAe,uBAAf,CAHtD;;;KAQD,OAAO,KAAK4N,GAAL,CAASkV,SAAhB;;;GAGDR,eAAe,GACf;KACC,IAAI,CAAC,KAAK1U,GAAL,CAASmV,YAAd,EACA;OACC,KAAKnV,GAAL,CAASmV,YAAT,GAAwBljB,aAAG,CAACC,MAA5B,sBAAmC;;MAAnC,CAEqD;;IAFrD,GAEGC,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAFH;;;KAOD,OAAO,KAAK4N,GAAL,CAASmV,YAAhB;;;GAGDN,mBAAmB,GACnB;KACC,IAAI,CAAC,KAAK7U,GAAL,CAASoV,gBAAd,EACA;OACC,KAAKpV,GAAL,CAASoV,gBAAT,GAA4BnjB,aAAG,CAACC,MAAhC,sBAAuC;;OAAvC,CAEkD;;IAFlD,GAEIC,aAAG,CAACC,UAAJ,CAAe,6BAAf,CAFJ;;;KAOD,OAAO,KAAK4N,GAAL,CAASoV,gBAAhB;;;GAGDR,eAAe,GACf;KACC,IAAI,CAAC,KAAK5U,GAAL,CAASqV,YAAd,EACA;OACC,KAAKrV,GAAL,CAASqV,YAAT,GAAwBpjB,aAAG,CAACC,MAA5B,sBAAmC;;OAAnC,CAEgD;;IAFhD,GAEIC,aAAG,CAACC,UAAJ,CAAe,2BAAf,CAFJ;;;KAOD,OAAO,KAAK4N,GAAL,CAASqV,YAAhB;;;GAGDJ,mBAAmB,GACnB;KACC,IAAI,CAAC,KAAKjV,GAAL,CAASsV,gBAAd,EACA;OACC,KAAKtV,GAAL,CAASsV,gBAAT,GAA4BrjB,aAAG,CAACC,MAAhC,sBAAuC;;OAAvC,CAQI;;IARJ,GAEIC,aAAG,CAACC,UAAJ,CACD,+BADC,EAEF;SACE,gBAAgB,iDADlB;SAEE,cAAc;QAJd,CAFJ;OAYA,MAAM4K,IAAI,GAAG,KAAKgD,GAAL,CAASsV,gBAAT,CAA0Btd,aAA1B,CAAwC,uCAAxC,CAAb;;OACA,IAAIgF,IAAJ,EACA;SACCvC,eAAK,CAACC,IAAN,CAAWsC,IAAX,EAAiB,OAAjB,EAA0B,KAAKuY,YAAL,CAAkB7a,IAAlB,CAAuB,IAAvB,CAA1B;;;;KAIF,OAAO,KAAKsF,GAAL,CAASsV,gBAAhB;;;GAGDX,eAAe,GACf;KACC,IAAI,CAAC,KAAK3U,GAAL,CAAS6T,YAAd,EACA;OACC,KAAK7T,GAAL,CAAS6T,YAAT,GAAwB5hB,aAAG,CAACC,MAA5B,sBAAoC;;;oBAApC,CAGqE;;;IAHrE,GAGiBC,aAAG,CAACC,UAAJ,CAAe,mCAAf,CAHjB;;OAOA,KAAK4N,GAAL,CAAS6T,YAAT,CAAsB2B,OAAtB,GAAgC,MAAM;SACrC,IAAIte,aAAG,CAAC4W,QAAJ,CAAa,KAAK9N,GAAL,CAAS6T,YAAtB,EAAoC,6BAApC,CAAJ,EACA;WACC3c,aAAG,CAACqR,WAAJ,CAAgB,KAAKvI,GAAL,CAAS6T,YAAzB,EAAuC,6BAAvC;WACA3c,aAAG,CAACqR,WAAJ,CAAgB,KAAKvI,GAAL,CAASqV,YAAzB,EAAuC,MAAvC;;QAJF;;OAQA,KAAKrV,GAAL,CAAS6T,YAAT,CAAsB4B,MAAtB,GAA+B,MAAM;SACpC,IACC,CAAC,KAAKC,oBAAL,EAAD,IACG,CAACxe,aAAG,CAAC4W,QAAJ,CAAa,KAAK9N,GAAL,CAAS6T,YAAtB,EAAoC,6BAApC,CAFL,EAIA;WACC3c,aAAG,CAACsC,QAAJ,CAAa,KAAKwG,GAAL,CAAS6T,YAAtB,EAAoC,6BAApC;WACA3c,aAAG,CAACsC,QAAJ,CAAa,KAAKwG,GAAL,CAASqV,YAAtB,EAAoC,MAApC;;QAPF;;;KAYD,OAAO,KAAKrV,GAAL,CAAS6T,YAAhB;;;GAGDkB,mBAAmB,GACnB;KACC,IAAI,CAAC,KAAK/U,GAAL,CAASiU,gBAAd,EACA;OACC,KAAKjU,GAAL,CAASiU,gBAAT,GAA4BhiB,aAAG,CAACC,MAAhC,sBAAwC;;;oBAAxC,CAGuE;;;;IAHvE,GAGiBC,aAAG,CAACC,UAAJ,CAAe,qCAAf,CAHjB;OAQAqI,eAAK,CAACC,IAAN,CAAW,KAAKsF,GAAL,CAASiU,gBAApB,EAAsC,OAAtC,EAA+C,KAAK0B,wBAAL,CAA8Bjb,IAA9B,CAAmC,IAAnC,CAA/C;;;KAGD,OAAO,KAAKsF,GAAL,CAASiU,gBAAhB;;;GAGDe,uBAAuB,GACvB;KACC,IAAI,CAAC,KAAKhV,GAAL,CAAS4V,oBAAd,EACA;OACC,KAAK5V,GAAL,CAAS4V,oBAAT,GAAgC3jB,aAAG,CAACC,MAApC,sBAA2C;;IAA3C;OAGAuI,eAAK,CAACC,IAAN,CAAW,KAAKsF,GAAL,CAAS4V,oBAApB,EAA0C,OAA1C,EAAmD,KAAKC,wBAAL,CAA8Bnb,IAA9B,CAAmC,IAAnC,CAAnD;;;KAGD,OAAO,KAAKsF,GAAL,CAAS4V,oBAAhB;;;GAGDd,kBAAkB,GAClB;KACC,IAAI,CAAC,KAAK9U,GAAL,CAAS8V,eAAd,EACA;OACC,KAAK9V,GAAL,CAAS8V,eAAT,GAA2B7jB,aAAG,CAACC,MAA/B,wBAAsC;0DAAtC,CACuG;IADvG,GACuDC,aAAG,CAACC,UAAJ,CAAe,+BAAf,CADvD;OAGAqI,eAAK,CAACC,IAAN,CAAW,KAAKsF,GAAL,CAAS8V,eAApB,EAAqC,OAArC,EAA8C,KAAKP,YAAL,CAAkB7a,IAAlB,CAAuB,IAAvB,CAA9C;;;KAGD,OAAO,KAAKsF,GAAL,CAAS8V,eAAhB;;;GAGDtD,cAAc,GACd;KACC,IAAI,CAAC,KAAKxS,GAAL,CAAS0T,UAAd,EACA;OACC,KAAK1T,GAAL,CAAS0T,UAAT,GAAsBzhB,aAAG,CAACC,MAA1B,wBAAiC;;kDAAjC,CAEuF;;IAFvF,GAE+CC,aAAG,CAACC,UAAJ,CAAe,uBAAf,CAF/C;;;;GAQF2jB,2BAA2B,GAC3B;KACC,KAAK5B,4BAAL;KACA,KAAKC,6BAAL;KACA,KAAKI,gBAAL;;KACA,IAAI,CAAC,KAAKxU,GAAL,CAASzI,SAAT,CAAmBkc,QAAnB,CAA4B,KAAKzT,GAAL,CAAS0T,UAArC,CAAL,EACA;OACCxc,aAAG,CAAC6P,MAAJ,CAAW,KAAK/G,GAAL,CAAS0T,UAApB,EAAgC,KAAK1T,GAAL,CAASzI,SAAzC;;;;GAIFme,oBAAoB,GACpB;KACC,MAAMM,WAAW,GAAG,mEAApB;KACA,MAAMC,KAAK,GAAG,KAAKjW,GAAL,CAAS6T,YAAT,CAAsBzI,KAAtB,CAA4B0I,QAA5B,GAAuCC,IAAvC,EAAd;;KACA,IAAIkC,KAAK,KAAK,EAAd,EACA;OACC,OAAO,IAAP;;;KAGD,OAAOD,WAAW,CAACE,IAAZ,CAAiBD,KAAjB,CAAP;;;GAGDN,wBAAwB,GACxB;KACC,MAAMQ,iBAAiB,GAAG,uCAA1B;KACA,MAAMF,KAAK,GAAG,KAAKG,oBAAL,CAA0B,KAAKpW,GAAL,CAASiU,gBAAT,CAA0B7I,KAA1B,CAAgC0I,QAAhC,GAA2CC,IAA3C,EAA1B,CAAd;;KACA,IAAIoC,iBAAiB,CAACD,IAAlB,CAAuBD,KAAvB,CAAJ,EACA;OACC/e,aAAG,CAACqR,WAAJ,CAAgB,KAAKvI,GAAL,CAASiU,gBAAzB,EAA2C,6BAA3C;OACA/c,aAAG,CAACqR,WAAJ,CAAgB,KAAKvI,GAAL,CAASsV,gBAAzB,EAA2C,MAA3C;MAHD,MAMA;OACCpe,aAAG,CAACsC,QAAJ,CAAa,KAAKwG,GAAL,CAASiU,gBAAtB,EAAwC,6BAAxC;OACA/c,aAAG,CAACsC,QAAJ,CAAa,KAAKwG,GAAL,CAASsV,gBAAtB,EAAwC,MAAxC;;;;GAIFO,wBAAwB,GACxB;KACC,IAAI3e,aAAG,CAAC4W,QAAJ,CAAa,KAAK9N,GAAL,CAAS4V,oBAAtB,EAA4C,QAA5C,CAAJ,EACA;OACC,KAAK5V,GAAL,CAASiU,gBAAT,CAA0BtW,IAA1B,GAAiC,UAAjC;OACAzG,aAAG,CAACqR,WAAJ,CAAgB,KAAKvI,GAAL,CAAS4V,oBAAzB,EAA+C,QAA/C;MAHD,MAMA;OACC,KAAK5V,GAAL,CAASiU,gBAAT,CAA0BtW,IAA1B,GAAiC,MAAjC;OACAzG,aAAG,CAACsC,QAAJ,CAAa,KAAKwG,GAAL,CAAS4V,oBAAtB,EAA4C,QAA5C;;;;GAIFS,SAAS,GACT;KACC,KAAKrW,GAAL,CAASiU,gBAAT,CAA0B7I,KAA1B,GAAkC,EAAlC;KACA,KAAKpL,GAAL,CAAS6T,YAAT,CAAsBzI,KAAtB,GAA8B,EAA9B;;KACA,IAAIlU,aAAG,CAAC4W,QAAJ,CAAa,KAAK9N,GAAL,CAAS6T,YAAtB,EAAoC,6BAApC,CAAJ,EACA;OACC3c,aAAG,CAACqR,WAAJ,CAAgB,KAAKvI,GAAL,CAAS6T,YAAzB,EAAuC,6BAAvC;;;KAED,IAAI3c,aAAG,CAAC4W,QAAJ,CAAa,KAAK9N,GAAL,CAASiU,gBAAtB,EAAwC,6BAAxC,CAAJ,EACA;OACC/c,aAAG,CAACqR,WAAJ,CAAgB,KAAKvI,GAAL,CAASiU,gBAAzB,EAA2C,6BAA3C;;;KAED,IAAI/c,aAAG,CAAC4W,QAAJ,CAAa,KAAK9N,GAAL,CAASqV,YAAtB,EAAoC,MAApC,CAAJ,EACA;OACCne,aAAG,CAACqR,WAAJ,CAAgB,KAAKvI,GAAL,CAASqV,YAAzB,EAAuC,MAAvC;;;KAED,IAAIne,aAAG,CAAC4W,QAAJ,CAAa,KAAK9N,GAAL,CAASsV,gBAAtB,EAAwC,MAAxC,CAAJ,EACA;OACCpe,aAAG,CAACqR,WAAJ,CAAgB,KAAKvI,GAAL,CAASsV,gBAAzB,EAA2C,MAA3C;;;;GAIFc,oBAAoB,CAACE,QAAD,EACpB;KACC,MAAMC,QAAQ,GAAG,KAAKpE,mBAAL,CAAyBqE,KAAzB,CAA+BF,QAAQ,CAAChgB,MAAxC,EAAgD,KAAK6b,mBAAL,CAAyB7b,MAAzE,CAAjB;KACAggB,QAAQ,IAAIC,QAAZ;KACA,OAAOD,QAAP;;;GAGDf,YAAY,GACZ;KACC,MAAMjV,YAAY,GAAG,UAArB;KACAhE,GAAG,CAAChI,EAAJ,CAAO4I,MAAP,CAAc9J,IAAd,CAAmB,0BAA0BkN,YAA7C;KAEAhM,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,sCAAlB,EAA0D;OACzDC,cAAc,EAAE;SACf8N,cAAc,EAAE,cADD;SAEf+J,wBAAwB,EAAE,GAFX;SAGf5P,eAAe,EAAE;;MAJnB;;;GASDwL,cAAc,CAACrX,CAAD,EACd;KACC,IAAIA,CAAC,CAAC0b,OAAF,KAAcvV,kBAAI,CAACwV,UAAL,CAAgB,OAAhB,CAAlB,EACA;OACC,KAAK1D,SAAL;MAFD,MAIK,IAAIjY,CAAC,CAAC0b,OAAF,KAAcvV,kBAAI,CAACwV,UAAL,CAAgB,QAAhB,CAAlB,EACL;OACC,KAAKzV,KAAL;;;;GAIFoR,sBAAsB,CAACtX,CAAD,EACtB;KACC,IAAIyW,MAAM,GAAGzW,CAAC,CAACyW,MAAF,IAAYzW,CAAC,CAAC4b,UAA3B;KACA,KAAKC,cAAL,GAAsB,CAACpF,MAAM,CAACqF,OAAP,CAAe,kBAAf,CAAvB;;KACA,IAAI,KAAKD,cAAL,IAAuB,KAAKE,gBAA5B,IAAgD,KAAKC,cAAL,EAApD,EACA;OACC,KAAK9V,KAAL;;;;GAIFqR,qBAAqB,CAACvX,CAAD,EACrB;KACC,IAAIyW,MAAM,GAAGzW,CAAC,CAACyW,MAAF,IAAYzW,CAAC,CAAC4b,UAA3B;KACA,KAAKG,gBAAL,GAAwB,CAACtF,MAAM,CAACqF,OAAP,CAAe,kBAAf,CAAzB;;;GAGD5V,KAAK,GACL;KACC,IAAI,KAAKhO,KAAT,EACA;OACC,KAAKA,KAAL,CAAW+jB,OAAX;;;KAEDxc,eAAK,CAAC6Z,MAAN,CAAavc,QAAb,EAAuB,SAAvB,EAAkC,KAAKqa,UAAvC;KACA3X,eAAK,CAAC6Z,MAAN,CAAavc,QAAb,EAAuB,SAAvB,EAAkC,KAAKua,sBAAvC;KACA7X,eAAK,CAAC6Z,MAAN,CAAavc,QAAb,EAAuB,WAAvB,EAAoC,KAAKwa,qBAAzC;KACA,KAAK8D,SAAL;;;GAGDW,cAAc,GACd;KACC,OAAO,CAAC7V,kBAAI,CAACkL,KAAL,GAAa9X,SAAb,CAAuBC,QAAvB,CAAgCmV,YAAhC,EAAR;;;CAheF;;;;CCDe,MAAMuN,gBAAN,SAA+BtO,UAA/B,CACf;GAOCvX,WAAW,GACX;KACC;KADD,KAPAwX,IAOA,GAPO,QAOP;KAAA,KANAC,WAMA,GANc,6BAMd;KAAA,KALAwH,YAKA,GALe,eAKf;KAAA,KAJAC,YAIA,GAJe,sBAIf;KAAA,KAHAC,YAGA,GAHe,eAGf;KAEC,KAAK5N,iBAAL,CAAuB,6CAAvB;KACA,KAAKuI,cAAL,CAAoBhZ,aAAG,CAACC,UAAJ,CAAe,uBAAf,CAApB;KACA,KAAKkZ,aAAL;KACA,KAAKhC,aAAL,GAAqB,UAArB;;;GAGDa,kBAAkB,GAClB;KACC,OAAO,EAAP;;;GAGDD,oBAAoB,GACpB;KACC,KAAKS,iBAAL,GAAyB1Y,aAAG,CAACC,MAA7B,oBAAoC;;;;kGAApC,CAIsI;qGAJtI,CAKkJ;8FALlJ,CAMmJ;iGANnJ,CAO8I;;;;MAP9I,CAW8B;MAX9B,CAYkC;;GAZlC,GAIgGC,aAAG,CAACC,UAAJ,CAAe,qBAAf,CAJhG,EAKmGD,aAAG,CAACC,UAAJ,CAAe,8BAAf,CALnG,EAM4FD,aAAG,CAACC,UAAJ,CAAe,sCAAf,CAN5F,EAO+FD,aAAG,CAACC,UAAJ,CAAe,8BAAf,CAP/F,EAWI,KAAK0Y,kBAAL,EAXJ,EAYI,KAAKF,sBAAL,EAZJ;KAeA,OAAO,KAAKD,iBAAZ;;;GAGDW,aAAa,GACb;KACC,KAAKvC,cAAL,GAAsB,CACrB,IAAIiH,aAAJ,CAAkB;OACjB7I,IAAI,EAAE,KAAKmJ,YADM;OAEjBnS,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,yBAAf;MAFR,CADqB,EAKrB,IAAI4d,aAAJ,CAAkB;OACjB7I,IAAI,EAAE,KAAKoJ,YADM;OAEjBpS,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,yBAAf;MAFR,CALqB,EASrB,IAAI4d,aAAJ,CAAkB;OACjB7I,IAAI,EAAE,KAAKqJ,YADM;OAEjBrS,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,yBAAf;MAFR,CATqB,CAAtB;;;GAgBD0a,WAAW,CAACF,SAAD,EACX;KACC,MAAME,WAAN,CAAkBF,SAAlB;KAEA,KAAKrB,aAAL,GAAqBpV,OAArB,CAA6BsV,KAAK,IAAI;OACrC,IACCmB,SAAS,CAACnB,KAAV,KAAoB,oBAApB,IACGA,KAAK,CAACtE,IAAN,KAAe,KAAKmJ,YAFxB,EAIA;SACC7E,KAAK,CAAC0E,OAAN;QALD,MAOK,IACJvD,SAAS,CAACnB,KAAV,KAAoB,iBAApB,KACOA,KAAK,CAACtE,IAAN,KAAe,KAAKmJ,YAApB,IAAoC7E,KAAK,CAACtE,IAAN,KAAe,KAAKoJ,YAD/D,CADI,EAIL;SACC9E,KAAK,CAAC0E,OAAN;QALI,MAOA,IAAIvD,SAAS,CAACnB,KAAV,KAAoB,iBAAxB,EACL;SACCA,KAAK,CAAC0E,OAAN;;SACA,IAAI1E,KAAK,CAACtE,IAAN,KAAe,KAAKqJ,YAAxB,EACA;WACC,KAAKzD,uBAAL;WACA,KAAKE,iBAAL;WACA,KAAKE,qBAAL;WACA,KAAKgC,YAAL;WAEA,KAAK1J,IAAL,CAAU,qBAAV;;;MAzBH;;;GA+BDuF,gBAAgB,GAChB;KACC,OAAO7Y,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAAP;;;CAhGF;;;;CCFe,MAAM+kB,oBAAN,CACf;GAIC9lB,WAAW,CAACC,OAAO,GAAG,EAAX,EACX;KAAA,KAJAyO,MAIA,GAJS,IAIT;KAAA,KAHAC,GAGA,GAHM,EAGN;KACC,KAAKoX,UAAL,GAAkB9lB,OAAO,CAAC8lB,UAA1B;;;GAGDhkB,IAAI,GACJ;KACC,KAAKF,KAAL,GAAa,IAAIsN,gBAAJ,CAAU;OACtBlH,SAAS,EAAE,gDADW;OAEtBmZ,QAAQ,EAAEtgB,aAAG,CAACC,UAAJ,CAAe,yCAAf,CAFY;OAGtBgD,KAAK,EAAE,GAHe;OAItBqL,SAAS,EAAE,IAJW;OAKtBC,OAAO,EAAE,KAAKC,YAAL,EALa;OAMtBxL,SAAS,EAAE,KANW;OAOtB0L,UAAU,EAAE,IAPU;OAQtBC,SAAS,EAAE,IARW;OAStB6R,iBAAiB,EAAE,MATG;OAUtBC,OAAO,EAAE;SAAEC,OAAO,EAAE;QAVE;OAWtB9K,OAAO,EAAE,CACR,IAAIzT,EAAE,CAACsT,EAAH,CAAMmL,MAAV,CAAiB;SAChB/Y,IAAI,EAAE7H,aAAG,CAACC,UAAJ,CAAe,8CAAf,CADU;SAEhBkH,SAAS,EAAE,iCAFK;SAGhBtE,MAAM,EAAE;WAAEge,KAAK,EAAE,KAAKuC,YAAL,CAAkB7a,IAAlB,CAAuB,IAAvB;;QAHlB,CADQ,EAMR,IAAIpG,EAAE,CAACsT,EAAH,CAAMmL,MAAV,CAAiB;SAChB/Y,IAAI,EAAE7H,aAAG,CAACC,UAAJ,CAAe,qBAAf,CADU;SAEhBkH,SAAS,EAAE,+BAFK;SAGhBtE,MAAM,EAAE;WAAEge,KAAK,EAAE,KAAKqE,cAAL,CAAoB3c,IAApB,CAAyB,IAAzB;;QAHlB,CANQ,CAXa;OAuBtB1F,MAAM,EAAE;SACPke,YAAY,EAAE,KAAKhS,KAAL,CAAWxG,IAAX,CAAgB,IAAhB;;MAxBH,CAAb;KA4BA,KAAKxH,KAAL,CAAWE,IAAX;;;GAGDuN,YAAY,GACZ;KACC,KAAKX,GAAL,CAASzI,SAAT,GAAqBtF,aAAG,CAACC,MAAzB,oBAAgC;;MAAhC,CAE+B;;GAF/B,GAEI,KAAKolB,mBAAL,EAFJ;KAMA,OAAO,KAAKtX,GAAL,CAASzI,SAAhB;;;GAGD+f,mBAAmB,GACnB;KACC,KAAKtX,GAAL,CAAS0T,UAAT,GAAsB,IAAIpf,EAAE,CAACsT,EAAH,CAAM2P,KAAV,CAAgB;OACrCvd,IAAI,EAAE7H,aAAG,CAACC,UAAJ,CAAe,wCAAf,CAD+B;OAErCiR,KAAK,EAAE/O,EAAE,CAACsT,EAAH,CAAM2P,KAAN,CAAYC,KAAZ,CAAkBC,OAFY;OAGrCC,IAAI,EAAEpjB,EAAE,CAACsT,EAAH,CAAM2P,KAAN,CAAYI,IAAZ,CAAiBC;MAHF,CAAtB;KAMA,MAAMrgB,SAAS,GAAG,KAAKyI,GAAL,CAAS0T,UAAT,CAAoB/S,YAApB,EAAlB;KACA,MAAM3G,IAAI,GAAGzC,SAAS,CAACS,aAAV,CAAwB,mBAAxB,CAAb;KACAd,aAAG,CAACsC,QAAJ,CAAaQ,IAAb,EAAmB,kCAAnB;KAEA,OAAOzC,SAAP;;;GAGDge,YAAY,GACZ;KACC,MAAMjV,YAAY,GAAG,UAArB;KACAhE,GAAG,CAAChI,EAAJ,CAAO4I,MAAP,CAAc9J,IAAd,CAAmB,0BAA0BkN,YAA7C;;;GAGDuX,iBAAiB,GACjB;KACCvjB,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,oDAAlB,EAAwEqC,IAAxE,CAA6E,MAAM;OAClF,KAAKoW,UAAL,CAAgBhkB,IAAhB;OACA,KAAK8N,KAAL;OACAC,kBAAI,CAAC2W,yBAAL,CAA+B,KAA/B;OACA3W,kBAAI,CAAC4W,sBAAL,CAA4B,KAA5B;MAJD;;;GAQDV,cAAc,GACd;KACC,KAAKD,UAAL,CAAgBhkB,IAAhB;KACA,KAAK8N,KAAL;;;GAGDA,KAAK,GACL;KACC,IAAI,KAAKhO,KAAT,EACA;OACC,KAAKA,KAAL,CAAW+jB,OAAX;;;;CA9FH;;CCIe,MAAMe,cAAN,SAA6BvV,iBAA7B,CACf;GACCpR,WAAW,CAACiM,QAAD,EAAW/G,UAAU,GAAG,IAAxB,EACX;KACC,MAAM;OACL4H,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,uBAAf,CADF;OAELkO,YAAY,EAAE,SAFT;OAGLwC,eAAe,EAAE3Q,aAAG,CAACC,UAAJ,CAAe,6BAAf,CAHZ;OAIL2Q,qBAAqB,EAAE5Q,aAAG,CAACC,UAAJ,CAAe,gCAAf,CAJlB;OAKL4Q,iBAAiB,EAAE7Q,aAAG,CAACC,UAAJ,CAAe,yBAAf,CALd;OAML6Q,uBAAuB,EAAE9Q,aAAG,CAACC,UAAJ,CAAe,iCAAf,CANpB;OAOL8Q,eAAe,EAAE,yCAPZ;OAQLC,QAAQ,EAAE,yCARL;OASLC,aAAa,EAAE,UATV;OAULC,KAAK,EAAE,SAVF;OAWL/F,QAAQ,EAAEA,QAXL;OAYL/G,UAAU,EAAEA,UAZP;OAaL7E,qBAAqB,EAAE;MAbxB;KAgBA,KAAK8T,mBAAL,GAA2B,EAA3B;KACA,KAAKI,WAAL,GAAmB,EAAnB;;;GAGDoL,gBAAgB,CAAC1O,IAAD,EAChB;KACChO,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,8CAAlB,EAAkE;OACjE2D,IAAI,EAAE;SACLsR,OAAO,EAAEtR,IAAI,CAACsR,OADT;SAELI,WAAW,EAAE1R,IAAI,CAAC0R;;MAHpB,EAKGhT,IALH,CAMEuB,QAAD,IAAc;OACb,MAAM0V,MAAM,GAAG1V,QAAQ,CAACD,IAAxB;;OAEA,IAAI2V,MAAM,CAAC1mB,MAAP,KAAkB,SAAlB,IAA+B0mB,MAAM,CAAC9S,YAA1C,EACA;SACC,KAAKoM,cAAL,CAAoBjP,IAAI,CAACsR,OAAzB;SACA,KAAKsE,uBAAL,CAA6BD,MAAM,CAAC9S,YAApC;;MAZH,EAeE5C,QAAD,IAAc;OACb,MAAM0V,MAAM,GAAG1V,QAAQ,CAACD,IAAxB;;OACA,IAAI2V,MAAM,CAAC1mB,MAAP,KAAkB,oBAAtB,EACA;SACC+C,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,sCAAlB,EAA0D;WACzDC,cAAc,EAAE;aACf8N,cAAc,EAAE,kBADD;aAEfyL,cAAc,EAAE,GAFD;aAGftR,eAAe,EAAE;;UAJnB;;;OASD,KAAKuQ,UAAL,CAAgBrB,2BAAhB;MA5BF;;;GAiCDmC,uBAAuB,CAAC/S,YAAD,EACvB;KACC,KAAKiS,UAAL,CAAgBlW,KAAhB;KAEA,OAAO,IAAItM,OAAJ,CAAaC,OAAD,IAAa;OAC/BP,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,4CAAlB,EAAgE;SAC/D2D,IAAI,EAAE;WACL6C,YAAY,EAAEA;;QAFhB,EAIGnE,IAJH,CAKEuB,QAAD,IAAc;SACb,KAAKjF,QAAL,CAAczL,SAAd,CAAwB,KAAKyL,QAAL,CAAc/D,cAAtC;;SACA,IAAI4L,YAAJ,EACA;WACC,KAAK7H,QAAL,CAAcjC,aAAd,GAA8B+c,KAA9B,CAAoCjT,YAApC;WACA,KAAK7H,QAAL,CAAcjC,aAAd,GAA8BxJ,SAA9B,CAAwC,IAAxC;WACA,KAAKyL,QAAL,CAAcjC,aAAd,GAA8Bgd,YAA9B,CAA2C,IAA3C;WACA,KAAK/a,QAAL,CAAcjC,aAAd,GAA8Bid,WAA9B,CAA0C,IAAI5c,IAAJ,EAA1C;;;SAGD7G,OAAO,CAAC0N,QAAQ,CAACD,IAAV,CAAP;QAfF,EAiBEC,QAAD,IAAc;SACb,KAAKjF,QAAL,CAAczL,SAAd,CAAwB,KAAKyL,QAAL,CAAc1D,aAAtC;SACA,KAAK0D,QAAL,CAAcib,cAAd,CACC;WACChnB,MAAM,EAAE,KAAK+L,QAAL,CAAckb,UADvB;WAECC,UAAU,EAAE,KAAKnb,QAAL,CAAcK;UAH5B;SAMA9I,OAAO,CAAC0N,QAAQ,CAACgF,MAAV,CAAP;QAzBF;MADM,CAAP;;;GA+BDmR,oBAAoB,GACpB;KACC,OAAO,IAAI9jB,OAAJ,CAAaC,OAAD,IAAa;OAC/BP,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,+CAAlB,EAAmE;SAClE2D,IAAI,EAAE;WACL6C,YAAY,EAAE,KAAK5O,UAAL,CAAgByQ,SAAhB,CAA0BtT;;QAF1C,EAKCsN,IALD,CAMEuB,QAAD,IAAc;SACb,KAAKqD,WAAL,GAAmBrD,QAAQ,CAACD,IAA5B;SACAzN,OAAO,CAAC0N,QAAQ,CAACD,IAAV,CAAP;QARF,EAUEC,QAAD,IAAc;SACb1N,OAAO,CAAC0N,QAAQ,CAACgF,MAAV,CAAP;QAXF;MADM,CAAP;;;GAkBDzB,mBAAmB,CAACtB,KAAD,EACnB;KACC,KAAKgB,mBAAL,CAAyBhB,KAAK,CAACiN,MAAN,CAAarG,KAAtC,IAA+C5G,KAAK,CAACiN,MAAN,CAAaC,OAA5D;KACA,KAAKpM,aAAL;KACA,KAAKS,iCAAL;;;GAGDxK,mBAAmB,GACnB;KACCjH,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,sCAAlB,EAA0D;OACzDC,cAAc,EAAE;SACf8N,cAAc,EAAE,kBADD;SAEf9F,0BAA0B,EAAE,GAFb;SAGfC,eAAe,EAAE;;MAJnB;KAQA,KAAK8R,SAAL;;KACA,IAAIxX,kBAAI,CAACyX,iBAAL,MAA4BzX,kBAAI,CAAC0X,cAAL,EAAhC,EACA;OACC,KAAKC,cAAL,CAAoB1lB,IAApB;MAFD,MAKA;OACC,KAAKgkB,UAAL,CAAgBhkB,IAAhB;;;;GAIFulB,SAAS,GACT;KACC,IAAI,CAAC,KAAKvB,UAAV,EACA;OACC,KAAKA,UAAL,GAAkB,IAAIlF,gBAAJ,EAAlB;OAEAxP,6BAAY,CAACqW,cAAb,CAA4B,kCAA5B;OACArW,6BAAY,CAAC4J,SAAb,CAAuB,kCAAvB,EAA4DtR,CAAD,IAAO;SACjE,KAAKgW,gBAAL,CAAsBhW,CAAC,CAACsH,IAAxB;QADD;;;KAKD,IAAI,CAAC,KAAKwW,cAAV,EACA;OACC,KAAKA,cAAL,GAAsB,IAAI3B,oBAAJ,CAAyB;SAC9CC,UAAU,EAAE,KAAKA;QADI,CAAtB;;;;GAMF7F,cAAc,CAACqC,OAAD,EACd;KACC,KAAKtW,QAAL,CAAc+T,iBAAd,CAAgC,IAAhC;KACA,KAAKW,MAAL,GAAc,IAAIkF,gBAAJ,EAAd;KACA,KAAKlF,MAAL,CAAY3d,UAAZ;KACA,KAAKiJ,QAAL,CAAc2U,eAAd,CAA8B,KAAKD,MAAnC;KAEAtP,6BAAY,CAACsW,aAAb,CAA2B,uDAA3B,EAAoF,MAAM;OACzF,KAAKhH,MAAL,CAAYlF,WAAZ,CAAwB;SACvBrB,KAAK,EAAE,oBADgB;SAEvBgN,UAAU,EAAE,QAFW;SAGvBzP,WAAW,EAAE4K;QAHd;MADD;;;GASD1O,2BAA2B,CAACxR,EAAD,EAC3B;KACC,KAAKwS,oBAAL,CAA0BxS,EAA1B;;;CAnLF;;;;CCLe,MAAMulB,mBAAN,SAAkCrQ,UAAlC,CACf;GAOCvX,WAAW,GACX;KACC;KADD,KAPAwX,IAOA,GAPO,WAOP;KAAA,KANAC,WAMA,GANc,gCAMd;KAAA,KALAwH,YAKA,GALe,kBAKf;KAAA,KAJAC,YAIA,GAJe,wBAIf;KAAA,KAHAC,YAGA,GAHe,sBAGf;KAEC,KAAK5N,iBAAL,CAAuB,gDAAvB;KACA,KAAKuI,cAAL,CAAoBhZ,aAAG,CAACC,UAAJ,CAAe,0BAAf,CAApB;KACA,KAAKkZ,aAAL;KACA,KAAKhC,aAAL,GAAqB,aAArB;;;GAGDa,kBAAkB,GAClB;KACC,OAAO,EAAP;;;GAGDD,oBAAoB,GACpB;KACC,KAAKS,iBAAL,GAAyB1Y,aAAG,CAACC,MAA7B,oBAAoC;;;;kGAApC,CAIsI;qGAJtI,CAKqJ;8FALrJ,CAMsJ;iGANtJ,CAO8I;;;;MAP9I,CAW8B;MAX9B,CAYkC;;GAZlC,GAIgGC,aAAG,CAACC,UAAJ,CAAe,qBAAf,CAJhG,EAKmGD,aAAG,CAACC,UAAJ,CAAe,iCAAf,CALnG,EAM4FD,aAAG,CAACC,UAAJ,CAAe,yCAAf,CAN5F,EAO+FD,aAAG,CAACC,UAAJ,CAAe,8BAAf,CAP/F,EAWI,KAAK0Y,kBAAL,EAXJ,EAYI,KAAKF,sBAAL,EAZJ;KAeA,OAAO,KAAKD,iBAAZ;;;GAGDW,aAAa,GACb;KACC,KAAKvC,cAAL,GAAsB,CACrB,IAAIiH,aAAJ,CAAkB;OACjB7I,IAAI,EAAE,KAAKmJ,YADM;OAEjBnS,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,4BAAf;MAFR,CADqB,EAKrB,IAAI4d,aAAJ,CAAkB;OACjB7I,IAAI,EAAE,KAAKoJ,YADM;OAEjBpS,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,4BAAf;MAFR,CALqB,EASrB,IAAI4d,aAAJ,CAAkB;OACjB7I,IAAI,EAAE,KAAKqJ,YADM;OAEjBrS,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,4BAAf;MAFR,CATqB,CAAtB;;;GAgBD0a,WAAW,CAACF,SAAD,EACX;KACC,MAAME,WAAN,CAAkBF,SAAlB;KAEA,KAAKrB,aAAL,GAAqBpV,OAArB,CAA6BsV,KAAK,IAAI;OACrC,IAAImB,SAAS,CAACnB,KAAV,KAAoB,oBAApB,IACAA,KAAK,CAACtE,IAAN,KAAe,KAAKmJ,YADxB,EAEA;SACC7E,KAAK,CAAC0E,OAAN;QAHD,MAKK,IAAIvD,SAAS,CAACnB,KAAV,KAAoB,KAAK8E,YAAzB,KACJ9E,KAAK,CAACtE,IAAN,KAAe,KAAKmJ,YAApB,IAAoC7E,KAAK,CAACtE,IAAN,KAAe,KAAKoJ,YADpD,CAAJ,EAGL;SACC9E,KAAK,CAAC0E,OAAN;QAJI,MAMA,IAAIvD,SAAS,CAACnB,KAAV,KAAoB,KAAK+E,YAA7B,EACL;SACC/E,KAAK,CAAC0E,OAAN;SACA,KAAKpD,uBAAL;SACA,KAAKE,iBAAL;SACA,KAAKE,qBAAL;SACA,KAAKgC,YAAL;SAEA,KAAK1J,IAAL,CAAU,qBAAV;;MApBF;;;GAyBDuF,gBAAgB,GAChB;KACC,OAAO7Y,aAAG,CAACC,UAAJ,CAAe,oCAAf,CAAP;;;CA1FF;;CCCe,MAAM8mB,iBAAN,SAAgCzW,iBAAhC,CACf;GACCpR,WAAW,CAACiM,QAAD,EAAW/G,UAAU,GAAG,IAAxB,EACX;KACC,MAAM;OACL4H,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,0BAAf,CADF;OAELkO,YAAY,EAAE,SAFT;OAGLwC,eAAe,EAAE3Q,aAAG,CAACC,UAAJ,CAAe,gCAAf,CAHZ;OAIL2Q,qBAAqB,EAAE5Q,aAAG,CAACC,UAAJ,CAAe,mCAAf,CAJlB;OAKL4Q,iBAAiB,EAAE7Q,aAAG,CAACC,UAAJ,CAAe,mCAAf,CALd;OAML6Q,uBAAuB,EAAE9Q,aAAG,CAACC,UAAJ,CAAe,oCAAf,CANpB;OAOL8Q,eAAe,EAAE,4CAPZ;OAQLC,QAAQ,EAAE,4CARL;OASLC,aAAa,EAAE,aATV;OAULC,KAAK,EAAE,SAVF;OAWL/F,QAAQ,EAAEA,QAXL;OAYL/G,UAAU,EAAEA,UAZP;OAaL7E,qBAAqB,EAAE;MAbxB;KAgBA,KAAK8T,mBAAL,GAA2B,EAA3B;KACA,KAAKI,WAAL,GAAmB,EAAnB;;;GAGDoL,gBAAgB,GAChB;KACC1c,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,sCAAlB,EAA0D;OACzDC,cAAc,EAAE;SACf8N,cAAc,EAAE,kBADD;SAEf9F,0BAA0B,EAAE,GAFb;SAGfC,eAAe,EAAE;;MAJnB;KAQAvS,EAAE,CAAC8J,IAAH,CAAQlL,KAAR,CAAc,KAAKoK,QAAL,CAAc2T,WAAd,EAAd,EAA2C,GAA3C,EAAgD,GAAhD;KAEAxW,eAAK,CAACC,IAAN,CAAW2B,MAAX,EAAmB,YAAnB,EAAkCmI,KAAD,IAAW;OAC3C,IAAInI,MAAM,CAAC6U,QAAP,CAAgBC,IAAhB,KAAyB,uBAA7B,EACA;SACChQ,kBAAI,CAACiQ,UAAL;SACA,KAAK9T,QAAL,CAAc+T,iBAAd,CAAgC,IAAhC;SACA,KAAKC,cAAL;SACA,KAAKC,cAAL;SACA,KAAKjU,QAAL,CAAczL,SAAd,CAAwB,KAAKyL,QAAL,CAAcxD,oBAAtC;SACA,KAAKwD,QAAL,CAAc8I,gBAAd,GAAiCvL,aAAjC;;MARF;;;GAaDyW,cAAc,GACd;KACC,OAAO,IAAI1c,OAAJ,CAAaC,OAAD,IAAa;OAC/BP,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,iDAAlB,EACEqC,IADF,CAEGuB,QAAD,IAAc;SAAA;;SACb,IAAI,CAAAA,QAAQ,QAAR,8BAAAA,QAAQ,CAAED,IAAV,oCAAgB/Q,MAAhB,MAA2B,KAAK+L,QAAL,CAAckb,UAA7C,EACA;WACC,KAAKlb,QAAL,CAAczL,SAAd,CAAwB,KAAKyL,QAAL,CAAc1D,aAAtC;WACA,KAAK0D,QAAL,CAAcib,cAAd,CACC;aACChnB,MAAM,EAAE,KAAK+L,QAAL,CAAckb,UADvB;aAECC,UAAU,EAAE,KAAKnb,QAAL,CAAcK;YAH5B;UAHD,MAUK,IAAI4E,QAAJ,+BAAIA,QAAQ,CAAED,IAAd,aAAI,gBAAgB6C,YAApB,EACL;WACC,KAAK7H,QAAL,CAAczL,SAAd,CAAwB,KAAKyL,QAAL,CAAc/D,cAAtC;WACA,KAAK+D,QAAL,CAAcjC,aAAd,GAA8B+c,KAA9B,CAAoC7V,QAAQ,CAACD,IAAT,CAAc6C,YAAlD;WACA,KAAK7H,QAAL,CAAcjC,aAAd,GAA8BxJ,SAA9B,CAAwC,IAAxC;WACA,KAAKyL,QAAL,CAAcjC,aAAd,GAA8Bgd,YAA9B,CAA2C,IAA3C;WACA,KAAK/a,QAAL,CAAcjC,aAAd,GAA8Bid,WAA9B,CAA0C,IAAI5c,IAAJ,EAA1C;;;SAED7G,OAAO,CAAC0N,QAAQ,CAACD,IAAV,CAAP;QArBH,EAuBGC,QAAD,IAAc;SACb,KAAKjF,QAAL,CAAczL,SAAd,CAAwB,KAAKyL,QAAL,CAAc1D,aAAtC;SACA,KAAK0D,QAAL,CAAcib,cAAd,CACC;WACChnB,MAAM,EAAE,KAAK+L,QAAL,CAAckb,UADvB;WAECC,UAAU,EAAE,KAAKnb,QAAL,CAAcK;UAH5B;SAMA9I,OAAO,CAAC0N,QAAQ,CAACgF,MAAV,CAAP;QA/BH;MADM,CAAP;;;GAsCDzB,mBAAmB,CAACtB,KAAD,EACnB;KACC,KAAKgB,mBAAL,CAAyBhB,KAAK,CAACiN,MAAN,CAAarG,KAAtC,IAA+C5G,KAAK,CAACiN,MAAN,CAAaC,OAA5D;KACA,KAAKpM,aAAL;KACA,KAAKS,iCAAL;;;GAGDxK,mBAAmB,GACnB;KACC,IAAI,KAAK+B,QAAL,CAAc6b,2BAAd,EAAJ,EACA;OACC,KAAKnI,gBAAL;MAFD,MAKA;OACC,KAAK1J,cAAL;;;;GAIFiK,cAAc,GACd;KACC,KAAKS,MAAL,GAAc,IAAIiH,mBAAJ,EAAd;KACA,KAAKjH,MAAL,CAAY3d,UAAZ;KACA,KAAKiJ,QAAL,CAAc2U,eAAd,CAA8B,KAAKD,MAAnC;;;GAGDoH,uBAAuB,GACvB;KACC,OAAO,IAAIxkB,OAAJ,CAAaC,OAAD,IAAa;OAC/BP,EAAE,CAACoK,IAAH,CAAQC,SAAR,CAAkB,kDAAlB,EAAsE;SACrE2D,IAAI,EAAE;WACL6C,YAAY,EAAE,KAAK5O,UAAL,CAAgByQ,SAAhB,CAA0BtT;;QAF1C,EAKEsN,IALF,CAMGuB,QAAD,IAAc;SACb,KAAKqD,WAAL,GAAmBrD,QAAQ,CAACD,IAA5B;SACAzN,OAAO,CAAC0N,QAAQ,CAACD,IAAV,CAAP;QARH,EAUGC,QAAD,IAAc;SACb1N,OAAO,CAAC0N,QAAQ,CAACgF,MAAV,CAAP;QAXH;MADM,CAAP;;;GAkBDrC,2BAA2B,CAACxR,EAAD,EAC3B;KACC,KAAKwS,oBAAL,CAA0BxS,EAA1B;;;GAGD4T,cAAc,GACd;KACC,MAAMK,UAAU,GAAG,IAAIG,gCAAJ,CAAe;OACjCxO,SAAS,EAAE,KAAK5F,EADiB;OAEjC+T,OAAO,EAAEtV,aAAG,CAACC,UAAJ,CAAe,kDAAf,CAFwB;OAGjCgD,KAAK,EAAE,GAH0B;OAIjCuc,UAAU,EAAE,EAJqB;OAKjCC,SAAS,EAAE,CALsB;OAMjCC,OAAO,EAAE,CANwB;OAOjCvJ,IAAI,EAAE,MAAM;SACXX,UAAU,CAACzG,KAAX;QARgC;OAUjCgH,SAAS,EAAE,IAVsB;OAWjCH,OAAO,EAAEzT,EAAE,CAACsT,EAAH,CAAMC,OAAN,CAAcG,iBAAd,CAAgCC,EAXR;OAYjCI,YAAY,EAAE;SACbzH,cAAc,EAAE,IADH;SAEbkR,QAAQ,EAAE;;MAdO,CAAnB;KAiBAnK,UAAU,CAACvU,IAAX;;;CA9JF;;;;;;CCHe,MAAMimB,WAAN,SAA0B5W,iBAA1B,CACf;GACCpR,WAAW,CAACiM,QAAD,EAAW/G,UAAU,GAAG,IAAxB,EACX;KACC,MAAM;OACL4H,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,oBAAf,CADF;OAELkO,YAAY,EAAE,SAFT;OAGLwC,eAAe,EAAE3Q,aAAG,CAACC,UAAJ,CAAe,gCAAf,CAHZ;OAIL2Q,qBAAqB,EAAE5Q,aAAG,CAACC,UAAJ,CAAe,6BAAf,CAJlB;OAKL4Q,iBAAiB,EAAE7Q,aAAG,CAACC,UAAJ,CAAe,mCAAf,CALd;OAML6Q,uBAAuB,EAAE9Q,aAAG,CAACC,UAAJ,CAAe,8BAAf,CANpB;OAOL8Q,eAAe,EAAE,sCAPZ;OAQLC,QAAQ,EAAE,sCARL;OASLE,KAAK,EAAE,SATF;OAUL/F,QAAQ,EAAEA,QAVL;OAWL/G,UAAU,EAAEA,UAXP;OAYL7E,qBAAqB,EAAE;MAZxB;KAeA,KAAKqT,WAAL,GAAmB5S,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAAnB;KACA,KAAK4S,iBAAL,GAAyB7S,aAAG,CAACC,UAAJ,CAAe,yBAAf,CAAzB;;;GAGDknB,gBAAgB,GAChB;KACC,OAAO,KAAKC,aAAZ;;;GAGD/V,kBAAkB,GAClB;KACC,OAAOvR,aAAG,CAACC,MAAX,oBAAmB;KAAnB,CACmC;KADnC,CAEgC;KAFhC,CAGgC;GAHhC,GACG,KAAKkS,wBAAL,EADH,EAEG,KAAKO,qBAAL,EAFH,EAGG,KAAK6U,qBAAL,EAHH;;;GAODrV,oBAAoB,GACpB;KACC,OAAOlS,aAAG,CAACC,MAAX,sBAAkB;KAAlB,CACqC;KADrC,CAEgC;GAFhC,GACG,KAAKuR,0BAAL,EADH,EAEG,KAAK+V,qBAAL,EAFH;;;GAMDA,qBAAqB,GACrB;KACC,OAAOvnB,aAAG,CAACC,MAAX,sBAAkB;;;kDAAlB,CAG6F;;;oDAH7F,CAMoG;;;sDANpG,CASsG;;;sDATtG,CAYuG;;;sDAZvG,CAesG;;;sDAftG,CAkBuG;;;sDAlBvG,CAqBgK;;;sDArBhK,CAwBsG;;;sDAxBtG,CA2BwG;;;oDA3BxG,CA8BmG;;;GA9BnG,GAGgDC,aAAG,CAACC,UAAJ,CAAe,4BAAf,CAHhD,EAMkDD,aAAG,CAACC,UAAJ,CAAe,iCAAf,CANlD,EASoDD,aAAG,CAACC,UAAJ,CAAe,iCAAf,CATpD,EAYoDD,aAAG,CAACC,UAAJ,CAAe,kCAAf,CAZpD,EAeoDD,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAfpD,EAkBoDD,aAAG,CAACC,UAAJ,CAAe,kCAAf,CAlBpD,EAqBoDD,aAAG,CAACC,UAAJ,CAAe,iCAAf,EAAkD;OAAE,oBAAoB,KAAKkL,QAAL,CAAcgc,gBAAd;MAAxE,CArBpD,EAwBoDnnB,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAxBpD,EA2BoDD,aAAG,CAACC,UAAJ,CAAe,mCAAf,CA3BpD,EA8BkDD,aAAG,CAACC,UAAJ,CAAe,gCAAf,CA9BlD;;;GAoCD0S,wBAAwB,GACxB;KACCxQ,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBgY,cAAtB,GAAuCrW,OAAvC,CAA+CxB,MAAM,IACrD;OACC,IAAI,CAAC,gCAAD,EAAmC,gCAAnC,EAAqEsG,QAArE,CAA8EtG,MAAM,CAAC8X,MAAP,EAA9E,CAAJ,EACA;SACC9X,MAAM,CAACuM,KAAP;;MAJF;KAQA,MAAMuY,eAAe,GAAGtY,kBAAI,CAACuY,kBAAL,EAAxB;;KACA,IAAID,eAAJ,EACA;OACCA,eAAe,CACbE,aADF,CAEEC,iBAFF,GAGExT,gBAHF,GAIEhO,qBAJF,GAKEmD,mBALF;;;;CA/FH;;CCFe,MAAMse,eAAN,SAA8BpX,iBAA9B,CACf;GACCpR,WAAW,CAACiM,QAAD,EAAW/G,UAAU,GAAG,IAAxB,EACX;KACC,MAAM;OACL4H,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,oBAAf,CADF;OAELkO,YAAY,EAAE,SAFT;OAGLwC,eAAe,EAAE3Q,aAAG,CAACC,UAAJ,CAAe,gCAAf,CAHZ;OAIL2Q,qBAAqB,EAAE5Q,aAAG,CAACC,UAAJ,CAAe,6BAAf,CAJlB;OAKL4Q,iBAAiB,EAAE7Q,aAAG,CAACC,UAAJ,CAAe,mCAAf,CALd;OAML6Q,uBAAuB,EAAE9Q,aAAG,CAACC,UAAJ,CAAe,8BAAf,CANpB;OAOL8Q,eAAe,EAAE,sCAPZ;OAQLC,QAAQ,EAAE,sCARL;OASLE,KAAK,EAAE,SATF;OAUL/F,QAAQ,EAAEA,QAVL;OAWL/G,UAAU,EAAEA,UAXP;OAYL7E,qBAAqB,EAAE;MAZxB;;;CAHF;;CCDe,MAAMooB,cAAN,SAA6BxT,uBAA7B,CACf;GACCjV,WAAW,CAACiM,QAAD,EAAW/G,UAAU,GAAG,IAAxB,EACX;KACC,MAAM;OACL4H,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,uBAAf,CADF;OAELkO,YAAY,EAAE,UAFT;OAGLwC,eAAe,EAAE3Q,aAAG,CAACC,UAAJ,CAAe,6BAAf,CAHZ;OAIL2Q,qBAAqB,EAAE5Q,aAAG,CAACC,UAAJ,CAAe,gCAAf,CAJlB;OAKL4Q,iBAAiB,EAAE7Q,aAAG,CAACC,UAAJ,CAAe,gCAAf,CALd;OAML6Q,uBAAuB,EAAE9Q,aAAG,CAACC,UAAJ,CAAe,iCAAf,CANpB;OAOL8Q,eAAe,EAAE,yCAPZ;OAQLC,QAAQ,EAAE,yCARL;OASLC,aAAa,EAAE,UATV;OAULC,KAAK,EAAE,SAVF;OAWL/F,QAAQ,EAAEA,QAXL;OAYL/G,UAAU,EAAEA,UAZP;OAaL7E,qBAAqB,EAAE;MAbxB;;;CAHF;;;;;;;CCCe,MAAMqoB,uBAAN,SAAsCtX,iBAAtC,CACf;GACCpR,WAAW,CAACC,OAAD,EACX;KACC,MAAMA,OAAN;KAEA,KAAK0oB,MAAL,GAAc,IAAIla,gBAAJ,CAAqB;OAClCnC,IAAI,EAAE,KAAKL,QAAL,CAAcyB,OAAd,EAD4B;OAElCuB,YAAY,EAAEhP,OAAO,CAACgP;MAFT,CAAd;;KAKA,IAAI,KAAK/O,MAAT,EACA;OACC,KAAK0oB,QAAL,GAAgBxhB,cAAI,CAACmD,MAAL,CAAY,KAAK0G,IAAL,CAAU2X,QAAtB,IAAkC,KAAK3X,IAAL,CAAU2X,QAA5C,GAAuD9Y,kBAAI,CAAC+Y,SAAL,CAAe,KAAK5X,IAAL,CAAU2X,QAAzB,CAAvE;;;;GAIFzW,kBAAkB,GAClB;KACC,OAAOvR,aAAG,CAACC,MAAX,oBAAmB;KAAnB,CACmC;KADnC,CAEgC;;MAFhC,CAIiC;;GAJjC,GACG,KAAKkS,wBAAL,EADH,EAEG,KAAKO,qBAAL,EAFH,EAII,KAAK6U,qBAAL,EAJJ;;;GASDrV,oBAAoB,GACpB;KACC,OAAOlS,aAAG,CAACC,MAAX,sBAAkB;KAAlB,CACqC;;MADrC,CAGiC;;GAHjC,GACG,KAAKuR,0BAAL,EADH,EAGI,KAAK+V,qBAAL,EAHJ;;;GAQD/V,0BAA0B,GAC1B;KACC,MAAM9H,SAAS,GAAG,KAAKpF,UAAL,CAAgBoD,WAAhB,GAA8BoC,OAA9B,KAA0C,IAA5D;KACA,MAAM6H,QAAQ,GAAGjI,SAAS,GACvBwF,kBAAI,CAAC0C,gBAAL,CAAsBlI,SAAtB,IAAmC,GAAnC,GAAyCrH,EAAE,CAACkH,IAAH,CAAQU,MAAR,CAAeiF,kBAAI,CAAC2C,kBAAL,EAAf,EAA0CnI,SAA1C,CADlB,GAEvB,EAFH;KAIA,OAAO1J,aAAG,CAACC,MAAX,sBAAmB;;mDAAnB,CAEsE;;8CAFtE,CAImE;;oDAJnE,CAM4F;oDAN5F,CAO2D;;6CAP3D,CAS8E;gFAT9E,CAUuG,KAVvG,CAUsJ;;UAVtJ,GAEiD,KAAKgR,eAFtD,EAI4C,KAAKF,iBAJjD,EAMkD7Q,aAAG,CAACC,UAAJ,CAAe,yBAAf,CANlD,EAOkDwR,QAPlD,EAS2CzR,aAAG,CAACC,UAAJ,CAAe,kBAAf,CAT3C,EAU8E,KAAKmS,QAAL,CAAc7J,IAAd,CAAmB,IAAnB,CAV9E,EAU2GvI,aAAG,CAACC,UAAJ,CAAe,0BAAf,CAV3G;;;GAeDonB,qBAAqB,GACrB;KACC,KAAKQ,MAAL,CAAYjZ,UAAZ,GAAyBC,IAAzB,CAA8B,KAAKgZ,MAAL,CAAY/Y,UAAZ,CAAuBvG,IAAvB,CAA4B,KAAKsf,MAAjC,CAA9B;KACA,OAAO,KAAKA,MAAL,CAAYrZ,YAAZ,EAAP;;;GAGDuD,0BAA0B,GAC1B;KACC,OAAOjS,aAAG,CAACC,MAAX,sBAAkB;;;+CAAlB,CAGmE;;MAHnE,CAKgC;;GALhC,GAG6C,KAAKqR,cAAL,EAH7C,EAKI,KAAKY,oBAAL,EALJ;;;CAnEF;;CCFe,MAAMgW,eAAN,SAA8BJ,uBAA9B,CACf;GACC1oB,WAAW,CAACiM,QAAD,EAAW/G,UAAU,GAAG,IAAxB,EACX;KACC,MAAM;OACL4H,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,wBAAf,CADF;OAELkO,YAAY,EAAE,SAFT;OAGLwC,eAAe,EAAE3Q,aAAG,CAACC,UAAJ,CAAe,oCAAf,CAHZ;OAIL2Q,qBAAqB,EAAE5Q,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAJlB;OAKL4Q,iBAAiB,EAAE7Q,aAAG,CAACC,UAAJ,CAAe,kCAAf,CALd;OAML6Q,uBAAuB,EAAE9Q,aAAG,CAACC,UAAJ,CAAe,kCAAf,CANpB;OAOL8Q,eAAe,EAAE,0CAPZ;OAQLC,QAAQ,EAAE,0CARL;OASLE,KAAK,EAAE,SATF;OAUL/F,QAAQ,EAAEA,QAVL;OAWL/G,UAAU,EAAEA,UAXP;OAYL7E,qBAAqB,EAAE;MAZxB;KAeA,KAAKqT,WAAL,GAAmB5S,aAAG,CAACC,UAAJ,CAAe,0BAAf,CAAnB;KACA,KAAK4S,iBAAL,GAAyB7S,aAAG,CAACC,UAAJ,CAAe,yBAAf,CAAzB;;;GAGD0S,wBAAwB,GACxB;KACCxQ,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBgY,cAAtB,GAAuCrW,OAAvC,CAA+CxB,MAAM,IACrD;OACC,IAAI,CAAC,gCAAD,EAAmC,oCAAnC,EAAyEsG,QAAzE,CAAkFtG,MAAM,CAAC8X,MAAP,EAAlF,CAAJ,EACA;SACC9X,MAAM,CAACuM,KAAP;;MAJF;KAQA,MAAMuY,eAAe,GAAGtY,kBAAI,CAACuY,kBAAL,EAAxB;;KACA,IAAID,eAAJ,EACA;OACCA,eAAe,CACbE,aADF,CAEES,iBAFF,GAGEhU,gBAHF,GAIEhO,qBAJF,GAKEmD,mBALF;;;;CAnCH;;CCDe,MAAM8e,cAAN,SAA6BN,uBAA7B,CACf;GACC1oB,WAAW,CAACiM,QAAD,EAAW/G,UAAU,GAAG,IAAxB,EACX;KACC,MAAM;OACL4H,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,uBAAf,CADF;OAELkO,YAAY,EAAE,SAFT;OAGLwC,eAAe,EAAE3Q,aAAG,CAACC,UAAJ,CAAe,mCAAf,CAHZ;OAIL2Q,qBAAqB,EAAE5Q,aAAG,CAACC,UAAJ,CAAe,gCAAf,CAJlB;OAKL4Q,iBAAiB,EAAE7Q,aAAG,CAACC,UAAJ,CAAe,iCAAf,CALd;OAML6Q,uBAAuB,EAAE9Q,aAAG,CAACC,UAAJ,CAAe,iCAAf,CANpB;OAOL8Q,eAAe,EAAE,yCAPZ;OAQLC,QAAQ,EAAE,yCARL;OASLE,KAAK,EAAE,SATF;OAUL/F,QAAQ,EAAEA,QAVL;OAWL/G,UAAU,EAAEA,UAXP;OAYL7E,qBAAqB,EAAE;MAZxB;KAeA,KAAKqT,WAAL,GAAmB5S,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAAnB;KACA,KAAK4S,iBAAL,GAAyB7S,aAAG,CAACC,UAAJ,CAAe,yBAAf,CAAzB;;;GAGD0S,wBAAwB,GACxB;KACCxQ,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBgY,cAAtB,GAAuCrW,OAAvC,CAA+CxB,MAAM,IACrD;OACC,IAAI,CAAC,gCAAD,EAAmC,mCAAnC,EAAwEsG,QAAxE,CAAiFtG,MAAM,CAAC8X,MAAP,EAAjF,CAAJ,EACA;SACC9X,MAAM,CAACuM,KAAP;;MAJF;KAQA,MAAMuY,eAAe,GAAGtY,kBAAI,CAACuY,kBAAL,EAAxB;;KACA,IAAID,eAAJ,EACA;OACCA,eAAe,CACbE,aADF,CAEEC,iBAFF,GAGExT,gBAHF,GAIEhO,qBAJF,GAKEmD,mBALF;;;;CAnCH;;;;;;;;;;;;ACCA,CAAe,MAAM+e,aAAN,CACf;GAGCjpB,WAAW,CAACC,OAAD,EACX;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA,KAHAipB,WAGA,GAHc,GAGd;KACC,KAAKvd,IAAL,GAAY,KAAKwd,WAAL,CAAiBlpB,OAAjB,CAAZ;;;GAGoB,OAAdM,cAAc,CAACN,OAAD,EACrB;KACC,OAAO,IAAI,IAAJ,CAASA,OAAT,CAAP;;;GAGD8B,IAAI,GACJ;KACC,KAAKqnB,WAAL,GAAmBrnB,IAAnB;KACA,KAAKsnB,SAAL;;;GAGDA,SAAS,GACT;KACCpmB,EAAE,CAACoK,IAAH,CAAQ0I,GAAR,CAAY,KAAKpK,IAAL,GAAY,UAAxB,EAAoC,EAApC,EAAyCib,MAAD,IACxC;OACCplB,UAAU,CAAC,MACX;SACC,IAAI,CAAColB,MAAD,IAAWA,MAAM,CAAC3hB,MAAP,IAAiB,CAA5B,IAAiC2hB,MAAM,CAAC5d,WAAP,GAAqBsgB,OAArB,CAA6B,iBAA7B,MAAoD,CAAC,CAA1F,EACA;WACC,KAAKC,0BAAL;;QAJQ,EAMP,GANO,CAAV;MAFD;;;GAYD7oB,UAAU,GACV;KACC,OAAOE,aAAG,CAACC,MAAX,oBAAkB;;UAAlB,CAE4C;wDAF5C,CAGoF;MAHpF,CAIwB;;GAJxB,GAEQC,aAAG,CAACC,UAAJ,CAAe,mBAAf,CAFR,EAGsDD,aAAG,CAACC,UAAJ,CAAe,aAAf,CAHtD,EAII,KAAKyoB,YAAL,EAJJ;;;GASDJ,WAAW,GACX;KACC,OAAO,KAAKvnB,KAAL,GAAa,IAAIsN,gBAAJ,CAAU;OAC7BpL,KAAK,EAAE,GADsB;OAE7B0lB,aAAa,EAAE,IAFc;OAG7BhJ,QAAQ,EAAE,KAHmB;OAI7BjR,UAAU,EAAE,IAJiB;OAK7BJ,SAAS,EAAE,IALkB;OAM7BK,SAAS,EAAE;SAACia,KAAK,EAAE,MAAR;SAAgBze,GAAG,EAAE;QANH;OAO7BhD,SAAS,EAAE,kBAPkB;OAQ7BoH,OAAO,EAAE,KAAK3O,UAAL,EARoB;OAS7BgW,OAAO,EAAE,CACR,IAAIzT,EAAE,CAACsT,EAAH,CAAMmL,MAAV,CAAiB;SAChB/Y,IAAI,EAAG7H,aAAG,CAACC,UAAJ,CAAe,gCAAf,CADS;SAEhBiR,KAAK,EAAE/O,EAAE,CAACsT,EAAH,CAAMmL,MAAN,CAAayE,KAAb,CAAmBwD,OAFV;SAGhBC,OAAO,EAAE,MAAM;WACd,KAAKC,QAAL,CAAc1W,KAAd;;QAJF,CADQ,EAQR,IAAIlQ,EAAE,CAACsT,EAAH,CAAMmL,MAAV,CAAiB;SAChB/Y,IAAI,EAAG7H,aAAG,CAACC,UAAJ,CAAe,qBAAf,CADS;SAEhBiR,KAAK,EAAE/O,EAAE,CAACsT,EAAH,CAAMmL,MAAN,CAAayE,KAAb,CAAmB2D,IAFV;SAGhBF,OAAO,EAAE,MAAM;WACd,KAAK/nB,KAAL,CAAWgO,KAAX;;QAJF,CARQ;MATU,CAApB;;;GA4BDsZ,WAAW,CAAClpB,OAAD,EACX;KACC,OAAOA,OAAO,CAAC8pB,YAAR,IACF9pB,OAAO,CAAC8pB,YAAR,CAAqBT,OAArB,CAA6B,GAA7B,KAAqC,CAAtC,GAA2C,GAA3C,GAAiD,GAD9C,IAEJ,eAFI,GAGJrpB,OAAO,CAAC+pB,WAHX;;;GAMDR,YAAY,GACZ;KACC,OAAO5oB,aAAG,CAACC,MAAX,sBAAkB;;iEAAlB,CAEmG;QAFnG,CAG+D;;;IAH/D,GAE+DoC,EAAE,CAAC8J,IAAH,CAAQC,gBAAR,CAAyB,KAAKrB,IAA9B,CAF/D,EAGM1I,EAAE,CAAC8J,IAAH,CAAQC,gBAAR,CAAyB,KAAKid,cAAL,CAAoB,KAAKte,IAAzB,CAAzB,CAHN;;;GASiB,OAAXue,WAAW,CAACjqB,OAAD,EAClB;KACC,OAAQ,CAAC,CAACA,OAAO,CAAC+pB,WAAV,IAAyB,CAAC,CAAC/pB,OAAO,CAAC8pB,YAA3C;;;GAG8B,OAAxBI,wBAAwB,GAC/B;KACClnB,EAAE,CAACsT,EAAH,CAAMC,OAAN,CAAcC,UAAd,CAAyBN,KAAzB,CAA+BrV,aAAG,CAACC,UAAJ,CAAe,8BAAf,CAA/B;;;GAGDwoB,0BAA0B,GAC1B;KACCtmB,EAAE,CAACsT,EAAH,CAAMC,OAAN,CAAcC,UAAd,CAAyBN,KAAzB,CAA+BrV,aAAG,CAACC,UAAJ,CAAe,kBAAf,CAA/B;;;GAGD8oB,QAAQ,CAAC1W,KAAD,EACR;KACCnI,MAAM,CAAC/H,EAAP,CAAUmnB,SAAV,CAAoBC,IAApB,CAAyB,KAAK1e,IAA9B,4CACG,IADH,0GAEG,IAFH;KAIAwH,KAAK,CAACC,cAAN;KACAD,KAAK,CAACmX,eAAN;;;GAGDL,cAAc,CAACte,IAAD,EACd;KACC,OAAOA,IAAI,CAAC1G,MAAL,GAAc,KAAKikB,WAAnB,GAAiCvd,IAAjC,GAAwCA,IAAI,CAAC4e,MAAL,CAAY,CAAZ,EAAe,GAAf,IAAsB,KAAtB,GAA8B5e,IAAI,CAACwZ,KAAL,CAAW,CAAC,CAAZ,CAA7E;;;CAxHF;;0CA4HC;GACC,gGAA6BrkB,aAAG,CAACC,UAAJ,CAAe,wCAAf,CAA7B;CACA;;yCAGD;GACC,gGAA6BD,aAAG,CAACC,UAAJ,CAAe,uCAAf,CAA7B;CACA;;mCAEuBqV,SACxB;GACCtG,kBAAI,CAAC6E,gBAAL,CAAsByB,OAAtB;CACA;;CC5Ia,MAAMoU,aAAN,CACf;GACCxqB,WAAW,CAACC,OAAO,GAAG,EAAX,EACX;KACC,KAAKA,OAAL,GAAeA,OAAf;;;GAGoB,OAAdM,cAAc,CAACN,OAAD,EACrB;KACC,OAAO,IAAI,IAAJ,CAASA,OAAT,CAAP;;;GAGDmQ,aAAa,GACb;KACC,OAAO,IAAI7M,OAAJ,CAAaC,OAAD,IAAa;OAC/B2M,iBAAO,CAACC,aAAR,CAAsB,SAAtB,EAAiCT,IAAjC,CAAuCU,OAAD,IAAa;SAClD,IAAIA,OAAO,IAAIA,OAAO,CAAC,OAAD,CAAlB,IAA+BA,OAAO,CAAC,SAAD,CAA1C,EACA;WACC7M,OAAO;UAFR,MAKA;WACCinB,OAAO,CAACC,KAAR,CAAe,+BAAf;;QAPF;MADM,CAAP;;;GAcD3oB,IAAI,GACJ;KACC,KAAKqO,aAAL,GACET,IADF,CACO,MAAM;OACX,KAAKgb,KAAL,GAAa,IAAI1nB,EAAE,CAACsT,EAAH,CAAMqU,IAAN,CAAWC,KAAf,CAAqB;SACjCC,KAAK,EAAE,CACN;WACC1K,MAAM,EAAE,KAAK2K,SAAL,EADT;WAECje,KAAK,EAAEhM,aAAG,CAACC,UAAJ,CAAe,0BAAf,CAFR;WAGC4H,IAAI,EAAE7H,aAAG,CAACC,UAAJ,CAAe,yBAAf;UAJD,CAD0B;SAQjCiqB,QAAQ,EAAE;QARE,CAAb;OAWA,KAAKL,KAAL,CAAWM,KAAX;MAbF;;;GAiBDF,SAAS,GACT;KACC,IAAI3K,MAAJ;KACA,MAAM8K,IAAI,GAAG,KAAKjrB,OAAL,CAAairB,IAA1B;KACA,MAAMC,QAAQ,GAAGD,IAAI,CAAC5b,YAAL,EAAjB;;KAEA,IAAI4b,IAAI,CAACrN,OAAL,OAAmB,OAAvB,EACA;OACCuC,MAAM,GAAG+K,QAAQ,CAACC,gBAAT,CAA0B,sBAA1B,EAAkD,CAAlD,CAAT;MAFD,MAIK,IAAIF,IAAI,CAACrN,OAAL,OAAmB,KAAnB,IACNqN,IAAI,CAACrN,OAAL,OAAmB,MADjB,EAEL;OACC,MAAMwN,OAAO,GAAGvb,kBAAI,CAACwb,UAAL,CAAgB,IAAIjhB,IAAJ,EAAhB,CAAhB;OACA+V,MAAM,GAAG+K,QAAQ,CAACxkB,aAAT,CAAuB,wCAAwC0kB,OAAxC,GAAkD,8BAAzE,CAAT;MAJI,MAOL;OACCjL,MAAM,GAAG1Z,QAAQ,CAACC,aAAT,CAAuB,6BAAvB,CAAT;;;KAGD,OAAOyZ,MAAP;;;CAnEF;;;;;;;;;;;;;;;;;;;;;;;;;;;"}